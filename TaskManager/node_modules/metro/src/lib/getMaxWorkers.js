"use strict";

const os = require("os");
module.exports = (workers) => {
<<<<<<< HEAD
  const cores = os.availableParallelism();
=======
  const cores = os.cpus().length;
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
  return typeof workers === "number" && Number.isInteger(workers)
    ? Math.min(cores, workers > 0 ? workers : 1)
    : Math.max(1, Math.ceil(cores * (0.5 + 0.5 * Math.exp(-cores * 0.07)) - 1));
};
