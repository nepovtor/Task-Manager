/*
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

#pragma once

<<<<<<< HEAD
#include "../utils/InspectorFlagOverridesGuard.h"

=======
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
#include <jsinspector-modern/RuntimeTarget.h>

#include <folly/executors/QueuedImmediateExecutor.h>
#include <hermes/hermes.h>
<<<<<<< HEAD
#include <hermes/inspector-modern/chrome/HermesRuntimeTargetDelegate.h>
=======
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
#include <jsi/jsi.h>

#include <memory>

namespace facebook::react::jsinspector_modern {

/**
<<<<<<< HEAD
 * An engine adapter for JsiIntegrationTest that uses Hermes (and Hermes'
 * modern CDPAgent API).
 */
class JsiIntegrationTestHermesEngineAdapter {
 public:
  explicit JsiIntegrationTestHermesEngineAdapter(folly::Executor& jsExecutor);

  static InspectorFlagOverrides getInspectorFlagOverrides() noexcept;

  RuntimeTargetDelegate& getRuntimeTargetDelegate();
=======
 * An engine adapter for JsiIntegrationTest that uses Hermes (and Hermes's
 * CDP support).
 */
class JsiIntegrationTestHermesEngineAdapter : public RuntimeTargetDelegate {
 public:
  explicit JsiIntegrationTestHermesEngineAdapter(folly::Executor& jsExecutor);

  virtual std::unique_ptr<RuntimeAgentDelegate> createAgentDelegate(
      FrontendChannel frontendChannel,
      SessionState& sessionState,
      std::unique_ptr<RuntimeAgentDelegate::ExportedState>
          previouslyExportedState,
      const ExecutionContextDescription& executionContextDescription) override;
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251

  jsi::Runtime& getRuntime() const noexcept;

  RuntimeExecutor getRuntimeExecutor() const noexcept;

 private:
  std::shared_ptr<facebook::hermes::HermesRuntime> runtime_;
  folly::Executor& jsExecutor_;
<<<<<<< HEAD
  HermesRuntimeTargetDelegate runtimeTargetDelegate_;
=======
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
};

} // namespace facebook::react::jsinspector_modern
