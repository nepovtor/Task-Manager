package expo.modules.core.logging

<<<<<<< HEAD
import java.io.File
=======
import android.content.Context
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251

/**
 * Log handler that writes all logs to a file using PersistentFileLog
 * Android context must be passed in as the second parameter in the constructor
 */
internal class PersistentFileLogHandler(
  category: String,
<<<<<<< HEAD
  filesDirectory: File
) : LogHandler() {

  private val persistentFileLog = PersistentFileLog(category, filesDirectory)
=======
  context: Context
) : LogHandler() {

  private val persistentFileLog = PersistentFileLog(category, context)
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251

  override fun log(type: LogType, message: String, cause: Throwable?) {
    persistentFileLog.appendEntry(message)
    cause?.let {
<<<<<<< HEAD
      persistentFileLog.appendEntry("${cause.localizedMessageWithCauseLocalizedMessage()}\n${cause.stackTraceToString()}")
=======
      persistentFileLog.appendEntry("${cause.localizedMessage}\n${cause.stackTraceToString()}")
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    }
  }
}
