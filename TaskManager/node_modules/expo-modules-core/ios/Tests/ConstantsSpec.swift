import ExpoModulesTestCore

@testable import ExpoModulesCore

class ConstantsSpec: ExpoSpec {
  override class func spec() {
    let appContext = AppContext()

<<<<<<< HEAD
    /**
     Legacy Constants specs
     */
=======
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    it("takes closure resolving to dictionary") {
      let holder = mockModuleHolder(appContext) {
        Constants {
          return ["test": 123]
        }
      }
<<<<<<< HEAD
      expect(holder.getLegacyConstants()["test"] as? Int) == 123
=======
      expect(holder.getConstants()["test"] as? Int) == 123
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    }

    it("takes the dictionary") {
      let holder = mockModuleHolder(appContext) {
        Constants(["test": 123])
      }
<<<<<<< HEAD
      expect(holder.getLegacyConstants()["test"] as? Int) == 123
=======
      expect(holder.getConstants()["test"] as? Int) == 123
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    }

    it("merges multiple constants definitions") {
      let holder = mockModuleHolder(appContext) {
        Constants(["test": 456, "test2": 789])
        Constants(["test": 123])
      }
<<<<<<< HEAD
      let consts = holder.getLegacyConstants()
=======
      let consts = holder.getConstants()
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
      expect(consts["test"] as? Int) == 123
      expect(consts["test2"] as? Int) == 789
    }
  }
}
