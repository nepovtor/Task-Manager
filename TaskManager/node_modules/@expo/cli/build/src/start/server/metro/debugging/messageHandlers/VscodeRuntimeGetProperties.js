"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "VscodeRuntimeGetPropertiesHandler", {
    enumerable: true,
<<<<<<< HEAD
    get: function() {
        return VscodeRuntimeGetPropertiesHandler;
    }
});
const _MessageHandler = require("../MessageHandler");
const _getDebuggerType = require("../getDebuggerType");
class VscodeRuntimeGetPropertiesHandler extends _MessageHandler.MessageHandler {
    isEnabled() {
        return (0, _getDebuggerType.getDebuggerType)(this.debugger.userAgent) === 'vscode';
    }
    handleDebuggerMessage(message) {
        if (message.method === 'Runtime.getProperties') {
=======
    get: ()=>VscodeRuntimeGetPropertiesHandler
});
const _messageHandler = require("../MessageHandler");
const _getDebuggerType = require("../getDebuggerType");
class VscodeRuntimeGetPropertiesHandler extends _messageHandler.MessageHandler {
    /** Keep track of `Runtime.getProperties` responses to intercept, by request id */ interceptGetProperties = new Set();
    isEnabled() {
        return (0, _getDebuggerType.getDebuggerType)(this.debugger.userAgent) === "vscode";
    }
    handleDebuggerMessage(message) {
        if (message.method === "Runtime.getProperties") {
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
            this.interceptGetProperties.add(message.id);
        }
        // Do not block propagation of this message
        return false;
    }
    handleDeviceMessage(message) {
<<<<<<< HEAD
        if ('id' in message && this.interceptGetProperties.has(message.id)) {
            this.interceptGetProperties.delete(message.id);
            for (const item of message.result.result ?? []){
                var _item_value;
                // Force-fully format the properties description to be an empty string
                if (item.value) {
                    item.value.description = item.value.description ?? '';
=======
        if ("id" in message && this.interceptGetProperties.has(message.id)) {
            this.interceptGetProperties.delete(message.id);
            var _result;
            for (const item of (_result = message.result.result) != null ? _result : []){
                var ref;
                // Force-fully format the properties description to be an empty string
                if (item.value) {
                    var _description;
                    item.value.description = (_description = item.value.description) != null ? _description : "";
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
                }
                // Avoid passing the `objectId` for symbol types.
                // When collapsing in vscode, it will fetch information about the symbol using the `objectId`.
                // The `Runtime.getProperties` request of the symbol hard-crashes Hermes.
<<<<<<< HEAD
                if (((_item_value = item.value) == null ? void 0 : _item_value.type) === 'symbol' && item.value.objectId) {
=======
                if (((ref = item.value) == null ? void 0 : ref.type) === "symbol" && item.value.objectId) {
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
                    delete item.value.objectId;
                }
            }
        }
        // Do not block propagation of this message
        return false;
    }
<<<<<<< HEAD
    constructor(...args){
        super(...args), /** Keep track of `Runtime.getProperties` responses to intercept, by request id */ this.interceptGetProperties = new Set();
    }
=======
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
}

//# sourceMappingURL=VscodeRuntimeGetProperties.js.map