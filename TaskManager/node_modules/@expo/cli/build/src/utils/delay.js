"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
<<<<<<< HEAD
    delayAsync: function() {
        return delayAsync;
    },
    resolveWithTimeout: function() {
        return resolveWithTimeout;
    },
    waitForActionAsync: function() {
        return waitForActionAsync;
    }
=======
    delayAsync: ()=>delayAsync,
    waitForActionAsync: ()=>waitForActionAsync,
    resolveWithTimeout: ()=>resolveWithTimeout
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
});
const _errors = require("./errors");
function delayAsync(timeout) {
    return new Promise((resolve)=>setTimeout(resolve, timeout));
}
<<<<<<< HEAD
async function waitForActionAsync({ action, interval = 100, maxWaitTime = 20000 }) {
=======
async function waitForActionAsync({ action , interval =100 , maxWaitTime =20000  }) {
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    let complete;
    const start = Date.now();
    do {
        const actionStartTime = Date.now();
        complete = await action();
        const actionTimeElapsed = Date.now() - actionStartTime;
        const remainingDelayInterval = interval - actionTimeElapsed;
        if (remainingDelayInterval > 0) {
            await delayAsync(remainingDelayInterval);
        }
        if (Date.now() - start > maxWaitTime) {
            break;
        }
    }while (!complete);
    return complete;
}
<<<<<<< HEAD
function resolveWithTimeout(action, { timeout, errorMessage }) {
    return new Promise((resolve, reject)=>{
        setTimeout(()=>{
            reject(new _errors.CommandError('TIMEOUT', errorMessage));
=======
function resolveWithTimeout(action, { timeout , errorMessage  }) {
    return new Promise((resolve, reject)=>{
        setTimeout(()=>{
            reject(new _errors.CommandError("TIMEOUT", errorMessage));
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
        }, timeout);
        action().then(resolve, reject);
    });
}

//# sourceMappingURL=delay.js.map