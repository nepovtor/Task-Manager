"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
<<<<<<< HEAD
    getCodeSigningInfoForPbxproj: function() {
        return getCodeSigningInfoForPbxproj;
    },
    mutateXcodeProjectWithAutoCodeSigningInfo: function() {
        return mutateXcodeProjectWithAutoCodeSigningInfo;
    },
    setAutoCodeSigningInfoForPbxproj: function() {
        return setAutoCodeSigningInfoForPbxproj;
    }
});
function _configplugins() {
    const data = require("@expo/config-plugins");
    _configplugins = function() {
=======
    getCodeSigningInfoForPbxproj: ()=>getCodeSigningInfoForPbxproj,
    mutateXcodeProjectWithAutoCodeSigningInfo: ()=>mutateXcodeProjectWithAutoCodeSigningInfo,
    setAutoCodeSigningInfoForPbxproj: ()=>setAutoCodeSigningInfoForPbxproj
});
function _configPlugins() {
    const data = require("@expo/config-plugins");
    _configPlugins = function() {
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
        return data;
    };
    return data;
}
function _fs() {
<<<<<<< HEAD
    const data = /*#__PURE__*/ _interop_require_default(require("fs"));
=======
    const data = /*#__PURE__*/ _interopRequireDefault(require("fs"));
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    _fs = function() {
        return data;
    };
    return data;
}
<<<<<<< HEAD
function _interop_require_default(obj) {
=======
function _interopRequireDefault(obj) {
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function getCodeSigningInfoForPbxproj(projectRoot) {
<<<<<<< HEAD
    const project = _configplugins().IOSConfig.XcodeUtils.getPbxproj(projectRoot);
    const targets = _configplugins().IOSConfig.Target.findSignableTargets(project);
=======
    const project = _configPlugins().IOSConfig.XcodeUtils.getPbxproj(projectRoot);
    const targets = _configPlugins().IOSConfig.Target.findSignableTargets(project);
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    const signingInfo = {};
    for (const [nativeTargetId, nativeTarget] of targets){
        const developmentTeams = [];
        const provisioningProfiles = [];
<<<<<<< HEAD
        _configplugins().IOSConfig.XcodeUtils.getBuildConfigurationsForListId(project, nativeTarget.buildConfigurationList).filter(([, item])=>item.buildSettings.PRODUCT_NAME).forEach(([, item])=>{
            const { DEVELOPMENT_TEAM, PROVISIONING_PROFILE } = item.buildSettings;
            if (typeof DEVELOPMENT_TEAM === 'string' && // If the user selects "Team: none" in Xcode, it'll be an empty string.
=======
        _configPlugins().IOSConfig.XcodeUtils.getBuildConfigurationsForListId(project, nativeTarget.buildConfigurationList).filter(([, item])=>item.buildSettings.PRODUCT_NAME).forEach(([, item])=>{
            const { DEVELOPMENT_TEAM , PROVISIONING_PROFILE  } = item.buildSettings;
            if (typeof DEVELOPMENT_TEAM === "string" && // If the user selects "Team: none" in Xcode, it'll be an empty string.
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
            !!DEVELOPMENT_TEAM && // xcode package sometimes reads an empty string as a quoted empty string.
            DEVELOPMENT_TEAM !== '""') {
                developmentTeams.push(DEVELOPMENT_TEAM);
            }
<<<<<<< HEAD
            if (typeof PROVISIONING_PROFILE === 'string' && !!PROVISIONING_PROFILE) {
=======
            if (typeof PROVISIONING_PROFILE === "string" && !!PROVISIONING_PROFILE) {
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
                provisioningProfiles.push(PROVISIONING_PROFILE);
            }
        });
        signingInfo[nativeTargetId] = {
            developmentTeams,
            provisioningProfiles
        };
    }
    return signingInfo;
}
<<<<<<< HEAD
function mutateXcodeProjectWithAutoCodeSigningInfo({ project, appleTeamId }) {
    const targets = _configplugins().IOSConfig.Target.findSignableTargets(project);
    const quotedAppleTeamId = ensureQuotes(appleTeamId);
    for (const [nativeTargetId, nativeTarget] of targets){
        _configplugins().IOSConfig.XcodeUtils.getBuildConfigurationsForListId(project, nativeTarget.buildConfigurationList).filter(([, item])=>item.buildSettings.PRODUCT_NAME).forEach(([, item])=>{
            item.buildSettings.DEVELOPMENT_TEAM = quotedAppleTeamId;
            item.buildSettings.CODE_SIGN_IDENTITY = '"Apple Development"';
            item.buildSettings.CODE_SIGN_STYLE = 'Automatic';
        });
        Object.entries(_configplugins().IOSConfig.XcodeUtils.getProjectSection(project)).filter(_configplugins().IOSConfig.XcodeUtils.isNotComment).forEach(([, item])=>{
=======
function mutateXcodeProjectWithAutoCodeSigningInfo({ project , appleTeamId  }) {
    const targets = _configPlugins().IOSConfig.Target.findSignableTargets(project);
    const quotedAppleTeamId = ensureQuotes(appleTeamId);
    for (const [nativeTargetId, nativeTarget] of targets){
        _configPlugins().IOSConfig.XcodeUtils.getBuildConfigurationsForListId(project, nativeTarget.buildConfigurationList).filter(([, item])=>item.buildSettings.PRODUCT_NAME).forEach(([, item])=>{
            item.buildSettings.DEVELOPMENT_TEAM = quotedAppleTeamId;
            item.buildSettings.CODE_SIGN_IDENTITY = '"Apple Development"';
            item.buildSettings.CODE_SIGN_STYLE = "Automatic";
        });
        Object.entries(_configPlugins().IOSConfig.XcodeUtils.getProjectSection(project)).filter(_configPlugins().IOSConfig.XcodeUtils.isNotComment).forEach(([, item])=>{
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
            if (!item.attributes.TargetAttributes) {
                item.attributes.TargetAttributes = {};
            }
            if (!item.attributes.TargetAttributes[nativeTargetId]) {
                item.attributes.TargetAttributes[nativeTargetId] = {};
            }
            item.attributes.TargetAttributes[nativeTargetId].DevelopmentTeam = quotedAppleTeamId;
<<<<<<< HEAD
            item.attributes.TargetAttributes[nativeTargetId].ProvisioningStyle = 'Automatic';
=======
            item.attributes.TargetAttributes[nativeTargetId].ProvisioningStyle = "Automatic";
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
        });
    }
    return project;
}
<<<<<<< HEAD
function setAutoCodeSigningInfoForPbxproj(projectRoot, { appleTeamId }) {
    const project = _configplugins().IOSConfig.XcodeUtils.getPbxproj(projectRoot);
=======
function setAutoCodeSigningInfoForPbxproj(projectRoot, { appleTeamId  }) {
    const project = _configPlugins().IOSConfig.XcodeUtils.getPbxproj(projectRoot);
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    mutateXcodeProjectWithAutoCodeSigningInfo({
        project,
        appleTeamId
    });
    _fs().default.writeFileSync(project.filepath, project.writeSync());
}
const ensureQuotes = (value)=>{
    if (!value.match(/^['"]/)) {
        return `"${value}"`;
    }
    return value;
};

//# sourceMappingURL=xcodeCodeSigning.js.map