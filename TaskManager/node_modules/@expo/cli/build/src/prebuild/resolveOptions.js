"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
<<<<<<< HEAD
    assertPlatforms: function() {
        return assertPlatforms;
    },
    ensureValidPlatforms: function() {
        return ensureValidPlatforms;
    },
    resolvePackageManagerOptions: function() {
        return resolvePackageManagerOptions;
    },
    resolvePlatformOption: function() {
        return resolvePlatformOption;
    },
    resolveSkipDependencyUpdate: function() {
        return resolveSkipDependencyUpdate;
    },
    resolveTemplateOption: function() {
        return resolveTemplateOption;
    }
});
function _assert() {
    const data = /*#__PURE__*/ _interop_require_default(require("assert"));
=======
    resolvePackageManagerOptions: ()=>resolvePackageManagerOptions,
    resolveTemplateOption: ()=>resolveTemplateOption,
    resolveSkipDependencyUpdate: ()=>resolveSkipDependencyUpdate,
    resolvePlatformOption: ()=>resolvePlatformOption,
    ensureValidPlatforms: ()=>ensureValidPlatforms,
    assertPlatforms: ()=>assertPlatforms
});
function _assert() {
    const data = /*#__PURE__*/ _interopRequireDefault(require("assert"));
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    _assert = function() {
        return data;
    };
    return data;
}
function _chalk() {
<<<<<<< HEAD
    const data = /*#__PURE__*/ _interop_require_default(require("chalk"));
=======
    const data = /*#__PURE__*/ _interopRequireDefault(require("chalk"));
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    _chalk = function() {
        return data;
    };
    return data;
}
function _fs() {
<<<<<<< HEAD
    const data = /*#__PURE__*/ _interop_require_default(require("fs"));
=======
    const data = /*#__PURE__*/ _interopRequireDefault(require("fs"));
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    _fs = function() {
        return data;
    };
    return data;
}
function _path() {
<<<<<<< HEAD
    const data = /*#__PURE__*/ _interop_require_default(require("path"));
=======
    const data = /*#__PURE__*/ _interopRequireDefault(require("path"));
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    _path = function() {
        return data;
    };
    return data;
}
<<<<<<< HEAD
const _log = /*#__PURE__*/ _interop_require_wildcard(require("../log"));
const _errors = require("../utils/errors");
const _url = require("../utils/url");
function _interop_require_default(obj) {
=======
const _log = /*#__PURE__*/ _interopRequireWildcard(require("../log"));
const _errors = require("../utils/errors");
const _url = require("../utils/url");
function _interopRequireDefault(obj) {
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
<<<<<<< HEAD
function _interop_require_wildcard(obj, nodeInterop) {
=======
function _interopRequireWildcard(obj, nodeInterop) {
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
<<<<<<< HEAD
    var newObj = {
        __proto__: null
    };
=======
    var newObj = {};
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
<<<<<<< HEAD
const debug = require('debug')('expo:prebuild:resolveOptions');
function resolvePackageManagerOptions(args) {
    const managers = {
        npm: args['--npm'],
        yarn: args['--yarn'],
        pnpm: args['--pnpm'],
        bun: args['--bun']
=======
function resolvePackageManagerOptions(args) {
    const managers = {
        npm: args["--npm"],
        yarn: args["--yarn"],
        pnpm: args["--pnpm"],
        bun: args["--bun"]
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    };
    if ([
        managers.npm,
        managers.pnpm,
        managers.yarn,
        managers.bun,
<<<<<<< HEAD
        !!args['--no-install']
    ].filter(Boolean).length > 1) {
        throw new _errors.CommandError('BAD_ARGS', 'Specify at most one of: --no-install, --npm, --pnpm, --yarn, --bun');
=======
        !!args["--no-install"]
    ].filter(Boolean).length > 1) {
        throw new _errors.CommandError("BAD_ARGS", "Specify at most one of: --no-install, --npm, --pnpm, --yarn, --bun");
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    }
    return managers;
}
function resolveTemplateOption(template) {
<<<<<<< HEAD
    (0, _assert().default)(template, 'template is required');
    if (// Expands github shorthand (owner/repo) to full URLs
    template.includes('/') && !(template.startsWith('@') || // Scoped package
    template.startsWith('.') || // Relative path
    template.startsWith(_path().default.sep) || // Absolute path
    // Contains a protocol
    /^[a-z][-a-z0-9\\.\\+]*:/.test(template))) {
        template = `https://github.com/${template}`;
    }
    if (template.startsWith('https://') || template.startsWith('http://')) {
        if (!(0, _url.validateUrl)(template)) {
            throw new _errors.CommandError('BAD_ARGS', 'Invalid URL provided as a template');
        }
        debug('Resolved template to repository path:', template);
        return {
            type: 'repository',
            uri: template
        };
    }
    if (// Supports `file:./path/to/template.tgz`
    template.startsWith('file:') || // Supports `../path/to/template.tgz`
    template.startsWith('.') || // Supports `\\path\\to\\template.tgz`
    template.startsWith(_path().default.sep)) {
        let resolvedUri = template;
        if (resolvedUri.startsWith('file:')) {
            resolvedUri = resolvedUri.substring(5);
        }
        const templatePath = _path().default.resolve(resolvedUri);
        (0, _assert().default)(_fs().default.existsSync(templatePath), 'template file does not exist: ' + templatePath);
        (0, _assert().default)(_fs().default.statSync(templatePath).isFile(), 'template must be a tar file created by running `npm pack` in a project: ' + templatePath);
        debug(`Resolved template to file path:`, templatePath);
        return {
            type: 'file',
            uri: templatePath
        };
    }
    if (_fs().default.existsSync(template)) {
        // Backward compatible with the old local template argument, e.g. `--template dir/template.tgz`
        const templatePath = _path().default.resolve(template);
        debug(`Resolved template to file path:`, templatePath);
        return {
            type: 'file',
            uri: templatePath
        };
    }
    debug(`Resolved template to NPM package:`, template);
    return {
        type: 'npm',
        uri: template
    };
}
function resolveSkipDependencyUpdate(value) {
    if (!value || typeof value !== 'string') {
        return [];
    }
    return value.split(',');
}
function resolvePlatformOption(platform = 'all', { loose } = {}) {
    switch(platform){
        case 'ios':
            return [
                'ios'
            ];
        case 'android':
            return [
                'android'
            ];
        case 'all':
            return loose || process.platform !== 'win32' ? [
                'android',
                'ios'
            ] : [
                'android'
=======
    if ((0, _url.validateUrl)(template)) {
        return template;
    }
    const templatePath = _path().default.resolve(template);
    (0, _assert().default)(_fs().default.existsSync(templatePath), "template file does not exist: " + templatePath);
    (0, _assert().default)(_fs().default.statSync(templatePath).isFile(), "template must be a tar file created by running `npm pack` in a project: " + templatePath);
    return templatePath;
}
function resolveSkipDependencyUpdate(value) {
    if (!value || typeof value !== "string") {
        return [];
    }
    return value.split(",");
}
function resolvePlatformOption(platform = "all", { loose  } = {}) {
    switch(platform){
        case "ios":
            return [
                "ios"
            ];
        case "android":
            return [
                "android"
            ];
        case "all":
            return loose || process.platform !== "win32" ? [
                "android",
                "ios"
            ] : [
                "android"
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
            ];
        default:
            return [
                platform
            ];
    }
}
function ensureValidPlatforms(platforms) {
    // Skip prebuild for iOS on Windows
<<<<<<< HEAD
    if (process.platform === 'win32' && platforms.includes('ios')) {
        _log.warn((0, _chalk().default)`⚠️  Skipping generating the iOS native project files. Run {bold npx expo prebuild} again from macOS or Linux to generate the iOS project.\n`);
        return platforms.filter((platform)=>platform !== 'ios');
=======
    if (process.platform === "win32" && platforms.includes("ios")) {
        _log.warn((0, _chalk().default)`⚠️  Skipping generating the iOS native project files. Run {bold npx expo prebuild} again from macOS or Linux to generate the iOS project.\n`);
        return platforms.filter((platform)=>platform !== "ios");
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    }
    return platforms;
}
function assertPlatforms(platforms) {
    if (!(platforms == null ? void 0 : platforms.length)) {
<<<<<<< HEAD
        throw new _errors.CommandError('At least one platform must be enabled when syncing');
=======
        throw new _errors.CommandError("At least one platform must be enabled when syncing");
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
    }
}

//# sourceMappingURL=resolveOptions.js.map