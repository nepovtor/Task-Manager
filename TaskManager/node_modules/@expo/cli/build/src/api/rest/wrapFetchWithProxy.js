"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "wrapFetchWithProxy", {
    enumerable: true,
<<<<<<< HEAD
    get: function() {
        return wrapFetchWithProxy;
    }
});
function _undici() {
    const data = require("undici");
    _undici = function() {
=======
    get: ()=>wrapFetchWithProxy
});
function _httpsProxyAgent() {
    const data = /*#__PURE__*/ _interopRequireDefault(require("https-proxy-agent"));
    _httpsProxyAgent = function() {
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
        return data;
    };
    return data;
}
const _env = require("../../utils/env");
<<<<<<< HEAD
const debug = require('debug')('expo:api:fetch:proxy');
function wrapFetchWithProxy(fetchFunction) {
    // NOTE(EvanBacon): DO NOT RETURN AN ASYNC WRAPPER. THIS BREAKS LOADING INDICATORS.
    return function fetchWithProxy(url, options = {}) {
        if (!options.dispatcher && _env.env.HTTP_PROXY) {
            debug('Using proxy:', _env.env.HTTP_PROXY);
            options.dispatcher = new (_undici()).EnvHttpProxyAgent();
=======
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const debug = require("debug")("expo:api:fetch:proxy");
function wrapFetchWithProxy(fetchFunction) {
    // NOTE(EvanBacon): DO NOT RETURN AN ASYNC WRAPPER. THIS BREAKS LOADING INDICATORS.
    return function fetchWithProxy(url, options = {}) {
        const proxy = _env.env.HTTP_PROXY;
        if (!options.agent && proxy) {
            debug("Using proxy:", proxy);
            options.agent = (0, _httpsProxyAgent().default)(proxy);
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
        }
        return fetchFunction(url, options);
    };
}

//# sourceMappingURL=wrapFetchWithProxy.js.map