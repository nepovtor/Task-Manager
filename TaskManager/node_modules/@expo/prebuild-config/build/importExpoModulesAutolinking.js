"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.importExpoModulesAutolinking = importExpoModulesAutolinking;
<<<<<<< HEAD
function _resolveFrom() {
  const data = _interopRequireDefault(require("resolve-from"));
  _resolveFrom = function () {
    return data;
  };
  return data;
}
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
=======
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
/**
 * Imports the `expo-modules-autolinking` package installed in the project at the given path.
 */
function importExpoModulesAutolinking(projectRoot) {
  const autolinking = tryRequireExpoModulesAutolinking(projectRoot);
  assertAutolinkingCompatibility(autolinking);
  return autolinking;
}
function tryRequireExpoModulesAutolinking(projectRoot) {
<<<<<<< HEAD
  const expoPackageRoot = _resolveFrom().default.silent(projectRoot, 'expo/package.json');
  const autolinkingExportsPath = _resolveFrom().default.silent(expoPackageRoot ?? projectRoot, 'expo-modules-autolinking/exports');
  if (!autolinkingExportsPath) {
    throw new Error("Cannot find 'expo-modules-autolinking' package in your project, make sure that you have 'expo' package installed");
  }
  return require(autolinkingExportsPath);
=======
  let resolvedAutolinkingPath;
  const resolveOptions = {
    paths: [projectRoot]
  };
  try {
    resolvedAutolinkingPath = require.resolve('expo-modules-autolinking/exports', resolveOptions);
  } catch {}
  // Fallback to the older version of expo-modules-autolinking
  try {
    resolvedAutolinkingPath = require.resolve('expo-modules-autolinking/build/autolinking', resolveOptions);
  } catch {}
  if (!resolvedAutolinkingPath) {
    throw new Error("Cannot find 'expo-modules-autolinking' package in your project, make sure that you have 'expo' package installed");
  }
  return require(resolvedAutolinkingPath);
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
}
function assertAutolinkingCompatibility(autolinking) {
  if ('resolveSearchPathsAsync' in autolinking && 'findModulesAsync' in autolinking) {
    return;
  }
  throw new Error("The 'expo-modules-autolinking' package has been found, but it seems to be incompatible with '@expo/prebuild-config'");
}
//# sourceMappingURL=importExpoModulesAutolinking.js.map