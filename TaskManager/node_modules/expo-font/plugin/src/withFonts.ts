<<<<<<< HEAD
import { type ConfigPlugin, createRunOncePlugin } from 'expo/config-plugins';
=======
import { ConfigPlugin, createRunOncePlugin } from 'expo/config-plugins';
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251

import { withFontsAndroid } from './withFontsAndroid';
import { withFontsIos } from './withFontsIos';

const pkg = require('expo-font/package.json');

<<<<<<< HEAD
export type FontObject = {
  fontFamily: string;
  fontDefinitions: {
    path: string;
    weight: number;
    style?: 'normal' | 'italic' | undefined;
  }[];
};

export type Font = string | FontObject;

export type FontProps = {
  fonts?: string[];
  android?: {
    fonts?: Font[];
=======
export type FontProps = {
  fonts?: string[];
  android?: {
    fonts?: string[];
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
  };
  ios?: {
    fonts?: string[];
  };
};

const withFonts: ConfigPlugin<FontProps> = (config, props) => {
  if (!props) {
    return config;
  }

  const iosFonts = [...(props.fonts ?? []), ...(props.ios?.fonts ?? [])];

  if (iosFonts.length > 0) {
    config = withFontsIos(config, iosFonts);
  }

  const androidFonts = [...(props.fonts ?? []), ...(props.android?.fonts ?? [])];

  if (androidFonts.length > 0) {
    config = withFontsAndroid(config, androidFonts);
  }

  return config;
};

export default createRunOncePlugin(withFonts, pkg.name, pkg.version);
