<<<<<<< HEAD
var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};function t(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}function r(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))}function i(e,t){var r,i,n,s,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(a=0)),a;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}function n(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return a}function a(e,t,r){if(r||2===arguments.length)for(var i,n=0,s=t.length;n<s;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function o(e){return this instanceof o?(this.v=e,this):new o(e)}function c(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){n[e]&&(i[e]=function(t){return new Promise((function(r,i){s.push([e,t,r,i])>1||c(e,t)}))})}function c(e,t){try{(r=n[e](t)).value instanceof o?Promise.resolve(r.value.v).then(l,d):u(s[0][2],r)}catch(e){u(s[0][3],e)}var r}function l(e){c("next",e)}function d(e){c("throw",e)}function u(e,t){e(t),s.shift(),s.length&&c(s[0][0],s[0][1])}}function l(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=n(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise((function(i,n){(function(e,t,r,i){Promise.resolve(i).then((function(t){e({value:t,done:r})}),t)})(i,n,(t=e[r](t)).done,t.value)}))}}}function d(e){return"function"==typeof e}function u(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var h=u((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function p(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var f=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,r,i,o;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var l=n(c),u=l.next();!u.done;u=l.next()){u.value.remove(this)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else c.remove(this);var p=this.initialTeardown;if(d(p))try{p()}catch(e){o=e instanceof h?e.errors:[e]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var m=n(f),y=m.next();!y.done;y=m.next()){var w=y.value;try{g(w)}catch(e){o=null!=o?o:[],e instanceof h?o=a(a([],s(o)),s(e.errors)):o.push(e)}}}catch(e){r={error:e}}finally{try{y&&!y.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}}if(o)throw new h(o)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)g(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&p(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&p(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),m=f.EMPTY;function y(e){return e instanceof f||e&&"closed"in e&&d(e.remove)&&d(e.add)&&d(e.unsubscribe)}function g(e){d(e)?e():e.unsubscribe()}var w={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},v={setTimeout:function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=v.delegate;return(null==n?void 0:n.setTimeout)?n.setTimeout.apply(n,a([e,t],s(r))):setTimeout.apply(void 0,a([e,t],s(r)))},clearTimeout:function(e){var t=v.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function b(e){v.setTimeout((function(){var t=w.onUnhandledError;if(!t)throw e;t(e)}))}function k(){}var S=C("C",void 0,void 0);function C(e,t,r){return{kind:e,value:t,error:r}}var T=null;function E(e){if(w.useDeprecatedSynchronousErrorHandling){var t=!T;if(t&&(T={errorThrown:!1,error:null}),e(),t){var r=T,i=r.errorThrown,n=r.error;if(T=null,i)throw n}}else e()}var I=function(e){function r(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,y(t)&&t.add(r)):r.destination=M,r}return t(r,e),r.create=function(e,t,r){return new D(e,t,r)},r.prototype.next=function(e){this.isStopped?R(function(e){return C("N",e,void 0)}(e),this):this._next(e)},r.prototype.error=function(e){this.isStopped?R(C("E",void 0,e),this):(this.isStopped=!0,this._error(e))},r.prototype.complete=function(){this.isStopped?R(S,this):(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(e){this.destination.next(e)},r.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(f),x=Function.prototype.bind;function F(e,t){return x.call(e,t)}var _=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){P(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){P(e)}else P(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){P(e)}},e}(),D=function(e){function r(t,r,i){var n,s,a=e.call(this)||this;d(t)||!t?n={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=i?i:void 0}:a&&w.useDeprecatedNextContext?((s=Object.create(t)).unsubscribe=function(){return a.unsubscribe()},n={next:t.next&&F(t.next,s),error:t.error&&F(t.error,s),complete:t.complete&&F(t.complete,s)}):n=t;return a.destination=new _(n),a}return t(r,e),r}(I);function P(e){var t;w.useDeprecatedSynchronousErrorHandling?(t=e,w.useDeprecatedSynchronousErrorHandling&&T&&(T.errorThrown=!0,T.error=t)):b(e)}function R(e,t){var r=w.onStoppedNotification;r&&v.setTimeout((function(){return r(e,t)}))}var M={closed:!0,next:k,error:function(e){throw e},complete:k},A="function"==typeof Symbol&&Symbol.observable||"@@observable";function O(e){return e}function q(e){return 0===e.length?O:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var N=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var i,n=this,s=(i=e)&&i instanceof I||function(e){return e&&d(e.next)&&d(e.error)&&d(e.complete)}(i)&&y(i)?e:new D(e,t,r);return E((function(){var e=n,t=e.operator,r=e.source;s.add(t?t.call(s,r):r?n._subscribe(s):n._trySubscribe(s))})),s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=B(t))((function(t,i){var n=new D({next:function(t){try{e(t)}catch(e){i(e),n.unsubscribe()}},error:i,complete:t});r.subscribe(n)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[A]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return q(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=B(e))((function(e,r){var i;t.subscribe((function(e){return i=e}),(function(e){return r(e)}),(function(){return e(i)}))}))},e.create=function(t){return new e(t)},e}();function B(e){var t;return null!==(t=null!=e?e:w.Promise)&&void 0!==t?t:Promise}function L(e){return function(t){if(function(e){return d(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function j(e,t,r,i,n){return new H(e,t,r,i,n)}var H=function(e){function r(t,r,i,n,s,a){var o=e.call(this,t)||this;return o.onFinalize=s,o.shouldUnsubscribe=a,o._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,o._error=n?function(e){try{n(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,o._complete=i?function(){try{i()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,o}return t(r,e),r.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},r}(I),$=u((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),K=function(e){function r(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return t(r,e),r.prototype.lift=function(e){var t=new V(this,this);return t.operator=e,t},r.prototype._throwIfClosed=function(){if(this.closed)throw new $},r.prototype.next=function(e){var t=this;E((function(){var r,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var s=n(t.currentObservers),a=s.next();!a.done;a=s.next()){a.value.next(e)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}}))},r.prototype.error=function(e){var t=this;E((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}}))},r.prototype.complete=function(){var e=this;E((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},r.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(r.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),r.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},r.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},r.prototype._innerSubscribe=function(e){var t=this,r=this,i=r.hasError,n=r.isStopped,s=r.observers;return i||n?m:(this.currentObservers=null,s.push(e),new f((function(){t.currentObservers=null,p(s,e)})))},r.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,i=t.thrownError,n=t.isStopped;r?e.error(i):n&&e.complete()},r.prototype.asObservable=function(){var e=new N;return e.source=this,e},r.create=function(e,t){return new V(e,t)},r}(N),V=function(e){function r(t,r){var i=e.call(this)||this;return i.destination=t,i.source=r,i}return t(r,e),r.prototype.next=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)},r.prototype.error=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)},r.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},r.prototype._subscribe=function(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:m},r}(K),W={now:function(){return(W.delegate||Date).now()},delegate:void 0},z=function(e){function r(t,r,i){void 0===t&&(t=1/0),void 0===r&&(r=1/0),void 0===i&&(i=W);var n=e.call(this)||this;return n._bufferSize=t,n._windowTime=r,n._timestampProvider=i,n._buffer=[],n._infiniteTimeWindow=!0,n._infiniteTimeWindow=r===1/0,n._bufferSize=Math.max(1,t),n._windowTime=Math.max(1,r),n}return t(r,e),r.prototype.next=function(t){var r=this,i=r.isStopped,n=r._buffer,s=r._infiniteTimeWindow,a=r._timestampProvider,o=r._windowTime;i||(n.push(t),!s&&n.push(a.now()+o)),this._trimBuffer(),e.prototype.next.call(this,t)},r.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),r=this._infiniteTimeWindow,i=this._buffer.slice(),n=0;n<i.length&&!e.closed;n+=r?1:2)e.next(i[n]);return this._checkFinalizedStatuses(e),t},r.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,r=e._timestampProvider,i=e._buffer,n=e._infiniteTimeWindow,s=(n?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!n){for(var a=r.now(),o=0,c=1;c<i.length&&i[c]<=a;c+=2)o=c;o&&i.splice(0,o+1)}},r}(K),U=function(e){function r(t,r){return e.call(this)||this}return t(r,e),r.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},r}(f),G={setInterval:function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=G.delegate;return(null==n?void 0:n.setInterval)?n.setInterval.apply(n,a([e,t],s(r))):setInterval.apply(void 0,a([e,t],s(r)))},clearInterval:function(e){var t=G.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},Q=function(e){function r(t,r){var i=e.call(this,t,r)||this;return i.scheduler=t,i.work=r,i.pending=!1,i}return t(r,e),r.prototype.schedule=function(e,t){var r;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var i=this.id,n=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(n,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(n,this.id,t),this},r.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),G.setInterval(e.flush.bind(e,this),r)},r.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&G.clearInterval(t)},r.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(e,t){var r,i=!1;try{this.work(e)}catch(e){i=!0,r=e||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r},r.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,r=this.scheduler,i=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,p(i,this),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},r}(U),J=function(){function e(t,r){void 0===r&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},e.now=W.now,e}(),X=new(function(e){function r(t,r){void 0===r&&(r=J.now);var i=e.call(this,t,r)||this;return i.actions=[],i._active=!1,i}return t(r,e),r.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},r}(J))(Q),Y=X,Z=new N((function(e){return e.complete()}));function ee(e){return e&&d(e.schedule)}function te(e){return e[e.length-1]}function re(e){return ee(te(e))?e.pop():void 0}var ie=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function ne(e){return d(null==e?void 0:e.then)}function se(e){return d(e[A])}function ae(e){return Symbol.asyncIterator&&d(null==e?void 0:e[Symbol.asyncIterator])}function oe(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var ce="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function le(e){return d(null==e?void 0:e[ce])}function de(e){return c(this,arguments,(function(){var t,r,n;return i(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,o(t.read())];case 3:return r=i.sent(),n=r.value,r.done?[4,o(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,o(n)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function ue(e){return d(null==e?void 0:e.getReader)}function he(e){if(e instanceof N)return e;if(null!=e){if(se(e))return s=e,new N((function(e){var t=s[A]();if(d(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(ie(e))return i=e,new N((function(e){for(var t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()}));if(ne(e))return r=e,new N((function(e){r.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,b)}));if(ae(e))return pe(e);if(le(e))return t=e,new N((function(e){var r,i;try{for(var s=n(t),a=s.next();!a.done;a=s.next()){var o=a.value;if(e.next(o),e.closed)return}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}e.complete()}));if(ue(e))return pe(de(e))}var t,r,i,s;throw oe(e)}function pe(e){return new N((function(t){(function(e,t){var n,s,a,o;return r(this,void 0,void 0,(function(){var r,c;return i(this,(function(i){switch(i.label){case 0:i.trys.push([0,5,6,11]),n=l(e),i.label=1;case 1:return[4,n.next()];case 2:if((s=i.sent()).done)return[3,4];if(r=s.value,t.next(r),t.closed)return[2];i.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=i.sent(),a={error:c},[3,11];case 6:return i.trys.push([6,,9,10]),s&&!s.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:i.sent(),i.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function fe(e,t,r,i,n){void 0===i&&(i=0),void 0===n&&(n=!1);var s=t.schedule((function(){r(),n?e.add(this.schedule(null,i)):this.unsubscribe()}),i);if(e.add(s),!n)return s}function me(e,t){return void 0===t&&(t=0),L((function(r,i){r.subscribe(j(i,(function(r){return fe(i,e,(function(){return i.next(r)}),t)}),(function(){return fe(i,e,(function(){return i.complete()}),t)}),(function(r){return fe(i,e,(function(){return i.error(r)}),t)})))}))}function ye(e,t){return void 0===t&&(t=0),L((function(r,i){i.add(e.schedule((function(){return r.subscribe(i)}),t))}))}function ge(e,t){if(!e)throw new Error("Iterable cannot be null");return new N((function(r){fe(r,t,(function(){var i=e[Symbol.asyncIterator]();fe(r,t,(function(){i.next().then((function(e){e.done?r.complete():r.next(e.value)}))}),0,!0)}))}))}function we(e,t){if(null!=e){if(se(e))return function(e,t){return he(e).pipe(ye(t),me(t))}(e,t);if(ie(e))return function(e,t){return new N((function(r){var i=0;return t.schedule((function(){i===e.length?r.complete():(r.next(e[i++]),r.closed||this.schedule())}))}))}(e,t);if(ne(e))return function(e,t){return he(e).pipe(ye(t),me(t))}(e,t);if(ae(e))return ge(e,t);if(le(e))return function(e,t){return new N((function(r){var i;return fe(r,t,(function(){i=e[ce](),fe(r,t,(function(){var e,t,n;try{t=(e=i.next()).value,n=e.done}catch(e){return void r.error(e)}n?r.complete():r.next(t)}),0,!0)})),function(){return d(null==i?void 0:i.return)&&i.return()}}))}(e,t);if(ue(e))return function(e,t){return ge(de(e),t)}(e,t)}throw oe(e)}function ve(e,t){return t?we(e,t):he(e)}function be(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ve(e,re(e))}var ke=u((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function Se(e,t){var r="object"==typeof t;return new Promise((function(i,n){var s=new D({next:function(e){i(e),s.unsubscribe()},error:n,complete:function(){r?i(t.defaultValue):n(new ke)}});e.subscribe(s)}))}function Ce(e,t){return L((function(r,i){var n=0;r.subscribe(j(i,(function(r){i.next(e.call(t,r,n++))})))}))}var Te=Array.isArray;function Ee(e){return Ce((function(t){return function(e,t){return Te(t)?e.apply(void 0,a([],s(t))):e(t)}(e,t)}))}Array.isArray,Object.getPrototypeOf,Object.prototype,Object.keys;function Ie(e,t,r,i,n,s,a,o){var c=[],l=0,d=0,u=!1,h=function(){!u||c.length||l||t.complete()},p=function(e){return l<i?f(e):c.push(e)},f=function(e){s&&t.next(e),l++;var o=!1;he(r(e,d++)).subscribe(j(t,(function(e){null==n||n(e),s?p(e):t.next(e)}),(function(){o=!0}),void 0,(function(){if(o)try{l--;for(var e=function(){var e=c.shift();a?fe(t,a,(function(){return f(e)})):f(e)};c.length&&l<i;)e();h()}catch(e){t.error(e)}})))};return e.subscribe(j(t,p,(function(){u=!0,h()}))),function(){null==o||o()}}function xe(e,t,r){return void 0===r&&(r=1/0),d(t)?xe((function(r,i){return Ce((function(e,n){return t(r,e,i,n)}))(he(e(r,i)))}),r):("number"==typeof t&&(r=t),L((function(t,i){return Ie(t,i,e,r)})))}function Fe(e){return void 0===e&&(e=1/0),xe(O,e)}function _e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Fe(1)(ve(e,re(e)))}function De(e){return new N((function(t){he(e()).subscribe(t)}))}var Pe=["addListener","removeListener"],Re=["addEventListener","removeEventListener"],Me=["on","off"];function Ae(e,t,r,i){if(d(r)&&(i=r,r=void 0),i)return Ae(e,t,r).pipe(Ee(i));var n=s(function(e){return d(e.addEventListener)&&d(e.removeEventListener)}(e)?Re.map((function(i){return function(n){return e[i](t,n,r)}})):function(e){return d(e.addListener)&&d(e.removeListener)}(e)?Pe.map(Oe(e,t)):function(e){return d(e.on)&&d(e.off)}(e)?Me.map(Oe(e,t)):[],2),a=n[0],o=n[1];if(!a&&ie(e))return xe((function(e){return Ae(e,t,r)}))(he(e));if(!a)throw new TypeError("Invalid event target");return new N((function(e){var t=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.next(1<t.length?t:t[0])};return a(t),function(){return o(t)}}))}function Oe(e,t){return function(r){return function(i){return e[r](t,i)}}}function qe(e,t,r){void 0===e&&(e=0),void 0===r&&(r=Y);var i=-1;return null!=t&&(ee(t)?r=t:i=t),new N((function(t){var n,s=(n=e)instanceof Date&&!isNaN(n)?+e-r.now():e;s<0&&(s=0);var a=0;return r.schedule((function(){t.closed||(t.next(a++),0<=i?this.schedule(void 0,i):t.complete())}),s)}))}function Ne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=re(e),i=function(e,t){return"number"==typeof te(e)?e.pop():t}(e,1/0),n=e;return n.length?1===n.length?he(n[0]):Fe(i)(ve(n,r)):Z}var Be=new N(k),Le=Array.isArray;function je(e){return 1===e.length&&Le(e[0])?e[0]:e}function He(e,t){return L((function(r,i){var n=0;r.subscribe(j(i,(function(r){return e.call(t,r,n++)&&i.next(r)})))}))}function $e(e){return function(t){for(var r=[],i=function(i){r.push(he(e[i]).subscribe(j(t,(function(e){if(r){for(var n=0;n<r.length;n++)n!==i&&r[n].unsubscribe();r=null}t.next(e)}))))},n=0;r&&!t.closed&&n<e.length;n++)i(n)}}function Ke(e){return L((function(t,r){var i,n=null,s=!1;n=t.subscribe(j(r,void 0,void 0,(function(a){i=he(e(a,Ke(e)(t))),n?(n.unsubscribe(),n=null,i.subscribe(r)):s=!0}))),s&&(n.unsubscribe(),n=null,i.subscribe(r))}))}function Ve(e){return L((function(t,r){var i=!1;t.subscribe(j(r,(function(e){i=!0,r.next(e)}),(function(){i||r.next(e),r.complete()})))}))}function We(e){return e<=0?function(){return Z}:L((function(t,r){var i=0;t.subscribe(j(r,(function(t){++i<=e&&(r.next(t),e<=i&&r.complete())})))}))}function ze(){return L((function(e,t){e.subscribe(j(t,k))}))}function Ue(e){return void 0===e&&(e=Ge),L((function(t,r){var i=!1;t.subscribe(j(r,(function(e){i=!0,r.next(e)}),(function(){return i?r.complete():r.error(e())})))}))}function Ge(){return new ke}function Qe(e,t){var r=arguments.length>=2;return function(i){return i.pipe(e?He((function(t,r){return e(t,r,i)})):O,We(1),r?Ve(t):Ue((function(){return new ke})))}}function Je(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?L((function(t,r){$e(a([t],s(e)))(r)})):O}function Xe(e){var t;void 0===e&&(e=1/0);var r=(t=e&&"object"==typeof e?e:{count:e}).count,i=void 0===r?1/0:r,n=t.delay,s=t.resetOnSuccess,a=void 0!==s&&s;return i<=0?O:L((function(e,t){var r,s=0,o=function(){var c=!1;r=e.subscribe(j(t,(function(e){a&&(s=0),t.next(e)}),void 0,(function(e){if(s++<i){var a=function(){r?(r.unsubscribe(),r=null,o()):c=!0};if(null!=n){var l="number"==typeof n?qe(n):he(n(e,s)),d=j(t,(function(){d.unsubscribe(),a()}),(function(){t.complete()}));l.subscribe(d)}else a()}else t.error(e)}))),c&&(r.unsubscribe(),r=null,o())};o()}))}function Ye(e,t,r){var i=d(e)||t||r?{next:e,error:t,complete:r}:e;return i?L((function(e,t){var r;null===(r=i.subscribe)||void 0===r||r.call(i);var n=!0;e.subscribe(j(t,(function(e){var r;null===(r=i.next)||void 0===r||r.call(i,e),t.next(e)}),(function(){var e;n=!1,null===(e=i.complete)||void 0===e||e.call(i),t.complete()}),(function(e){var r;n=!1,null===(r=i.error)||void 0===r||r.call(i,e),t.error(e)}),(function(){var e,t;n&&(null===(e=i.unsubscribe)||void 0===e||e.call(i)),null===(t=i.finalize)||void 0===t||t.call(i)})))})):O}
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */
Symbol.dispose??=Symbol("dispose"),Symbol.asyncDispose??=Symbol("asyncDispose");const Ze=Symbol.dispose,et=Symbol.asyncDispose;class tt{#e=!1;#t=[];get disposed(){return this.#e}dispose(){if(!this.#e){this.#e=!0;for(const e of this.#t.reverse())e[Ze]()}}use(e){return e&&this.#t.push(e),e}adopt(e,t){return this.#t.push({[Ze](){t(e)}}),e}defer(e){this.#t.push({[Ze](){e()}})}move(){if(this.#e)throw new ReferenceError("a disposed stack can not use anything new");const e=new tt;return e.#t=this.#t,this.#e=!0,e}[Ze]=this.dispose;[Symbol.toStringTag]="DisposableStack"}class rt{#e=!1;#t=[];get disposed(){return this.#e}async dispose(){if(!this.#e){this.#e=!0;for(const e of this.#t.reverse())await e[et]()}}use(e){return e&&this.#t.push(e),e}adopt(e,t){return this.#t.push({[et]:()=>t(e)}),e}defer(e){this.#t.push({[et]:()=>e()})}move(){if(this.#e)throw new ReferenceError("a disposed stack can not use anything new");const e=new rt;return e.#t=this.#t,this.#e=!0,e}[et]=this.dispose;[Symbol.toStringTag]="AsyncDisposableStack"}
/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class it{#r;#i=new Map;constructor(e=function(e){return{all:e=e||new Map,on:function(t,r){var i=e.get(t);i?i.push(r):e.set(t,[r])},off:function(t,r){var i=e.get(t);i&&(r?i.splice(i.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var i=e.get(t);i&&i.slice().map((function(e){e(r)})),(i=e.get("*"))&&i.slice().map((function(e){e(t,r)}))}}}(new Map)){this.#r=e}on(e,t){const r=this.#i.get(e);return void 0===r?this.#i.set(e,[t]):r.push(t),this.#r.on(e,t),this}off(e,t){const r=this.#i.get(e)??[];if(void 0===t){for(const t of r)this.#r.off(e,t);return this.#i.delete(e),this}const i=r.lastIndexOf(t);return i>-1&&this.#r.off(e,...r.splice(i,1)),this}emit(e,t){return this.#r.emit(e,t),this.listenerCount(e)>0}once(e,t){const r=i=>{t(i),this.off(e,r)};return this.on(e,r)}listenerCount(e){return this.#i.get(e)?.length||0}removeAllListeners(e){return void 0!==e?this.off(e):(this[Ze](),this)}[Ze](){for(const[e,t]of this.#i)for(const r of t)this.#r.off(e,r);this.#i.clear()}}const nt=(e,t)=>{if(!e)throw new Error(t)},st=!("undefined"==typeof process||!process.version);
/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */
/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */
let at=null;const ot=e=>st?async(...t)=>{lt&&ct.push(e+t),(await async function(){return at||(at=(await import("debug")).default),at}())(e)(t)}:(...t)=>{const r=globalThis.__PUPPETEER_DEBUG;if(!r)return;("*"===r||(r.endsWith("*")?e.startsWith(r):e===r))&&console.log(`${e}:`,...t)};let ct=[],lt=!1;
/**
 * @license
 * Copyright 2018 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */
class dt extends Error{constructor(e,t){super(e,t),this.name=this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class ut extends dt{}class ht extends dt{#n;#s="";set code(e){this.#n=e}get code(){return this.#n}set originalMessage(e){this.#s=e}get originalMessage(){return this.#s}}class pt extends dt{}class ft extends ht{}
/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const mt={letter:{width:8.5,height:11},legal:{width:8.5,height:14},tabloid:{width:11,height:17},ledger:{width:17,height:11},a0:{width:33.1,height:46.8},a1:{width:23.4,height:33.1},a2:{width:16.54,height:23.4},a3:{width:11.7,height:16.54},a4:{width:8.27,height:11.7},a5:{width:5.83,height:8.27},a6:{width:4.13,height:5.83}},yt=ot("puppeteer:error"),gt=(Object.freeze({width:800,height:600}),Symbol("Source URL for Puppeteer evaluation scripts"));
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class wt{static INTERNAL_URL="pptr:internal";static fromCallSite(e,t){const r=new wt;return r.#a=e,r.#o=t.toString(),r}static parse=e=>{e=e.slice(5);const[t="",r=""]=e.split(";"),i=new wt;return i.#a=t,i.#o=decodeURIComponent(r),i};static isPuppeteerURL=e=>e.startsWith("pptr:");#a;#o;get functionName(){return this.#a}get siteString(){return this.#o}toString(){return`pptr:${[this.#a,encodeURIComponent(this.#o)].join(";")}`}}const vt=(e,t)=>{if(Object.prototype.hasOwnProperty.call(t,gt))return t;const r=Error.prepareStackTrace;Error.prepareStackTrace=(e,t)=>t[2];const i=(new Error).stack;return Error.prepareStackTrace=r,Object.assign(t,{[gt]:wt.fromCallSite(e,i)})},bt=e=>"string"==typeof e||e instanceof String,kt=e=>"number"==typeof e||e instanceof Number;function St(e,...t){if(bt(e))return nt(0===t.length,"Cannot evaluate a string with arguments"),e;return`(${e})(${t.map((function(e){return Object.is(e,void 0)?"undefined":JSON.stringify(e)})).join(",")})`}let Ct=null;async function Tt(){if(!Ct)try{Ct=await import("fs/promises")}catch(e){if(e instanceof TypeError)throw new Error("Cannot write to a path outside of a Node-like environment.");throw e}return Ct}async function Et(e,t){const r=[],i=e.getReader();if(t){const e=await Tt(),n=await e.open(t,"w+");try{for(;;){const{done:e,value:t}=await i.read();if(e)break;r.push(t),await n.writeFile(t)}}finally{await n.close()}}else for(;;){const{done:e,value:t}=await i.read();if(e)break;r.push(t)}try{return Buffer.concat(r)}catch(e){return yt(e),null}}async function It(e,t){return new ReadableStream({async pull(r){const{data:i,base64Encoded:n,eof:s}=await e.send("IO.read",{handle:t});r.enqueue(function(e,t){return t?Uint8Array.from(atob(e),(e=>e.codePointAt(0))):(new TextEncoder).encode(e)}(i,n??!1)),s&&(await e.send("IO.close",{handle:t}),r.close())}})}function xt(e,t){return 0===e?Be:qe(e).pipe(Ce((()=>{throw new ut(`Timed out after waiting ${e}ms`,{cause:t})})))}const Ft="__puppeteer_utility_world__22.13.1",_t=/^[\040\t]*\/\/[@#] sourceURL=\s*(\S*?)\s*$/m;const Dt=500;const Pt={px:1,in:96,cm:37.8,mm:3.78};function Rt(e,t="in"){if(void 0===e)return;let r;if(kt(e))r=e;else{if(!bt(e))throw new Error("page.pdf() Cannot handle parameter type: "+typeof e);{const t=e;let i=t.substring(t.length-2).toLowerCase(),n="";i in Pt?n=t.substring(0,t.length-2):(i="px",n=t);const s=Number(n);nt(!isNaN(s),"Failed to parse parameter value: "+t),r=s*Pt[i]}}return r/Pt[t]}function Mt(e,t){return new N((r=>{const i=e=>{r.next(e)};return e.on(t,i),()=>{e.off(t,i)}}))}function At(e,t){return e?Ae(e,"abort").pipe(Ce((()=>{if(e.reason instanceof Error)throw e.reason.cause=t,e.reason;throw new Error(e.reason,{cause:t})}))):Be}function Ot(e){return xe((t=>ve(Promise.resolve(e(t))).pipe(He((e=>e)),Ce((()=>t)))))}
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const qt=new Map([["geolocation","geolocation"],["midi","midi"],["notifications","notifications"],["camera","videoCapture"],["microphone","audioCapture"],["background-sync","backgroundSync"],["ambient-light-sensor","sensors"],["accelerometer","sensors"],["gyroscope","sensors"],["magnetometer","sensors"],["accessibility-events","accessibilityEvents"],["clipboard-read","clipboardReadWrite"],["clipboard-write","clipboardReadWrite"],["clipboard-sanitized-write","clipboardSanitizedWrite"],["payment-handler","paymentHandler"],["persistent-storage","durableStorage"],["idle-detection","idleDetection"],["midi-sysex","midiSysex"]]);class Nt extends it{constructor(){super()}async waitForTarget(e,t={}){const{timeout:r=3e4}=t;return await Se(Ne(Mt(this,"targetcreated"),Mt(this,"targetchanged"),ve(this.targets())).pipe(Ot(e),Je(xt(r))))}async pages(){const e=await Promise.all(this.browserContexts().map((e=>e.pages())));return e.reduce(((e,t)=>e.concat(t)),[])}isConnected(){return this.connected}[Ze](){this.process()?this.close().catch(yt):this.disconnect().catch(yt)}[et](){return this.process()?this.close():this.disconnect()}}var Bt;!function(e){e.Disconnected=Symbol("CDPSession.Disconnected"),e.Swapped=Symbol("CDPSession.Swapped"),e.Ready=Symbol("CDPSession.Ready"),e.SessionAttached="sessionattached",e.SessionDetached="sessiondetached"}(Bt||(Bt={}));class Lt extends it{constructor(){super()}parentSession(){}}
/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class jt{static create(e){return new jt(e)}static async race(e){const t=new Set;try{const r=e.map((e=>e instanceof jt?(e.#c&&t.add(e),e.valueOrThrow()):e));return await Promise.race(r)}finally{for(const e of t)e.reject(new Error("Timeout cleared"))}}#l=!1;#d=!1;#u;#h;#p=new Promise((e=>{this.#h=e}));#c;#f;constructor(e){e&&e.timeout>0&&(this.#f=new ut(e.message),this.#c=setTimeout((()=>{this.reject(this.#f)}),e.timeout))}#m(e){clearTimeout(this.#c),this.#u=e,this.#h()}resolve(e){this.#d||this.#l||(this.#l=!0,this.#m(e))}reject(e){this.#d||this.#l||(this.#d=!0,this.#m(e))}resolved(){return this.#l}finished(){return this.#l||this.#d}value(){return this.#u}#y;valueOrThrow(){return this.#y||(this.#y=(async()=>{if(await this.#p,this.#d)throw this.#u;return this.#u})()),this.#y}}
/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Ht{static Guard=class{#g;#w;constructor(e,t){this.#g=e,this.#w=t}[Ze](){return this.#w?.(),this.#g.release()}};#v=!1;#b=[];async acquire(e){if(!this.#v)return this.#v=!0,new Ht.Guard(this);const t=jt.create();return this.#b.push(t.resolve.bind(t)),await t.valueOrThrow(),new Ht.Guard(this,e)}release(){const e=this.#b.shift();e?e():this.#v=!1}}
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class $t extends it{constructor(){super()}#k;#S=0;startScreenshot(){const e=this.#k||new Ht;return this.#k=e,this.#S++,e.acquire((()=>{this.#S--,0===this.#S&&(this.#k=void 0)}))}waitForScreenshotOperations(){return this.#k?.acquire()}async waitForTarget(e,t={}){const{timeout:r=3e4}=t;return await Se(Ne(Mt(this,"targetcreated"),Mt(this,"targetchanged"),ve(this.targets())).pipe(Ot(e),Je(xt(r))))}get closed(){return!this.browser().browserContexts().includes(this)}get id(){}[Ze](){this.close().catch(yt)}[et](){return this.close()}}
/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Kt,Vt=self&&self.__addDisposableResource||function(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if("function"!=typeof i)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t},Wt=self&&self.__disposeResources||function(e){return function(t){function r(r){t.error=t.hasError?new e(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}return function e(){for(;t.stack.length;){var i=t.stack.pop();try{var n=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(n).then(e,(function(t){return r(t),e()}))}catch(e){r(e)}}if(t.hasError)throw t.error}()}}("function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i});class zt extends $t{#C;#T;#E;constructor(e,t,r){super(),this.#C=e,this.#T=t,this.#E=r}get id(){return this.#E}targets(){return this.#T.targets().filter((e=>e.browserContext()===this))}async pages(){return(await Promise.all(this.targets().filter((e=>"page"===e.type()||"other"===e.type()&&this.#T._getIsPageTargetCallback()?.(e))).map((e=>e.page())))).filter((e=>!!e))}isIncognito(){return!!this.#E}async overridePermissions(e,t){const r=t.map((e=>{const t=qt.get(e);if(!t)throw new Error("Unknown permission: "+e);return t}));await this.#C.send("Browser.grantPermissions",{origin:e,browserContextId:this.#E||void 0,permissions:r})}async clearPermissionOverrides(){await this.#C.send("Browser.resetPermissions",{browserContextId:this.#E||void 0})}async newPage(){const e={stack:[],error:void 0,hasError:!1};try{Vt(e,await this.waitForScreenshotOperations(),!1);return await this.#T._createPageInContext(this.#E)}catch(t){e.error=t,e.hasError=!0}finally{Wt(e)}}browser(){return this.#T}async close(){nt(this.#E,"Non-incognito profiles cannot be closed!"),await this.#T._disposeContext(this.#E)}}
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */!function(e){e.PAGE="page",e.BACKGROUND_PAGE="background_page",e.SERVICE_WORKER="service_worker",e.SHARED_WORKER="shared_worker",e.BROWSER="browser",e.WEBVIEW="webview",e.OTHER="other",e.TAB="tab"}(Kt||(Kt={}));class Ut{constructor(){}async worker(){return null}async page(){return null}}
/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function Gt(e){return"object"==typeof e&&null!==e&&"name"in e&&"message"in e}function Qt(e,t,r){return e.message=t,e.originalMessage=r??e.originalMessage,e}function Jt(e){let t=e.error.message;return e.error&&"object"==typeof e.error&&"data"in e.error&&(t+=` ${e.error.data}`),t}
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Xt{#I=new Map;#x=function(){let e=0;return()=>++e}
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */();create(e,t,r){const i=new Yt(this.#x(),e,t);this.#I.set(i.id,i);try{r(i.id)}catch(e){throw i.promise.catch(yt).finally((()=>{this.#I.delete(i.id)})),i.reject(e),e}return i.promise.finally((()=>{this.#I.delete(i.id)}))}reject(e,t,r){const i=this.#I.get(e);i&&this._reject(i,t,r)}_reject(e,t,r){let i,n;t instanceof ht?(i=t,i.cause=e.error,n=t.message):(i=e.error,n=t),e.reject(Qt(i,`Protocol error (${e.label}): ${n}`,r))}resolve(e,t){const r=this.#I.get(e);r&&r.resolve(t)}clear(){for(const e of this.#I.values())this._reject(e,new ft("Target closed"));this.#I.clear()}getPendingProtocolErrors(){const e=[];for(const t of this.#I.values())e.push(new Error(`${t.label} timed out. Trace: ${t.error.stack}`));return e}}class Yt{#E;#F=new ht;#_=jt.create();#D;#P;constructor(e,t,r){this.#E=e,this.#P=t,r&&(this.#D=setTimeout((()=>{this.#_.reject(Qt(this.#F,`${t} timed out. Increase the 'protocolTimeout' setting in launch/connect calls for a higher timeout if needed.`))}),r))}resolve(e){clearTimeout(this.#D),this.#_.resolve(e)}reject(e){clearTimeout(this.#D),this.#_.reject(e)}get id(){return this.#E}get promise(){return this.#_.valueOrThrow()}get error(){return this.#F}get label(){return this.#P}}class Zt extends Lt{#R;#M;#I=new Xt;#C;#A;#O;constructor(e,t,r,i){super(),this.#C=e,this.#M=t,this.#R=r,this.#A=i}_setTarget(e){this.#O=e}_target(){return nt(this.#O,"Target must exist"),this.#O}connection(){return this.#C}parentSession(){if(!this.#A)return this;const e=this.#C?.session(this.#A);return e??void 0}send(e,t,r){return this.#C?this.#C._rawSend(this.#I,e,t,this.#R,r):Promise.reject(new ft(`Protocol error (${e}): Session closed. Most likely the ${this.#M} has been closed.`))}_onMessage(e){e.id?e.error?this.#I.reject(e.id,Jt(e),e.error.message):this.#I.resolve(e.id,e.result):(nt(!e.id),this.emit(e.method,e.params))}async detach(){if(!this.#C)throw new Error(`Session already detached. Most likely the ${this.#M} has been closed.`);await this.#C.send("Target.detachFromTarget",{sessionId:this.#R})}_onClosed(){this.#I.clear(),this.#C=void 0,this.emit(Bt.Disconnected,void 0)}id(){return this.#R}getPendingProtocolErrors(){return this.#I.getPendingProtocolErrors()}}
/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class er{#q;#N;constructor(){this.#q=null,this.#N=null}setDefaultTimeout(e){this.#q=e}setDefaultNavigationTimeout(e){this.#N=e}navigationTimeout(){return null!==this.#N?this.#N:null!==this.#q?this.#q:3e4}timeout(){return null!==this.#q?this.#q:3e4}}
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var tr=self&&self.__addDisposableResource||function(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if("function"!=typeof i)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t},rr=self&&self.__disposeResources||function(e){return function(t){function r(r){t.error=t.hasError?new e(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}return function e(){for(;t.stack.length;){var i=t.stack.pop();try{var n=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(n).then(e,(function(t){return r(t),e()}))}catch(e){r(e)}}if(t.hasError)throw t.error}()}}("function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i});const ir=new WeakSet;function nr(e,t){let r=!1;if(e.prototype[Ze]){const t=e.prototype[Ze];e.prototype[Ze]=function(){if(!ir.has(this))return t.call(this);ir.delete(this)},r=!0}if(e.prototype[et]){const t=e.prototype[et];e.prototype[et]=function(){if(!ir.has(this))return t.call(this);ir.delete(this)},r=!0}return r&&(e.prototype.move=function(){return ir.add(this),this}),e}function sr(e=(e=>`Attempted to use disposed ${e.constructor.name}.`)){return(t,r)=>function(...r){if(this.disposed)throw new Error(e(this));return t.call(this,...r)}}function ar(e,t){const r=new WeakMap;let i=-1;return function(...t){if(-1===i&&(i=t.length),i!==t.length)throw new Error("Memoized method was called with the wrong number of arguments");let n=!1,s=r;for(const e of t)s.has(e)||(n=!0,s.set(e,new WeakMap)),s=s.get(e);if(n)return e.call(this,...t)}}function or(e=function(){return this}){return(t,r)=>{const i=new WeakMap;return async function(...r){const n={stack:[],error:void 0,hasError:!1};try{const s=e.call(this);let a=i.get(s);a||(a=new Ht,i.set(s,a));tr(n,await a.acquire(),!0);return await t.call(this,...r)}catch(e){n.error=e,n.hasError=!0}finally{const e=rr(n);e&&await e}}}}new WeakMap;var cr,lr=self&&self.__addDisposableResource||function(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if("function"!=typeof i)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t},dr=self&&self.__disposeResources||function(e){return function(t){function r(r){t.error=t.hasError?new e(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}return function e(){for(;t.stack.length;){var i=t.stack.pop();try{var n=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(n).then(e,(function(t){return r(t),e()}))}catch(e){r(e)}}if(t.hasError)throw t.error}()}}("function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i});!function(e){e.Action="action"}(cr||(cr={}));class ur extends it{static race(e){return gr.create(e)}visibility=null;_timeout=3e4;#B=!0;#L=!0;#j=!0;operators={conditions:(e,t)=>xe((r=>Ne(...e.map((e=>e(r,t)))).pipe(Ve(r)))),retryAndRaceWithSignalAndTimer:(e,t)=>{const r=[];return e&&r.push(At(e,t)),r.push(xt(this._timeout,t)),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return q(e)}(Xe({delay:wr}),Je(...r))}};get timeout(){return this._timeout}setTimeout(e){const t=this._clone();return t._timeout=e,t}setVisibility(e){const t=this._clone();return t.visibility=e,t}setWaitForEnabled(e){const t=this._clone();return t.#L=e,t}setEnsureElementIsInTheViewport(e){const t=this._clone();return t.#B=e,t}setWaitForStableBoundingBox(e){const t=this._clone();return t.#j=e,t}copyOptions(e){return this._timeout=e._timeout,this.visibility=e.visibility,this.#L=e.#L,this.#B=e.#B,this.#j=e.#j,this}#H=(e,t)=>this.#L?ve(e.frame.waitForFunction((e=>{if(!(e instanceof HTMLElement))return!0;return!["BUTTON","INPUT","SELECT","TEXTAREA","OPTION","OPTGROUP"].includes(e.nodeName)||!e.hasAttribute("disabled")}),{timeout:this._timeout,signal:t},e)).pipe(ze()):Z;#$=e=>this.#j?De((()=>ve(e.evaluate((e=>new Promise((t=>{window.requestAnimationFrame((()=>{const r=e.getBoundingClientRect();window.requestAnimationFrame((()=>{const i=e.getBoundingClientRect();t([{x:r.x,y:r.y,width:r.width,height:r.height},{x:i.x,y:i.y,width:i.width,height:i.height}])}))}))}))))))).pipe(Qe((([e,t])=>e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height)),Xe({delay:wr}),ze()):Z;#K=e=>this.#B?ve(e.isIntersectingViewport({threshold:0})).pipe(He((e=>!e)),xe((()=>ve(e.scrollIntoView()))),xe((()=>De((()=>ve(e.isIntersectingViewport({threshold:0})))).pipe(Qe(O),Xe({delay:wr}),ze())))):Z;#V(e){const t=e?.signal,r=new Error("Locator.click");return this._wait(e).pipe(this.operators.conditions([this.#K,this.#$,this.#H],t),Ye((()=>this.emit(cr.Action,void 0))),xe((t=>ve(t.click(e)).pipe(Ke((e=>{throw t.dispose().catch(yt),e}))))),this.operators.retryAndRaceWithSignalAndTimer(t,r))}#W(e,t){const r=t?.signal,i=new Error("Locator.fill");return this._wait(t).pipe(this.operators.conditions([this.#K,this.#$,this.#H],r),Ye((()=>this.emit(cr.Action,void 0))),xe((t=>ve(t.evaluate((e=>e instanceof HTMLSelectElement?"select":e instanceof HTMLTextAreaElement?"typeable-input":e instanceof HTMLInputElement?new Set(["textarea","text","url","tel","search","password","number","email"]).has(e.type)?"typeable-input":"other-input":e.isContentEditable?"contenteditable":"unknown"))).pipe(xe((r=>{switch(r){case"select":return ve(t.select(e).then(k));case"contenteditable":case"typeable-input":return ve(t.evaluate(((e,t)=>{const r=e.isContentEditable?e.innerText:e.value;if(t.length<=r.length||!t.startsWith(e.value))return e.isContentEditable?e.innerText="":e.value="",t;const i=e.isContentEditable?e.innerText:e.value;return e.isContentEditable?(e.innerText="",e.innerText=i):(e.value="",e.value=i),t.substring(i.length)}),e)).pipe(xe((e=>ve(t.type(e)))));case"other-input":return ve(t.focus()).pipe(xe((()=>ve(t.evaluate(((e,t)=>{e.value=t,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0}))}),e)))));case"unknown":throw new Error("Element cannot be filled out.")}}))).pipe(Ke((e=>{throw t.dispose().catch(yt),e}))))),this.operators.retryAndRaceWithSignalAndTimer(r,i))}#z(e){const t=e?.signal,r=new Error("Locator.hover");return this._wait(e).pipe(this.operators.conditions([this.#K,this.#$],t),Ye((()=>this.emit(cr.Action,void 0))),xe((e=>ve(e.hover()).pipe(Ke((t=>{throw e.dispose().catch(yt),t}))))),this.operators.retryAndRaceWithSignalAndTimer(t,r))}#U(e){const t=e?.signal,r=new Error("Locator.scroll");return this._wait(e).pipe(this.operators.conditions([this.#K,this.#$],t),Ye((()=>this.emit(cr.Action,void 0))),xe((t=>ve(t.evaluate(((e,t,r)=>{void 0!==t&&(e.scrollTop=t),void 0!==r&&(e.scrollLeft=r)}),e?.scrollTop,e?.scrollLeft)).pipe(Ke((e=>{throw t.dispose().catch(yt),e}))))),this.operators.retryAndRaceWithSignalAndTimer(t,r))}clone(){return this._clone()}async waitHandle(e){const t=new Error("Locator.waitHandle");return await Se(this._wait(e).pipe(this.operators.retryAndRaceWithSignalAndTimer(e?.signal,t)))}async wait(e){const t={stack:[],error:void 0,hasError:!1};try{const r=lr(t,await this.waitHandle(e),!1);return await r.jsonValue()}catch(e){t.error=e,t.hasError=!0}finally{dr(t)}}map(e){return new mr(this._clone(),(t=>t.evaluateHandle(e)))}filter(e){return new fr(this._clone(),(async(t,r)=>(await t.frame.waitForFunction(e,{signal:r,timeout:this._timeout},t),!0)))}filterHandle(e){return new fr(this._clone(),e)}mapHandle(e){return new mr(this._clone(),e)}click(e){return Se(this.#V(e))}fill(e,t){return Se(this.#W(e,t))}hover(e){return Se(this.#z(e))}scroll(e){return Se(this.#U(e))}}class hr extends ur{static create(e,t){return new hr(e,t).setTimeout("getDefaultTimeout"in e?e.getDefaultTimeout():e.page().getDefaultTimeout())}#G;#Q;constructor(e,t){super(),this.#G=e,this.#Q=t}_clone(){return new hr(this.#G,this.#Q)}_wait(e){const t=e?.signal;return De((()=>ve(this.#G.waitForFunction(this.#Q,{timeout:this.timeout,signal:t})))).pipe(Ue())}}class pr extends ur{#J;constructor(e){super(),this.#J=e,this.copyOptions(this.#J)}get delegate(){return this.#J}setTimeout(e){const t=super.setTimeout(e);return t.#J=this.#J.setTimeout(e),t}setVisibility(e){const t=super.setVisibility(e);return t.#J=t.#J.setVisibility(e),t}setWaitForEnabled(e){const t=super.setWaitForEnabled(e);return t.#J=this.#J.setWaitForEnabled(e),t}setEnsureElementIsInTheViewport(e){const t=super.setEnsureElementIsInTheViewport(e);return t.#J=this.#J.setEnsureElementIsInTheViewport(e),t}setWaitForStableBoundingBox(e){const t=super.setWaitForStableBoundingBox(e);return t.#J=this.#J.setWaitForStableBoundingBox(e),t}}class fr extends pr{#X;constructor(e,t){super(e),this.#X=t}_clone(){return new fr(this.delegate.clone(),this.#X).copyOptions(this)}_wait(e){return this.delegate._wait(e).pipe(xe((t=>ve(Promise.resolve(this.#X(t,e?.signal))).pipe(He((e=>e)),Ce((()=>t))))),Ue())}}class mr extends pr{#Y;constructor(e,t){super(e),this.#Y=t}_clone(){return new mr(this.delegate.clone(),this.#Y).copyOptions(this)}_wait(e){return this.delegate._wait(e).pipe(xe((t=>ve(Promise.resolve(this.#Y(t,e?.signal))))))}}class yr extends ur{static create(e,t){return new yr(e,t).setTimeout("getDefaultTimeout"in e?e.getDefaultTimeout():e.page().getDefaultTimeout())}#G;#Z;constructor(e,t){super(),this.#G=e,this.#Z=t}#ee=e=>this.visibility?(()=>{switch(this.visibility){case"hidden":return De((()=>ve(e.isHidden())));case"visible":return De((()=>ve(e.isVisible())))}})().pipe(Qe(O),Xe({delay:wr}),ze()):Z;_clone(){return new yr(this.#G,this.#Z).copyOptions(this)}_wait(e){const t=e?.signal;return De((()=>ve(this.#G.waitForSelector(this.#Z,{visible:!1,timeout:this._timeout,signal:t})))).pipe(He((e=>null!==e)),Ue(),this.operators.conditions([this.#ee],t))}}class gr extends ur{static create(e){const t=function(e){for(const t of e)if(!(t instanceof ur))throw new Error("Unknown locator for race candidate");return e}(e);return new gr(t)}#te;constructor(e){super(),this.#te=e}_clone(){return new gr(this.#te.map((e=>e.clone()))).copyOptions(this)}_wait(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===(e=je(e)).length?he(e[0]):new N($e(e))}(...this.#te.map((t=>t._wait(e))))}}const wr=100;
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var vr=self&&self.__runInitializers||function(e,t,r){for(var i=arguments.length>2,n=0;n<t.length;n++)r=i?t[n].call(e,r):t[n].call(e);return i?r:void 0},br=self&&self.__esDecorate||function(e,t,r,i,n,s){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,c=i.kind,l="getter"===c?"get":"setter"===c?"set":"value",d=!t&&e?i.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,i.name):{}),h=!1,p=r.length-1;p>=0;p--){var f={};for(var m in i)f[m]="access"===m?{}:i[m];for(var m in i.access)f.access[m]=i.access[m];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(e||null))};var y=(0,r[p])("accessor"===c?{get:u.get,set:u.set}:u[l],f);if("accessor"===c){if(void 0===y)continue;if(null===y||"object"!=typeof y)throw new TypeError("Object expected");(o=a(y.get))&&(u.get=o),(o=a(y.set))&&(u.set=o),(o=a(y.init))&&n.unshift(o)}else(o=a(y))&&("field"===c?n.unshift(o):u[l]=o)}d&&Object.defineProperty(d,i.name,u),h=!0},kr=self&&self.__addDisposableResource||function(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if("function"!=typeof i)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t},Sr=self&&self.__disposeResources||function(e){return function(t){function r(r){t.error=t.hasError?new e(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}return function e(){for(;t.stack.length;){var i=t.stack.pop();try{var n=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(n).then(e,(function(t){return r(t),e()}))}catch(e){r(e)}}if(t.hasError)throw t.error}()}}("function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i});let Cr=(()=>{let e,t=it,r=[];return class extends t{static{const i="function"==typeof Symbol&&Symbol.metadata?Object.create(t[Symbol.metadata]??null):void 0;br(this,null,e,{kind:"method",name:"screenshot",static:!1,private:!1,access:{has:e=>"screenshot"in e,get:e=>e.screenshot},metadata:i},null,r),i&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:i})}_isDragging=(vr(this,r),!1);_timeoutSettings=new er;#re=new WeakMap;#ie=new z(1);constructor(){var e,t,r,i;super(),Mt(this,"request").pipe(xe((e=>_e(be(1),Ne(Mt(this,"requestfailed"),Mt(this,"requestfinished"),Mt(this,"response").pipe(Ce((e=>e.request())))).pipe(He((t=>t.id===e.id)),We(1),Ce((()=>-1)))))),(t=(e,t)=>be(e+t),r=0,void 0===i&&(i=1/0),L((function(e,n){var s=r;return Ie(e,n,(function(e,r){return t(s,e,r)}),i,(function(e){s=e}),!1,void 0,(function(){return s=null}))}))),(e=Mt(this,"close"),L((function(t,r){he(e).subscribe(j(r,(function(){return r.complete()}),k)),!r.closed&&t.subscribe(r)}))),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=re(e);return L((function(t,i){(r?_e(e,t,r):_e(e,t)).subscribe(i)}))}(0)).subscribe(this.#ie)}on(e,t){if("request"!==e)return super.on(e,t);let r=this.#re.get(t);return void 0===r&&(r=e=>{e.enqueueInterceptAction((()=>t(e)))},this.#re.set(t,r)),super.on(e,r)}off(e,t){return"request"===e&&(t=this.#re.get(t)||t),super.off(e,t)}get accessibility(){return this.mainFrame().accessibility}locator(e){return"string"==typeof e?yr.create(this,e):hr.create(this,e)}locatorRace(e){return ur.race(e)}async $(e){return await this.mainFrame().$(e)}async $$(e,t){return await this.mainFrame().$$(e,t)}async evaluateHandle(e,...t){return e=vt(this.evaluateHandle.name,e),await this.mainFrame().evaluateHandle(e,...t)}async $eval(e,t,...r){return t=vt(this.$eval.name,t),await this.mainFrame().$eval(e,t,...r)}async $$eval(e,t,...r){return t=vt(this.$$eval.name,t),await this.mainFrame().$$eval(e,t,...r)}async addScriptTag(e){return await this.mainFrame().addScriptTag(e)}async addStyleTag(e){return await this.mainFrame().addStyleTag(e)}url(){return this.mainFrame().url()}async content(){return await this.mainFrame().content()}async setContent(e,t){await this.mainFrame().setContent(e,t)}async goto(e,t){return await this.mainFrame().goto(e,t)}async waitForNavigation(e={}){return await this.mainFrame().waitForNavigation(e)}waitForRequest(e,t={}){const{timeout:r=this._timeoutSettings.timeout(),signal:i}=t;if("string"==typeof e){const t=e;e=e=>e.url()===t}return Se(Mt(this,"request").pipe(Ot(e),Je(xt(r),At(i),Mt(this,"close").pipe(Ce((()=>{throw new ft("Page closed!")}))))))}waitForResponse(e,t={}){const{timeout:r=this._timeoutSettings.timeout(),signal:i}=t;if("string"==typeof e){const t=e;e=e=>e.url()===t}return Se(Mt(this,"response").pipe(Ot(e),Je(xt(r),At(i),Mt(this,"close").pipe(Ce((()=>{throw new ft("Page closed!")}))))))}waitForNetworkIdle(e={}){return Se(this.waitForNetworkIdle$(e))}waitForNetworkIdle$(e={}){const{timeout:t=this._timeoutSettings.timeout(),idleTime:r=Dt,concurrency:i=0,signal:n}=e;return this.#ie.pipe((s=e=>e>i?Z:qe(r),L((function(e,t){var r=null,i=0,n=!1,o=function(){return n&&!r&&t.complete()};e.subscribe(j(t,(function(e){null==r||r.unsubscribe();var n=0,c=i++;he(s(e,c)).subscribe(r=j(t,(function(r){return t.next(a?a(e,r,c,n++):r)}),(function(){r=null,o()})))}),(function(){n=!0,o()})))}))),Ce((()=>{})),Je(xt(t),At(n),Mt(this,"close").pipe(Ce((()=>{throw new ft("Page closed!")})))));var s,a}async waitForFrame(e,t={}){const{timeout:r=this.getDefaultTimeout(),signal:i}=t;return bt(e)&&(e=t=>e===t.url()),await Se(Ne(Mt(this,"frameattached"),Mt(this,"framenavigated"),ve(this.frames())).pipe(Ot(e),Qe(),Je(xt(r),At(i),Mt(this,"close").pipe(Ce((()=>{throw new ft("Page closed.")}))))))}async emulate(e){await Promise.all([this.setUserAgent(e.userAgent),this.setViewport(e.viewport)])}async evaluate(e,...t){return e=vt(this.evaluate.name,e),await this.mainFrame().evaluate(e,...t)}async _maybeWriteBufferToFile(e,t){if(!e)return;const r=await Tt();await r.writeFile(e,t)}async screencast(e={}){const[{ScreenRecorder:t},[r,i,n]]=await Promise.all([import("./package/lib/esm/puppeteer/node/ScreenRecorder.js"),this.#ne()]);let s;if(e.crop){const{x:t,y:a,width:o,height:c}=Er(Tr(e.crop));if(t<0||a<0)throw new Error("`crop.x` and `crop.y` must be greater than or equal to 0.");if(o<=0||c<=0)throw new Error("`crop.height` and `crop.width` must be greater than or equal to 0.");const l=r/n,d=i/n;if(t+o>l)throw new Error(`\`crop.width\` cannot be larger than the viewport width (${l}).`);if(a+c>d)throw new Error(`\`crop.height\` cannot be larger than the viewport height (${d}).`);s={x:t*n,y:a*n,width:o*n,height:c*n}}if(void 0!==e.speed&&e.speed<=0)throw new Error("`speed` must be greater than 0.");if(void 0!==e.scale&&e.scale<=0)throw new Error("`scale` must be greater than 0.");const a=new t(this,r,i,{...e,path:e.ffmpegPath,crop:s});try{await this._startScreencast()}catch(e){throw a.stop(),e}if(e.path){const{createWriteStream:t}=await import("fs"),r=t(e.path,"binary");a.pipe(r)}return a}#se=0;#ae;async _startScreencast(){++this.#se,this.#ae||(this.#ae=this.mainFrame().client.send("Page.startScreencast",{format:"png"}).then((()=>new Promise((e=>this.mainFrame().client.once("Page.screencastFrame",(()=>e()))))))),await this.#ae}async _stopScreencast(){--this.#se,this.#ae&&(this.#ae=void 0,0===this.#se&&await this.mainFrame().client.send("Page.stopScreencast"))}async#ne(){const e={stack:[],error:void 0,hasError:!1};try{const t=this.viewport(),r=kr(e,new tt,!1);return t&&0!==t.deviceScaleFactor&&(await this.setViewport({...t,deviceScaleFactor:0}),r.defer((()=>{this.setViewport(t).catch(yt)}))),await this.mainFrame().isolatedRealm().evaluate((()=>[window.visualViewport.width*window.devicePixelRatio,window.visualViewport.height*window.devicePixelRatio,window.devicePixelRatio]))}catch(t){e.error=t,e.hasError=!0}finally{Sr(e)}}async screenshot(e={}){const t={stack:[],error:void 0,hasError:!1};try{kr(t,await this.browserContext().startScreenshot(),!1);await this.bringToFront();const r={...e,clip:e.clip?{...e.clip}:void 0};if(void 0===r.type&&void 0!==r.path){const e=r.path;switch(e.slice(e.lastIndexOf(".")+1).toLowerCase()){case"png":r.type="png";break;case"jpeg":case"jpg":r.type="jpeg";break;case"webp":r.type="webp"}}if(void 0!==r.quality){if(r.quality<0||r.quality>100)throw new Error(`Expected 'quality' (${r.quality}) to be between 0 and 100, inclusive.`);if(void 0===r.type||!["jpeg","webp"].includes(r.type))throw new Error(`${r.type??"png"} screenshots do not support 'quality'.`)}if(r.clip){if(r.clip.width<=0)throw new Error("'width' in 'clip' must be positive.");if(r.clip.height<=0)throw new Error("'height' in 'clip' must be positive.")}!function(e){e.optimizeForSpeed??=!1,e.type??="png",e.fromSurface??=!0,e.fullPage??=!1,e.omitBackground??=!1,e.encoding??="binary",e.captureBeyondViewport??=!0}(r);const i=kr(t,new rt,!0);if(r.clip){if(r.fullPage)throw new Error("'clip' and 'fullPage' are mutually exclusive");r.clip=Er(Tr(r.clip))}else if(r.fullPage){if(!r.captureBeyondViewport){const e=await this.mainFrame().isolatedRealm().evaluate((()=>{const e=document.documentElement;return{width:e.scrollWidth,height:e.scrollHeight}})),t=this.viewport();await this.setViewport({...t,...e}),i.defer((async()=>{await this.setViewport(t).catch(yt)}))}}else r.captureBeyondViewport=!1;const n=await this._screenshot(r);if("base64"===r.encoding)return n;const s=Buffer.from(n,"base64");return await this._maybeWriteBufferToFile(r.path,s),s}catch(e){t.error=e,t.hasError=!0}finally{const e=Sr(t);e&&await e}}async title(){return await this.mainFrame().title()}click(e,t){return this.mainFrame().click(e,t)}focus(e){return this.mainFrame().focus(e)}hover(e){return this.mainFrame().hover(e)}select(e,...t){return this.mainFrame().select(e,...t)}tap(e){return this.mainFrame().tap(e)}type(e,t,r){return this.mainFrame().type(e,t,r)}async waitForSelector(e,t={}){return await this.mainFrame().waitForSelector(e,t)}waitForFunction(e,t,...r){return this.mainFrame().waitForFunction(e,t,...r)}[(e=[or((function(){return this.browser()}))],Ze)](){this.close().catch(yt)}[et](){return this.close()}}})();new Set(["Timestamp","Documents","Frames","JSEventListeners","Nodes","LayoutCount","RecalcStyleCount","LayoutDuration","RecalcStyleDuration","ScriptDuration","TaskDuration","JSHeapUsedSize","JSHeapTotalSize"]);function Tr(e){return{...e,...e.width<0?{x:e.x+e.width,width:-e.width}:{x:e.x,width:e.width},...e.height<0?{y:e.y+e.height,height:-e.height}:{y:e.y,height:e.height}}}function Er(e){const t=Math.round(e.x),r=Math.round(e.y),i=Math.round(e.width+e.x-t),n=Math.round(e.height+e.y-r);return{...e,x:t,y:r,width:i,height:n}}
/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Ir{#oe;#ce;#le;#de;constructor(e,t,r,i){this.#oe=e,this.#ce=t,this.#le=r,this.#de=i}type(){return this.#oe}text(){return this.#ce}args(){return this.#le}location(){return this.#de[0]??{}}stackTrace(){return this.#de}}
/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class xr{#ue;#he;#pe=!1;constructor(e,t){this.#ue=e,this.#he="selectSingle"!==t.mode}isMultiple(){return this.#he}async accept(e){nt(!this.#pe,"Cannot accept FileChooser which is already handled!"),this.#pe=!0,await this.#ue.uploadFile(...e)}async cancel(){nt(!this.#pe,"Cannot cancel FileChooser which is already handled!"),this.#pe=!0,await this.#ue.evaluate((e=>{e.dispatchEvent(new Event("cancel",{bubbles:!0}))}))}}
/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Fr;!function(e){e.Request=Symbol("NetworkManager.Request"),e.RequestServedFromCache=Symbol("NetworkManager.RequestServedFromCache"),e.Response=Symbol("NetworkManager.Response"),e.RequestFailed=Symbol("NetworkManager.RequestFailed"),e.RequestFinished=Symbol("NetworkManager.RequestFinished")}(Fr||(Fr={}));
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */
var _r=self&&self.__runInitializers||function(e,t,r){for(var i=arguments.length>2,n=0;n<t.length;n++)r=i?t[n].call(e,r):t[n].call(e);return i?r:void 0},Dr=self&&self.__esDecorate||function(e,t,r,i,n,s){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,c=i.kind,l="getter"===c?"get":"setter"===c?"set":"value",d=!t&&e?i.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,i.name):{}),h=!1,p=r.length-1;p>=0;p--){var f={};for(var m in i)f[m]="access"===m?{}:i[m];for(var m in i.access)f.access[m]=i.access[m];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(e||null))};var y=(0,r[p])("accessor"===c?{get:u.get,set:u.set}:u[l],f);if("accessor"===c){if(void 0===y)continue;if(null===y||"object"!=typeof y)throw new TypeError("Object expected");(o=a(y.get))&&(u.get=o),(o=a(y.set))&&(u.set=o),(o=a(y.init))&&n.unshift(o)}else(o=a(y))&&("field"===c?n.unshift(o):u[l]=o)}d&&Object.defineProperty(d,i.name,u),h=!0},Pr=self&&self.__addDisposableResource||function(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if("function"!=typeof i)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t},Rr=self&&self.__disposeResources||function(e){return function(t){function r(r){t.error=t.hasError?new e(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}return function e(){for(;t.stack.length;){var i=t.stack.pop();try{var n=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(n).then(e,(function(t){return r(t),e()}))}catch(e){r(e)}}if(t.hasError)throw t.error}()}}("function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i});let Mr=(()=>{let e,t,r,i,n=[nr],s=[],a=[];(class{static{t=this}static{const o="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;Dr(this,null,r,{kind:"method",name:"getProperty",static:!1,private:!1,access:{has:e=>"getProperty"in e,get:e=>e.getProperty},metadata:o},null,a),Dr(this,null,i,{kind:"method",name:"getProperties",static:!1,private:!1,access:{has:e=>"getProperties"in e,get:e=>e.getProperties},metadata:o},null,a),Dr(null,e={value:t},n,{kind:"class",name:t.name,metadata:o},null,s),t=e.value,o&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:o}),_r(t,s)}constructor(){_r(this,a)}async evaluate(e,...t){return e=vt(this.evaluate.name,e),await this.realm.evaluate(e,this,...t)}async evaluateHandle(e,...t){return e=vt(this.evaluateHandle.name,e),await this.realm.evaluateHandle(e,this,...t)}async getProperty(e){return await this.evaluateHandle(((e,t)=>e[t]),e)}async getProperties(){const e=await this.evaluate((e=>{const t=[],r=Object.getOwnPropertyDescriptors(e);for(const e in r)r[e]?.enumerable&&t.push(e);return t})),t=new Map,r=await Promise.all(e.map((e=>this.getProperty(e))));for(const[i,n]of Object.entries(e)){const e={stack:[],error:void 0,hasError:!1};try{const s=Pr(e,r[i],!1);s&&t.set(n,s.move())}catch(t){e.error=t,e.hasError=!0}finally{Rr(e)}}return t}[(r=[sr()],i=[sr()],Ze)](){this.dispose().catch(yt)}[et](){return this.dispose()}});return t})();var Ar=self&&self.__addDisposableResource||function(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if("function"!=typeof i)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t},Or=self&&self.__disposeResources||function(e){return function(t){function r(r){t.error=t.hasError?new e(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}return function e(){for(;t.stack.length;){var i=t.stack.pop();try{var n=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(n).then(e,(function(t){return r(t),e()}))}catch(e){r(e)}}if(t.hasError)throw t.error}()}}("function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i});class qr{#fe;#me;#ye;constructor(e,t,r){this.#fe=e,this.#me=t,this.#ye=r}get name(){return this.#fe}get initSource(){return this.#ye}async run(e,t,r,i){const n=new tt;try{if(!i){const i={stack:[],error:void 0,hasError:!1};try{const s=Ar(i,await e.evaluateHandle(((e,t)=>globalThis[e].args.get(t)),this.#fe,t),!1),a=await s.getProperties();for(const[e,t]of a)if(e in r)if("node"===t.remoteObject().subtype)r[+e]=t;else n.use(t);else n.use(t)}catch(e){i.error=e,i.hasError=!0}finally{Or(i)}}await e.evaluate(((e,t,r)=>{const i=globalThis[e].callbacks;i.get(t).resolve(r),i.delete(t)}),this.#fe,t,await this.#me(...r));for(const e of r)e instanceof Mr&&n.use(e)}catch(r){Gt(r)?await e.evaluate(((e,t,r,i)=>{const n=new Error(r);n.stack=i;const s=globalThis[e].callbacks;s.get(t).reject(n),s.delete(t)}),this.#fe,t,r.message,r.stack).catch(yt):await e.evaluate(((e,t,r)=>{const i=globalThis[e].callbacks;i.get(t).reject(r),i.delete(t)}),this.#fe,t,r).catch(yt)}}}
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Nr=ot("puppeteer:protocol:SEND ►"),Br=ot("puppeteer:protocol:RECV ◀");class Lr extends it{#ge;#we;#ve;#be;#ke=new Map;#Se=!1;#Ce=new Set;#I=new Xt;constructor(e,t,r=0,i){super(),this.#ge=e,this.#ve=r,this.#be=i??18e4,this.#we=t,this.#we.onmessage=this.onMessage.bind(this),this.#we.onclose=this.#Te.bind(this)}static fromSession(e){return e.connection()}get delay(){return this.#ve}get timeout(){return this.#be}get _closed(){return this.#Se}get _sessions(){return this.#ke}session(e){return this.#ke.get(e)||null}url(){return this.#ge}send(e,t,r){return this._rawSend(this.#I,e,t,void 0,r)}_rawSend(e,t,r,i,n){return this.#Se?Promise.reject(new Error("Protocol error: Connection closed.")):e.create(t,n?.timeout??this.#be,(e=>{const n=JSON.stringify({method:t,params:r,id:e,sessionId:i});Nr(n),this.#we.send(n)}))}async closeBrowser(){await this.send("Browser.close")}async onMessage(e){this.#ve&&await new Promise((e=>setTimeout(e,this.#ve))),Br(e);const t=JSON.parse(e);if("Target.attachedToTarget"===t.method){const e=t.params.sessionId,r=new Zt(this,t.params.targetInfo.type,e,t.sessionId);this.#ke.set(e,r),this.emit(Bt.SessionAttached,r);const i=this.#ke.get(t.sessionId);i&&i.emit(Bt.SessionAttached,r)}else if("Target.detachedFromTarget"===t.method){const e=this.#ke.get(t.params.sessionId);if(e){e._onClosed(),this.#ke.delete(t.params.sessionId),this.emit(Bt.SessionDetached,e);const r=this.#ke.get(t.sessionId);r&&r.emit(Bt.SessionDetached,e)}}if(t.sessionId){const e=this.#ke.get(t.sessionId);e&&e._onMessage(t)}else t.id?t.error?this.#I.reject(t.id,Jt(t),t.error.message):this.#I.resolve(t.id,t.result):this.emit(t.method,t.params)}#Te(){if(!this.#Se){this.#Se=!0,this.#we.onmessage=void 0,this.#we.onclose=void 0,this.#I.clear();for(const e of this.#ke.values())e._onClosed();this.#ke.clear(),this.emit(Bt.Disconnected,void 0)}}dispose(){this.#Te(),this.#we.close()}isAutoAttached(e){return!this.#Ce.has(e)}async _createSession(e,t=!0){t||this.#Ce.add(e.targetId);const{sessionId:r}=await this.send("Target.attachToTarget",{targetId:e.targetId,flatten:!0});this.#Ce.delete(e.targetId);const i=this.#ke.get(r);if(!i)throw new Error("CDPSession creation failed.");return i}async createSession(e){return await this._createSession(e,!1)}getPendingProtocolErrors(){const e=[];e.push(...this.#I.getPendingProtocolErrors());for(const t of this.#ke.values())e.push(...t.getPendingProtocolErrors());return e}}function jr(e){return e instanceof ft}
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Hr{#Ee;#Ie;constructor(e){this.#Ee=new $r(e),this.#Ie=new Kr(e)}updateClient(e){this.#Ee.updateClient(e),this.#Ie.updateClient(e)}async startJSCoverage(e={}){return await this.#Ee.start(e)}async stopJSCoverage(){return await this.#Ee.stop()}async startCSSCoverage(e={}){return await this.#Ie.start(e)}async stopCSSCoverage(){return await this.#Ie.stop()}}class $r{#xe;#Fe=!1;#_e=new Map;#De=new Map;#Pe;#Re=!1;#Me=!1;#Ae=!1;constructor(e){this.#xe=e}updateClient(e){this.#xe=e}async start(e={}){nt(!this.#Fe,"JSCoverage is already enabled");const{resetOnNavigation:t=!0,reportAnonymousScripts:r=!1,includeRawScriptCoverage:i=!1,useBlockCoverage:n=!0}=e;this.#Re=t,this.#Me=r,this.#Ae=i,this.#Fe=!0,this.#_e.clear(),this.#De.clear(),this.#Pe=new tt;const s=this.#Pe.use(new it(this.#xe));s.on("Debugger.scriptParsed",this.#Oe.bind(this)),s.on("Runtime.executionContextsCleared",this.#qe.bind(this)),await Promise.all([this.#xe.send("Profiler.enable"),this.#xe.send("Profiler.startPreciseCoverage",{callCount:this.#Ae,detailed:n}),this.#xe.send("Debugger.enable"),this.#xe.send("Debugger.setSkipAllPauses",{skip:!0})])}#qe(){this.#Re&&(this.#_e.clear(),this.#De.clear())}async#Oe(e){if(!wt.isPuppeteerURL(e.url)&&(e.url||this.#Me))try{const t=await this.#xe.send("Debugger.getScriptSource",{scriptId:e.scriptId});this.#_e.set(e.scriptId,e.url),this.#De.set(e.scriptId,t.scriptSource)}catch(e){yt(e)}}async stop(){nt(this.#Fe,"JSCoverage is not enabled"),this.#Fe=!1;const e=await Promise.all([this.#xe.send("Profiler.takePreciseCoverage"),this.#xe.send("Profiler.stopPreciseCoverage"),this.#xe.send("Profiler.disable"),this.#xe.send("Debugger.disable")]);this.#Pe?.dispose();const t=[],r=e[0];for(const e of r.result){let r=this.#_e.get(e.scriptId);!r&&this.#Me&&(r="debugger://VM"+e.scriptId);const i=this.#De.get(e.scriptId);if(void 0===i||void 0===r)continue;const n=[];for(const t of e.functions)n.push(...t.ranges);const s=Vr(n);this.#Ae?t.push({url:r,ranges:s,text:i,rawScriptCoverage:e}):t.push({url:r,ranges:s,text:i})}return t}}class Kr{#xe;#Fe=!1;#Ne=new Map;#Be=new Map;#Le;#Re=!1;constructor(e){this.#xe=e}updateClient(e){this.#xe=e}async start(e={}){nt(!this.#Fe,"CSSCoverage is already enabled");const{resetOnNavigation:t=!0}=e;this.#Re=t,this.#Fe=!0,this.#Ne.clear(),this.#Be.clear(),this.#Le=new tt;const r=this.#Le.use(new it(this.#xe));r.on("CSS.styleSheetAdded",this.#je.bind(this)),r.on("Runtime.executionContextsCleared",this.#qe.bind(this)),await Promise.all([this.#xe.send("DOM.enable"),this.#xe.send("CSS.enable"),this.#xe.send("CSS.startRuleUsageTracking")])}#qe(){this.#Re&&(this.#Ne.clear(),this.#Be.clear())}async#je(e){const t=e.header;if(t.sourceURL)try{const e=await this.#xe.send("CSS.getStyleSheetText",{styleSheetId:t.styleSheetId});this.#Ne.set(t.styleSheetId,t.sourceURL),this.#Be.set(t.styleSheetId,e.text)}catch(e){yt(e)}}async stop(){nt(this.#Fe,"CSSCoverage is not enabled"),this.#Fe=!1;const e=await this.#xe.send("CSS.stopRuleUsageTracking");await Promise.all([this.#xe.send("CSS.disable"),this.#xe.send("DOM.disable")]),this.#Le?.dispose();const t=new Map;for(const r of e.ruleUsage){let e=t.get(r.styleSheetId);e||(e=[],t.set(r.styleSheetId,e)),e.push({startOffset:r.startOffset,endOffset:r.endOffset,count:r.used?1:0})}const r=[];for(const e of this.#Ne.keys()){const i=this.#Ne.get(e);nt(void 0!==i,`Stylesheet URL is undefined (styleSheetId=${e})`);const n=this.#Be.get(e);nt(void 0!==n,`Stylesheet text is undefined (styleSheetId=${e})`);const s=Vr(t.get(e)||[]);r.push({url:i,ranges:s,text:n})}return r}}function Vr(e){const t=[];for(const r of e)t.push({offset:r.startOffset,type:0,range:r}),t.push({offset:r.endOffset,type:1,range:r});t.sort(((e,t)=>{if(e.offset!==t.offset)return e.offset-t.offset;if(e.type!==t.type)return t.type-e.type;const r=e.range.endOffset-e.range.startOffset,i=t.range.endOffset-t.range.startOffset;return 0===e.type?i-r:r-i}));const r=[],i=[];let n=0;for(const e of t){if(r.length&&n<e.offset&&r[r.length-1]>0){const t=i[i.length-1];t&&t.end===n?t.end=e.offset:i.push({start:n,end:e.offset})}n=e.offset,0===e.type?r.push(e.range.count):r.pop()}return i.filter((e=>e.end-e.start>0))}
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Wr{#oe;#He;#$e;handled=!1;constructor(e,t,r=""){this.#oe=e,this.#He=t,this.#$e=r}type(){return this.#oe}message(){return this.#He}defaultValue(){return this.#$e}async accept(e){nt(!this.handled,"Cannot accept dialog which is already handled!"),this.handled=!0,await this.handle({accept:!0,text:e})}async dismiss(){nt(!this.handled,"Cannot dismiss dialog which is already handled!"),this.handled=!0,await this.handle({accept:!1})}}
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class zr extends Wr{#xe;constructor(e,t,r,i=""){super(t,r,i),this.#xe=e}async handle(e){await this.#xe.send("Page.handleJavaScriptDialog",{accept:e.accept,promptText:e.text})}}var Ur=self&&self.__runInitializers||function(e,t,r){for(var i=arguments.length>2,n=0;n<t.length;n++)r=i?t[n].call(e,r):t[n].call(e);return i?r:void 0},Gr=self&&self.__esDecorate||function(e,t,r,i,n,s){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,c=i.kind,l="getter"===c?"get":"setter"===c?"set":"value",d=!t&&e?i.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,i.name):{}),h=!1,p=r.length-1;p>=0;p--){var f={};for(var m in i)f[m]="access"===m?{}:i[m];for(var m in i.access)f.access[m]=i.access[m];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(e||null))};var y=(0,r[p])("accessor"===c?{get:u.get,set:u.set}:u[l],f);if("accessor"===c){if(void 0===y)continue;if(null===y||"object"!=typeof y)throw new TypeError("Object expected");(o=a(y.get))&&(u.get=o),(o=a(y.set))&&(u.set=o),(o=a(y.init))&&n.unshift(o)}else(o=a(y))&&("field"===c?n.unshift(o):u[l]=o)}d&&Object.defineProperty(d,i.name,u),h=!0},Qr=self&&self.__setFunctionName||function(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})};class Jr{#Ke;#Ve;#We;constructor(e,t,r){this.#Ke=e,this.#Ve=t,this.#We=r,this.#Ve.registerState(this)}async setState(e){this.#Ke=e,await this.sync()}get state(){return this.#Ke}async sync(){await Promise.all(this.#Ve.clients().map((e=>this.#We(e,this.#Ke))))}}let Xr=(()=>{let e,t,r,i,n,s,a,o,c,l,d,u,h,p,f,m,y,g,w,v,b=[];return class{static{const k="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;e=[ar],r=[ar],n=[ar],a=[ar],c=[ar],d=[ar],h=[ar],f=[ar],y=[ar],w=[ar],Gr(this,t={value:Qr((async function(e,t){if(!t.viewport)return void await Promise.all([e.send("Emulation.clearDeviceMetricsOverride"),e.send("Emulation.setTouchEmulationEnabled",{enabled:!1})]).catch(yt);const{viewport:r}=t,i=r.isMobile||!1,n=r.width,s=r.height,a=r.deviceScaleFactor??1,o=r.isLandscape?{angle:90,type:"landscapePrimary"}:{angle:0,type:"portraitPrimary"},c=r.hasTouch||!1;await Promise.all([e.send("Emulation.setDeviceMetricsOverride",{mobile:i,width:n,height:s,deviceScaleFactor:a,screenOrientation:o}).catch((e=>{if(!e.message.includes("Target does not support metrics override"))throw e;yt(e)})),e.send("Emulation.setTouchEmulationEnabled",{enabled:c})])}),"#applyViewport")},e,{kind:"method",name:"#applyViewport",static:!1,private:!0,access:{has:e=>#ze in e,get:e=>e.#ze},metadata:k},null,b),Gr(this,i={value:Qr((async function(e,t){t.active&&(t.overrides?await e.send("Emulation.setIdleOverride",{isUserActive:t.overrides.isUserActive,isScreenUnlocked:t.overrides.isScreenUnlocked}):await e.send("Emulation.clearIdleOverride"))}),"#emulateIdleState")},r,{kind:"method",name:"#emulateIdleState",static:!1,private:!0,access:{has:e=>#Ue in e,get:e=>e.#Ue},metadata:k},null,b),Gr(this,s={value:Qr((async function(e,t){if(t.active)try{await e.send("Emulation.setTimezoneOverride",{timezoneId:t.timezoneId||""})}catch(e){if(Gt(e)&&e.message.includes("Invalid timezone"))throw new Error(`Invalid timezone ID: ${t.timezoneId}`);throw e}}),"#emulateTimezone")},n,{kind:"method",name:"#emulateTimezone",static:!1,private:!0,access:{has:e=>#Ge in e,get:e=>e.#Ge},metadata:k},null,b),Gr(this,o={value:Qr((async function(e,t){t.active&&await e.send("Emulation.setEmulatedVisionDeficiency",{type:t.visionDeficiency||"none"})}),"#emulateVisionDeficiency")},a,{kind:"method",name:"#emulateVisionDeficiency",static:!1,private:!0,access:{has:e=>#Qe in e,get:e=>e.#Qe},metadata:k},null,b),Gr(this,l={value:Qr((async function(e,t){t.active&&await e.send("Emulation.setCPUThrottlingRate",{rate:t.factor??1})}),"#emulateCpuThrottling")},c,{kind:"method",name:"#emulateCpuThrottling",static:!1,private:!0,access:{has:e=>#Je in e,get:e=>e.#Je},metadata:k},null,b),Gr(this,u={value:Qr((async function(e,t){t.active&&await e.send("Emulation.setEmulatedMedia",{features:t.mediaFeatures})}),"#emulateMediaFeatures")},d,{kind:"method",name:"#emulateMediaFeatures",static:!1,private:!0,access:{has:e=>#Xe in e,get:e=>e.#Xe},metadata:k},null,b),Gr(this,p={value:Qr((async function(e,t){t.active&&await e.send("Emulation.setEmulatedMedia",{media:t.type||""})}),"#emulateMediaType")},h,{kind:"method",name:"#emulateMediaType",static:!1,private:!0,access:{has:e=>#Ye in e,get:e=>e.#Ye},metadata:k},null,b),Gr(this,m={value:Qr((async function(e,t){t.active&&await e.send("Emulation.setGeolocationOverride",t.geoLocation?{longitude:t.geoLocation.longitude,latitude:t.geoLocation.latitude,accuracy:t.geoLocation.accuracy}:void 0)}),"#setGeolocation")},f,{kind:"method",name:"#setGeolocation",static:!1,private:!0,access:{has:e=>#Ze in e,get:e=>e.#Ze},metadata:k},null,b),Gr(this,g={value:Qr((async function(e,t){t.active&&await e.send("Emulation.setDefaultBackgroundColorOverride",{color:t.color})}),"#setDefaultBackgroundColor")},y,{kind:"method",name:"#setDefaultBackgroundColor",static:!1,private:!0,access:{has:e=>#et in e,get:e=>e.#et},metadata:k},null,b),Gr(this,v={value:Qr((async function(e,t){t.active&&await e.send("Emulation.setScriptExecutionDisabled",{value:!t.javaScriptEnabled})}),"#setJavaScriptEnabled")},w,{kind:"method",name:"#setJavaScriptEnabled",static:!1,private:!0,access:{has:e=>#tt in e,get:e=>e.#tt},metadata:k},null,b),k&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:k})}#xe=Ur(this,b);#rt=!1;#it=!1;#nt=[];#st=new Jr({active:!1},this,this.#ze);#at=new Jr({active:!1},this,this.#Ue);#ot=new Jr({active:!1},this,this.#Ge);#ct=new Jr({active:!1},this,this.#Qe);#lt=new Jr({active:!1},this,this.#Je);#dt=new Jr({active:!1},this,this.#Xe);#ut=new Jr({active:!1},this,this.#Ye);#ht=new Jr({active:!1},this,this.#Ze);#pt=new Jr({active:!1},this,this.#et);#ft=new Jr({javaScriptEnabled:!0,active:!1},this,this.#tt);#mt=new Set;constructor(e){this.#xe=e}updateClient(e){this.#xe=e,this.#mt.delete(e)}registerState(e){this.#nt.push(e)}clients(){return[this.#xe,...Array.from(this.#mt)]}async registerSpeculativeSession(e){this.#mt.add(e),e.once(Bt.Disconnected,(()=>{this.#mt.delete(e)})),Promise.all(this.#nt.map((e=>e.sync().catch(yt))))}get javascriptEnabled(){return this.#ft.state.javaScriptEnabled}async emulateViewport(e){const t=this.#st.state;if(!e&&!t.active)return!1;await this.#st.setState(e?{viewport:e,active:!0}:{active:!1});const r=e?.isMobile||!1,i=e?.hasTouch||!1,n=this.#rt!==r||this.#it!==i;return this.#rt=r,this.#it=i,n}get#ze(){return t.value}async emulateIdleState(e){await this.#at.setState({active:!0,overrides:e})}get#Ue(){return i.value}get#Ge(){return s.value}async emulateTimezone(e){await this.#ot.setState({timezoneId:e,active:!0})}get#Qe(){return o.value}async emulateVisionDeficiency(e){const t=new Set(["none","achromatopsia","blurredVision","deuteranopia","protanopia","tritanopia"]);nt(!e||t.has(e),`Unsupported vision deficiency: ${e}`),await this.#ct.setState({active:!0,visionDeficiency:e})}get#Je(){return l.value}async emulateCPUThrottling(e){nt(null===e||e>=1,"Throttling rate should be greater or equal to 1"),await this.#lt.setState({active:!0,factor:e??void 0})}get#Xe(){return u.value}async emulateMediaFeatures(e){if(Array.isArray(e))for(const t of e){const e=t.name;nt(/^(?:prefers-(?:color-scheme|reduced-motion)|color-gamut)$/.test(e),"Unsupported media feature: "+e)}await this.#dt.setState({active:!0,mediaFeatures:e})}get#Ye(){return p.value}async emulateMediaType(e){nt("screen"===e||"print"===e||void 0===(e??void 0),"Unsupported media type: "+e),await this.#ut.setState({type:e,active:!0})}get#Ze(){return m.value}async setGeolocation(e){const{longitude:t,latitude:r,accuracy:i=0}=e;if(t<-180||t>180)throw new Error(`Invalid longitude "${t}": precondition -180 <= LONGITUDE <= 180 failed.`);if(r<-90||r>90)throw new Error(`Invalid latitude "${r}": precondition -90 <= LATITUDE <= 90 failed.`);if(i<0)throw new Error(`Invalid accuracy "${i}": precondition 0 <= ACCURACY failed.`);await this.#ht.setState({active:!0,geoLocation:{longitude:t,latitude:r,accuracy:i}})}get#et(){return g.value}async resetDefaultBackgroundColor(){await this.#pt.setState({active:!0,color:void 0})}async setTransparentBackgroundColor(){await this.#pt.setState({active:!0,color:{r:0,g:0,b:0,a:0}})}get#tt(){return v.value}async setJavaScriptEnabled(e){await this.#ft.setState({active:!0,javaScriptEnabled:e})}}})();
/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Yr extends it{#C;#yt=new Map;#gt=new Map;#wt=new Map;#vt;#bt;#kt=new WeakMap;#St=jt.create();#Ct=new Set;constructor(e,t,r){super(),this.#C=e,this.#vt=r,this.#bt=t,this.#C.on("Target.targetCreated",this.#Tt),this.#C.on("Target.targetDestroyed",this.#Et),this.#C.on(Bt.SessionDetached,this.#It),this.setupAttachmentListeners(this.#C)}setupAttachmentListeners(e){const t=t=>this.#xt(e,t);nt(!this.#kt.has(e)),this.#kt.set(e,t),e.on("Target.attachedToTarget",t)}#It=e=>{this.removeSessionListeners(e),this.#wt.delete(e.id())};removeSessionListeners(e){this.#kt.has(e)&&(e.off("Target.attachedToTarget",this.#kt.get(e)),this.#kt.delete(e))}getAvailableTargets(){return this.#gt}getChildTargets(e){return new Set}dispose(){this.#C.off("Target.targetCreated",this.#Tt),this.#C.off("Target.targetDestroyed",this.#Et)}async initialize(){await this.#C.send("Target.setDiscoverTargets",{discover:!0,filter:[{}]}),this.#Ct=new Set(this.#yt.keys()),await this.#St.valueOrThrow()}#Tt=async e=>{if(this.#yt.has(e.targetInfo.targetId))return;if(this.#yt.set(e.targetInfo.targetId,e.targetInfo),"browser"===e.targetInfo.type&&e.targetInfo.attached){const t=this.#bt(e.targetInfo,void 0);return t._initialize(),this.#gt.set(e.targetInfo.targetId,t),void this.#Ft(t._targetId)}const t=this.#bt(e.targetInfo,void 0);!this.#vt||this.#vt(t)?(t._initialize(),this.#gt.set(e.targetInfo.targetId,t),this.emit("targetAvailable",t),this.#Ft(t._targetId)):this.#Ft(e.targetInfo.targetId)};#Et=e=>{this.#yt.delete(e.targetId),this.#Ft(e.targetId);const t=this.#gt.get(e.targetId);t&&(this.emit("targetGone",t),this.#gt.delete(e.targetId))};#xt=async(e,t)=>{const r=t.targetInfo,i=this.#C.session(t.sessionId);if(!i)throw new Error(`Session ${t.sessionId} was not created.`);const n=this.#gt.get(r.targetId);nt(n,`Target ${r.targetId} is missing`),i._setTarget(n),this.setupAttachmentListeners(i),this.#wt.set(i.id(),this.#gt.get(r.targetId)),e.emit(Bt.Ready,i)};#Ft(e){this.#Ct.delete(e),0===this.#Ct.size&&this.#St.resolve()}}
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Zr=Symbol("_isElementHandle"),ei=new Map;
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function ti(e){let t=e.toString();try{new Function(`(${t})`)}catch(e){if(e.message.includes("Refused to evaluate a string as JavaScript because 'unsafe-eval' is not an allowed source of script in the following Content Security Policy directive"))return t;let r="function ";t.startsWith("async ")&&(r=`async ${r}`,t=t.substring(6)),t=`${r}${t}`;try{new Function(`(${t})`)}catch{throw new Error("Passed function cannot be serialized!")}}return t}const ri=(e,t)=>{let r=ti(e);for(const[e,i]of Object.entries(t))r=r.replace(new RegExp(`PLACEHOLDER\\(\\s*(?:'${e}'|"${e}")\\s*\\)`,"g"),`(${i})`);return(e=>{let t=ei.get(e);return t||(t=new Function(`return ${e}`)(),ei.set(e,t),t)})(r)};
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var ii=self&&self.__addDisposableResource||function(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if("function"!=typeof i)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t},ni=self&&self.__disposeResources||function(e){return function(t){function r(r){t.error=t.hasError?new e(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}return function e(){for(;t.stack.length;){var i=t.stack.pop();try{var n=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(n).then(e,(function(t){return r(t),e()}))}catch(e){r(e)}}if(t.hasError)throw t.error}()}}("function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i});const si=20;async function*ai(e,t){const r={stack:[],error:void 0,hasError:!1};try{const i=ii(r,await e.evaluateHandle((async(e,t)=>{const r=[];for(;r.length<t;){const t=await e.next();if(t.done)break;r.push(t.value)}return r}),t),!1),n=await i.getProperties(),s=n.values();return ii(r,new tt,!1).defer((()=>{for(const e of s){const t={stack:[],error:void 0,hasError:!1};try{ii(t,e,!1)[Ze]()}catch(e){t.error=e,t.hasError=!0}finally{ni(t)}}})),yield*s,0===n.size}catch(e){r.error=e,r.hasError=!0}finally{ni(r)}}async function*oi(e){const t={stack:[],error:void 0,hasError:!1};try{const r=ii(t,await e.evaluateHandle((e=>async function*(){yield*e}())),!1);yield*async function*(e){let t=si;for(;!(yield*ai(e,t));)t<<=1}(r)}catch(e){t.error=e,t.hasError=!0}finally{ni(t)}}
/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class ci{static create=e=>new ci(e);#_t;constructor(e){this.#_t=e}async get(e){return await this.#_t(e)}}
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var li=self&&self.__addDisposableResource||function(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if("function"!=typeof i)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t},di=self&&self.__disposeResources||function(e){return function(t){function r(r){t.error=t.hasError?new e(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}return function e(){for(;t.stack.length;){var i=t.stack.pop();try{var n=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(n).then(e,(function(t){return r(t),e()}))}catch(e){r(e)}}if(t.hasError)throw t.error}()}}("function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i});class ui{static querySelectorAll;static querySelector;static get _querySelector(){if(this.querySelector)return this.querySelector;if(!this.querySelectorAll)throw new Error("Cannot create default `querySelector`.");return this.querySelector=ri((async(e,t,r)=>{const i=PLACEHOLDER("querySelectorAll")(e,t,r);for await(const e of i)return e;return null}),{querySelectorAll:ti(this.querySelectorAll)})}static get _querySelectorAll(){if(this.querySelectorAll)return this.querySelectorAll;if(!this.querySelector)throw new Error("Cannot create default `querySelectorAll`.");return this.querySelectorAll=ri((async function*(e,t,r){const i=PLACEHOLDER("querySelector"),n=await i(e,t,r);n&&(yield n)}),{querySelector:ti(this.querySelector)})}static async*queryAll(e,t){const r={stack:[],error:void 0,hasError:!1};try{const i=li(r,await e.evaluateHandle(this._querySelectorAll,t,ci.create((e=>e.puppeteerUtil))),!1);yield*oi(i)}catch(e){r.error=e,r.hasError=!0}finally{di(r)}}static async queryOne(e,t){const r={stack:[],error:void 0,hasError:!1};try{const i=li(r,await e.evaluateHandle(this._querySelector,t,ci.create((e=>e.puppeteerUtil))),!1);return Zr in i?i.move():null}catch(e){r.error=e,r.hasError=!0}finally{di(r)}}static async waitFor(e,t,r){const i={stack:[],error:void 0,hasError:!1};try{let n;const s=li(i,await(async()=>{if(Zr in e)return n=e.frame,await n.isolatedRealm().adoptHandle(e);n=e})(),!1),{visible:a=!1,hidden:o=!1,timeout:c,signal:l}=r,d=r.polling??(a||o?"raf":"mutation");try{const e={stack:[],error:void 0,hasError:!1};try{l?.throwIfAborted();const r=li(e,await n.isolatedRealm().waitForFunction((async(e,t,r,i,n)=>{const s=e.createFunction(t),a=await s(i??document,r,e);return e.checkVisibility(a,n)}),{polling:d,root:s,timeout:c,signal:l},ci.create((e=>e.puppeteerUtil)),ti(this._querySelector),t,s,!!a||!o&&void 0),!1);if(l?.aborted)throw l.reason;return Zr in r?await n.mainRealm().transferHandle(r):null}catch(t){e.error=t,e.hasError=!0}finally{di(e)}}catch(e){if(!Gt(e))throw e;if("AbortError"===e.name)throw e;throw e.message=`Waiting for selector \`${t}\` failed: ${e.message}`,e}}catch(e){i.error=e,i.hasError=!0}finally{di(i)}}}class hi{static async*map(e,t){for await(const r of e)yield await t(r)}static async*flatMap(e,t){for await(const r of e)yield*t(r)}static async collect(e){const t=[];for await(const r of e)t.push(r);return t}static async first(e){for await(const t of e)return t}}
/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const pi=e=>e.replace(/ +/g," ").trim(),fi=/\[\s*(?<attribute>\w+)\s*=\s*(?<quote>"|')(?<value>\\.|.*?(?=\k<quote>))\k<quote>\s*\]/g;class mi extends ui{static querySelector=async(e,t,{ariaQuerySelector:r})=>await r(e,t);static async*queryAll(e,t){const{name:r,role:i}=(e=>{const t={},r=e.replace(fi,((e,r,i,n)=>(r=r.trim(),nt((e=>["name","role"].includes(e))(r),`Unknown aria attribute "${r}" in selector`),t[r]=pi(n),"")));return r&&!t.name&&(t.name=pi(r)),t})(t);yield*e.queryAXTree(r,i)}static queryOne=async(e,t)=>await hi.first(this.queryAll(e,t))??null}
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class yi extends ui{static querySelector=(e,t,{cssQuerySelector:r})=>r(e,t);static querySelectorAll=(e,t,{cssQuerySelectorAll:r})=>r(e,t)}const gi=new
/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */
class{#Dt=!1;#Pt=new Set;append(e){this.#Rt((()=>{this.#Pt.add(e)}))}pop(e){this.#Rt((()=>{this.#Pt.delete(e)}))}inject(e,t=!1){(this.#Dt||t)&&e(this.#_t()),this.#Dt=!1}#Rt(e){e(),this.#Dt=!0}#_t(){return`(() => {\n      const module = {};\n      "use strict";var g=Object.defineProperty;var X=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var Y=Object.prototype.hasOwnProperty;var l=(t,e)=>{for(var r in e)g(t,r,{get:e[r],enumerable:!0})},J=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of B(e))!Y.call(t,n)&&n!==r&&g(t,n,{get:()=>e[n],enumerable:!(o=X(e,n))||o.enumerable});return t};var z=t=>J(g({},"__esModule",{value:!0}),t);var pe={};l(pe,{default:()=>he});module.exports=z(pe);var N=class extends Error{constructor(e,r){super(e,r),this.name=this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}},p=class extends N{};var c=class t{static create(e){return new t(e)}static async race(e){let r=new Set;try{let o=e.map(n=>n instanceof t?(n.#n&&r.add(n),n.valueOrThrow()):n);return await Promise.race(o)}finally{for(let o of r)o.reject(new Error("Timeout cleared"))}}#e=!1;#r=!1;#o;#t;#a=new Promise(e=>{this.#t=e});#n;#i;constructor(e){e&&e.timeout>0&&(this.#i=new p(e.message),this.#n=setTimeout(()=>{this.reject(this.#i)},e.timeout))}#l(e){clearTimeout(this.#n),this.#o=e,this.#t()}resolve(e){this.#r||this.#e||(this.#e=!0,this.#l(e))}reject(e){this.#r||this.#e||(this.#r=!0,this.#l(e))}resolved(){return this.#e}finished(){return this.#e||this.#r}value(){return this.#o}#s;valueOrThrow(){return this.#s||(this.#s=(async()=>{if(await this.#a,this.#r)throw this.#o;return this.#o})()),this.#s}};var L=new Map,F=t=>{let e=L.get(t);return e||(e=new Function(\`return \${t}\`)(),L.set(t,e),e)};var x={};l(x,{ariaQuerySelector:()=>G,ariaQuerySelectorAll:()=>b});var G=(t,e)=>globalThis.__ariaQuerySelector(t,e),b=async function*(t,e){yield*await globalThis.__ariaQuerySelectorAll(t,e)};var E={};l(E,{cssQuerySelector:()=>K,cssQuerySelectorAll:()=>Z});var K=(t,e)=>t.querySelector(e),Z=function(t,e){return t.querySelectorAll(e)};var A={};l(A,{customQuerySelectors:()=>P});var v=class{#e=new Map;register(e,r){if(!r.queryOne&&r.queryAll){let o=r.queryAll;r.queryOne=(n,i)=>{for(let s of o(n,i))return s;return null}}else if(r.queryOne&&!r.queryAll){let o=r.queryOne;r.queryAll=(n,i)=>{let s=o(n,i);return s?[s]:[]}}else if(!r.queryOne||!r.queryAll)throw new Error("At least one query method must be defined.");this.#e.set(e,{querySelector:r.queryOne,querySelectorAll:r.queryAll})}unregister(e){this.#e.delete(e)}get(e){return this.#e.get(e)}clear(){this.#e.clear()}},P=new v;var R={};l(R,{pierceQuerySelector:()=>ee,pierceQuerySelectorAll:()=>te});var ee=(t,e)=>{let r=null,o=n=>{let i=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT);do{let s=i.currentNode;s.shadowRoot&&o(s.shadowRoot),!(s instanceof ShadowRoot)&&s!==n&&!r&&s.matches(e)&&(r=s)}while(!r&&i.nextNode())};return t instanceof Document&&(t=t.documentElement),o(t),r},te=(t,e)=>{let r=[],o=n=>{let i=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT);do{let s=i.currentNode;s.shadowRoot&&o(s.shadowRoot),!(s instanceof ShadowRoot)&&s!==n&&s.matches(e)&&r.push(s)}while(i.nextNode())};return t instanceof Document&&(t=t.documentElement),o(t),r};var u=(t,e)=>{if(!t)throw new Error(e)};var y=class{#e;#r;#o;#t;constructor(e,r){this.#e=e,this.#r=r}async start(){let e=this.#t=c.create(),r=await this.#e();if(r){e.resolve(r);return}this.#o=new MutationObserver(async()=>{let o=await this.#e();o&&(e.resolve(o),await this.stop())}),this.#o.observe(this.#r,{childList:!0,subtree:!0,attributes:!0})}async stop(){u(this.#t,"Polling never started."),this.#t.finished()||this.#t.reject(new Error("Polling stopped")),this.#o&&(this.#o.disconnect(),this.#o=void 0)}result(){return u(this.#t,"Polling never started."),this.#t.valueOrThrow()}},w=class{#e;#r;constructor(e){this.#e=e}async start(){let e=this.#r=c.create(),r=await this.#e();if(r){e.resolve(r);return}let o=async()=>{if(e.finished())return;let n=await this.#e();if(!n){window.requestAnimationFrame(o);return}e.resolve(n),await this.stop()};window.requestAnimationFrame(o)}async stop(){u(this.#r,"Polling never started."),this.#r.finished()||this.#r.reject(new Error("Polling stopped"))}result(){return u(this.#r,"Polling never started."),this.#r.valueOrThrow()}},T=class{#e;#r;#o;#t;constructor(e,r){this.#e=e,this.#r=r}async start(){let e=this.#t=c.create(),r=await this.#e();if(r){e.resolve(r);return}this.#o=setInterval(async()=>{let o=await this.#e();o&&(e.resolve(o),await this.stop())},this.#r)}async stop(){u(this.#t,"Polling never started."),this.#t.finished()||this.#t.reject(new Error("Polling stopped")),this.#o&&(clearInterval(this.#o),this.#o=void 0)}result(){return u(this.#t,"Polling never started."),this.#t.valueOrThrow()}};var _={};l(_,{PCombinator:()=>H,pQuerySelector:()=>fe,pQuerySelectorAll:()=>$});var a=class{static async*map(e,r){for await(let o of e)yield await r(o)}static async*flatMap(e,r){for await(let o of e)yield*r(o)}static async collect(e){let r=[];for await(let o of e)r.push(o);return r}static async first(e){for await(let r of e)return r}};var C={};l(C,{textQuerySelectorAll:()=>m});var re=new Set(["checkbox","image","radio"]),oe=t=>t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement||t instanceof HTMLInputElement&&!re.has(t.type),ne=new Set(["SCRIPT","STYLE"]),f=t=>!ne.has(t.nodeName)&&!document.head?.contains(t),I=new WeakMap,j=t=>{for(;t;)I.delete(t),t instanceof ShadowRoot?t=t.host:t=t.parentNode},W=new WeakSet,se=new MutationObserver(t=>{for(let e of t)j(e.target)}),d=t=>{let e=I.get(t);if(e||(e={full:"",immediate:[]},!f(t)))return e;let r="";if(oe(t))e.full=t.value,e.immediate.push(t.value),t.addEventListener("input",o=>{j(o.target)},{once:!0,capture:!0});else{for(let o=t.firstChild;o;o=o.nextSibling){if(o.nodeType===Node.TEXT_NODE){e.full+=o.nodeValue??"",r+=o.nodeValue??"";continue}r&&e.immediate.push(r),r="",o.nodeType===Node.ELEMENT_NODE&&(e.full+=d(o).full)}r&&e.immediate.push(r),t instanceof Element&&t.shadowRoot&&(e.full+=d(t.shadowRoot).full),W.has(t)||(se.observe(t,{childList:!0,characterData:!0,subtree:!0}),W.add(t))}return I.set(t,e),e};var m=function*(t,e){let r=!1;for(let o of t.childNodes)if(o instanceof Element&&f(o)){let n;o.shadowRoot?n=m(o.shadowRoot,e):n=m(o,e);for(let i of n)yield i,r=!0}r||t instanceof Element&&f(t)&&d(t).full.includes(e)&&(yield t)};var k={};l(k,{checkVisibility:()=>le,pierce:()=>S,pierceAll:()=>O});var ie=["hidden","collapse"],le=(t,e)=>{if(!t)return e===!1;if(e===void 0)return t;let r=t.nodeType===Node.TEXT_NODE?t.parentElement:t,o=window.getComputedStyle(r),n=o&&!ie.includes(o.visibility)&&!ae(r);return e===n?t:!1};function ae(t){let e=t.getBoundingClientRect();return e.width===0||e.height===0}var ce=t=>"shadowRoot"in t&&t.shadowRoot instanceof ShadowRoot;function*S(t){ce(t)?yield t.shadowRoot:yield t}function*O(t){t=S(t).next().value,yield t;let e=[document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT)];for(let r of e){let o;for(;o=r.nextNode();)o.shadowRoot&&(yield o.shadowRoot,e.push(document.createTreeWalker(o.shadowRoot,NodeFilter.SHOW_ELEMENT)))}}var Q={};l(Q,{xpathQuerySelectorAll:()=>q});var q=function*(t,e,r=-1){let n=(t.ownerDocument||document).evaluate(e,t,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE),i=[],s;for(;(s=n.iterateNext())&&(i.push(s),!(r&&i.length===r)););for(let h=0;h<i.length;h++)s=i[h],yield s,delete i[h]};var ue=/[-\\w\\P{ASCII}*]/,H=(r=>(r.Descendent=">>>",r.Child=">>>>",r))(H||{}),V=t=>"querySelectorAll"in t,M=class{#e;#r=[];#o=void 0;elements;constructor(e,r){this.elements=[e],this.#e=r,this.#t()}async run(){if(typeof this.#o=="string")switch(this.#o.trimStart()){case":scope":this.#t();break}for(;this.#o!==void 0;this.#t()){let e=this.#o;typeof e=="string"?e[0]&&ue.test(e[0])?this.elements=a.flatMap(this.elements,async function*(r){V(r)&&(yield*r.querySelectorAll(e))}):this.elements=a.flatMap(this.elements,async function*(r){if(!r.parentElement){if(!V(r))return;yield*r.querySelectorAll(e);return}let o=0;for(let n of r.parentElement.children)if(++o,n===r)break;yield*r.parentElement.querySelectorAll(\`:scope>:nth-child(\${o})\${e}\`)}):this.elements=a.flatMap(this.elements,async function*(r){switch(e.name){case"text":yield*m(r,e.value);break;case"xpath":yield*q(r,e.value);break;case"aria":yield*b(r,e.value);break;default:let o=P.get(e.name);if(!o)throw new Error(\`Unknown selector type: \${e.name}\`);yield*o.querySelectorAll(r,e.value)}})}}#t(){if(this.#r.length!==0){this.#o=this.#r.shift();return}if(this.#e.length===0){this.#o=void 0;return}let e=this.#e.shift();switch(e){case">>>>":{this.elements=a.flatMap(this.elements,S),this.#t();break}case">>>":{this.elements=a.flatMap(this.elements,O),this.#t();break}default:this.#r=e,this.#t();break}}},D=class{#e=new WeakMap;calculate(e,r=[]){if(e===null)return r;e instanceof ShadowRoot&&(e=e.host);let o=this.#e.get(e);if(o)return[...o,...r];let n=0;for(let s=e.previousSibling;s;s=s.previousSibling)++n;let i=this.calculate(e.parentNode,[n]);return this.#e.set(e,i),[...i,...r]}},U=(t,e)=>{if(t.length+e.length===0)return 0;let[r=-1,...o]=t,[n=-1,...i]=e;return r===n?U(o,i):r<n?-1:1},de=async function*(t){let e=new Set;for await(let o of t)e.add(o);let r=new D;yield*[...e.values()].map(o=>[o,r.calculate(o)]).sort(([,o],[,n])=>U(o,n)).map(([o])=>o)},$=function(t,e){let r=JSON.parse(e);if(r.some(o=>{let n=0;return o.some(i=>(typeof i=="string"?++n:n=0,n>1))}))throw new Error("Multiple deep combinators found in sequence.");return de(a.flatMap(r,o=>{let n=new M(t,o);return n.run(),n.elements}))},fe=async function(t,e){for await(let r of $(t,e))return r;return null};var me=Object.freeze({...x,...A,...R,..._,...C,...k,...Q,...E,Deferred:c,createFunction:F,createTextContent:d,IntervalPoller:T,isSuitableNodeForTextMatching:f,MutationPoller:y,RAFPoller:w}),he=me;\n\n      ${[...this.#Pt].map((e=>`(${e})(module.exports.default);`)).join("")}\n      return module.exports.default;\n    })()`}};
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const wi=new class{#i=new Map;get(e){const t=this.#i.get(e);return t?t[1]:void 0}register(e,t){nt(!this.#i.has(e),`Cannot register over existing handler: ${e}`),nt(/^[a-zA-Z]+$/.test(e),"Custom query handler names may only contain [a-zA-Z]"),nt(t.queryAll||t.queryOne,"At least one query method must be implemented.");const r=class extends ui{static querySelectorAll=ri(((e,t,r)=>r.customQuerySelectors.get(PLACEHOLDER("name")).querySelectorAll(e,t)),{name:JSON.stringify(e)});static querySelector=ri(((e,t,r)=>r.customQuerySelectors.get(PLACEHOLDER("name")).querySelector(e,t)),{name:JSON.stringify(e)})},i=ri((e=>{e.customQuerySelectors.register(PLACEHOLDER("name"),{queryAll:PLACEHOLDER("queryAll"),queryOne:PLACEHOLDER("queryOne")})}),{name:JSON.stringify(e),queryAll:t.queryAll?ti(t.queryAll):String(void 0),queryOne:t.queryOne?ti(t.queryOne):String(void 0)}).toString();this.#i.set(e,[i,r]),gi.append(i)}unregister(e){const t=this.#i.get(e);if(!t)throw new Error(`Cannot unregister unknown handler: ${e}`);gi.pop(t[0]),this.#i.delete(e)}names(){return[...this.#i.keys()]}clear(){for(const[e]of this.#i)gi.pop(e);this.#i.clear()}};
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */
class vi extends ui{static querySelectorAll=(e,t,{pQuerySelectorAll:r})=>r(e,t);static querySelector=(e,t,{pQuerySelector:r})=>r(e,t)}var bi={attribute:/\[\s*(?:(?<namespace>\*|[-\w\P{ASCII}]*)\|)?(?<name>[-\w\P{ASCII}]+)\s*(?:(?<operator>\W?=)\s*(?<value>.+?)\s*(\s(?<caseSensitive>[iIsS]))?\s*)?\]/gu,id:/#(?<name>[-\w\P{ASCII}]+)/gu,class:/\.(?<name>[-\w\P{ASCII}]+)/gu,comma:/\s*,\s*/g,combinator:/\s*[\s>+~]\s*/g,"pseudo-element":/::(?<name>[-\w\P{ASCII}]+)(?:\((?<argument>¶*)\))?/gu,"pseudo-class":/:(?<name>[-\w\P{ASCII}]+)(?:\((?<argument>¶*)\))?/gu,universal:/(?:(?<namespace>\*|[-\w\P{ASCII}]*)\|)?\*/gu,type:/(?:(?<namespace>\*|[-\w\P{ASCII}]*)\|)?(?<name>[-\w\P{ASCII}]+)/gu},ki=new Set(["combinator","comma"]),Si=e=>{switch(e){case"pseudo-element":case"pseudo-class":return new RegExp(bi[e].source.replace("(?<argument>¶*)","(?<argument>.*)"),"gu");default:return bi[e]}};function Ci(e,t){let r=0,i="";for(;t<e.length;t++){const n=e[t];switch(n){case"(":++r;break;case")":--r}if(i+=n,0===r)return i}return i}var Ti=/(['"])([^\\\n]+?)\1/g,Ei=/\\./g;function Ii(e,t=bi){if(""===(e=e.trim()))return[];const r=[];e=(e=e.replace(Ei,((e,t)=>(r.push({value:e,offset:t}),"".repeat(e.length))))).replace(Ti,((e,t,i,n)=>(r.push({value:e,offset:n}),`${t}${"".repeat(i.length)}${t}`)));{let t,i=0;for(;(t=e.indexOf("(",i))>-1;){const n=Ci(e,t);r.push({value:n,offset:t}),e=`${e.substring(0,t)}(${"¶".repeat(n.length-2)})${e.substring(t+n.length)}`,i=t+n.length}}const i=function(e,t=bi){if(!e)return[];const r=[e];for(const[e,i]of Object.entries(t))for(let t=0;t<r.length;t++){const n=r[t];if("string"!=typeof n)continue;i.lastIndex=0;const s=i.exec(n);if(!s)continue;const a=s.index-1,o=[],c=s[0],l=n.slice(0,a+1);l&&o.push(l),o.push({...s.groups,type:e,content:c});const d=n.slice(a+c.length+1);d&&o.push(d),r.splice(t,1,...o)}let i=0;for(const e of r)switch(typeof e){case"string":throw new Error(`Unexpected sequence ${e} found at index ${i}`);case"object":i+=e.content.length,e.pos=[i-e.content.length,i],ki.has(e.type)&&(e.content=e.content.trim()||" ")}return r}(e,t),n=new Set;for(const e of r.reverse())for(const t of i){const{offset:r,value:i}=e;if(!(t.pos[0]<=r&&r+i.length<=t.pos[1]))continue;const{content:s}=t,a=r-t.pos[0];t.content=s.slice(0,a)+i+s.slice(a+i.length),t.content!==s&&n.add(t)}for(const e of n){const t=Si(e.type);if(!t)throw new Error(`Unknown token type: ${e.type}`);t.lastIndex=0;const r=t.exec(e.content);if(!r)throw new Error(`Unable to parse content for ${e.type}: ${e.content}`);Object.assign(e,r.groups)}return i}function*xi(e,t){switch(e.type){case"list":for(let t of e.list)yield*xi(t,e);break;case"complex":yield*xi(e.left,e),yield*xi(e.right,e);break;case"compound":yield*e.list.map((t=>[t,e]));break;default:yield[e,t]}}function Fi(e){let t;return t=Array.isArray(e)?e:[...xi(e)].map((([e])=>e)),t.map((e=>e.content)).join("")}
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */bi.nesting=/&/g,bi.combinator=/\s*(>>>>?|[\s>+~])\s*/g;const _i=/\\[\s\S]/g,Di=e=>e.length<=1?e:('"'!==e[0]&&"'"!==e[0]||!e.endsWith(e[0])||(e=e.slice(1,-1)),e.replace(_i,(e=>e[1])));
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */
const Pi={aria:mi,pierce:
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */
class extends ui{static querySelector=(e,t,{pierceQuerySelector:r})=>r(e,t);static querySelectorAll=(e,t,{pierceQuerySelectorAll:r})=>r(e,t)},xpath:
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */
class extends ui{static querySelectorAll=(e,t,{xpathQuerySelectorAll:r})=>r(e,t);static querySelector=(e,t,{xpathQuerySelectorAll:r})=>{for(const i of r(e,t,1))return i;return null}},text:
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */
class extends ui{static querySelectorAll=(e,t,{textQuerySelectorAll:r})=>r(e,t)}},Ri=["=","/"];function Mi(e){for(const t of[wi.names().map((e=>[e,wi.get(e)])),Object.entries(Pi)])for(const[r,i]of t)for(const t of Ri){const n=`${r}${t}`;if(e.startsWith(n))return{updatedSelector:e=e.slice(n.length),polling:"aria"===r?"raf":"mutation",QueryHandler:i}}try{const[t,r,i,n]=function(e){let t=!0,r=!1,i=!1;const n=Ii(e);if(0===n.length)return[[],t,i,!1];let s=[],a=[s];const o=[a],c=[];for(const e of n){switch(e.type){case"combinator":switch(e.content){case">>>":t=!1,c.length&&(s.push(Fi(c)),c.splice(0)),s=[],a.push(">>>"),a.push(s);continue;case">>>>":t=!1,c.length&&(s.push(Fi(c)),c.splice(0)),s=[],a.push(">>>>"),a.push(s);continue}break;case"pseudo-element":if(!e.name.startsWith("-p-"))break;t=!1,c.length&&(s.push(Fi(c)),c.splice(0));const n=e.name.slice(3);"aria"===n&&(r=!0),s.push({name:n,value:Di(e.argument??"")});continue;case"pseudo-class":i=!0;break;case"comma":c.length&&(s.push(Fi(c)),c.splice(0)),s=[],a=[s],o.push(a);continue}c.push(e)}return c.length&&s.push(Fi(c)),[o,t,i,r]}(e);return r?{updatedSelector:e,polling:i?"raf":"mutation",QueryHandler:yi}:{updatedSelector:JSON.stringify(t),polling:n?"raf":"mutation",QueryHandler:vi}}catch{return{updatedSelector:e,polling:"mutation",QueryHandler:yi}}}
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Ai,Oi=self&&self.__runInitializers||function(e,t,r){for(var i=arguments.length>2,n=0;n<t.length;n++)r=i?t[n].call(e,r):t[n].call(e);return i?r:void 0},qi=self&&self.__esDecorate||function(e,t,r,i,n,s){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,c=i.kind,l="getter"===c?"get":"setter"===c?"set":"value",d=!t&&e?i.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,i.name):{}),h=!1,p=r.length-1;p>=0;p--){var f={};for(var m in i)f[m]="access"===m?{}:i[m];for(var m in i.access)f.access[m]=i.access[m];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(e||null))};var y=(0,r[p])("accessor"===c?{get:u.get,set:u.set}:u[l],f);if("accessor"===c){if(void 0===y)continue;if(null===y||"object"!=typeof y)throw new TypeError("Object expected");(o=a(y.get))&&(u.get=o),(o=a(y.set))&&(u.set=o),(o=a(y.init))&&n.unshift(o)}else(o=a(y))&&("field"===c?n.unshift(o):u[l]=o)}d&&Object.defineProperty(d,i.name,u),h=!0},Ni=self&&self.__addDisposableResource||function(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if("function"!=typeof i)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t},Bi=self&&self.__disposeResources||function(e){return function(t){function r(r){t.error=t.hasError?new e(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}return function e(){for(;t.stack.length;){var i=t.stack.pop();try{var n=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(n).then(e,(function(t){return r(t),e()}))}catch(e){r(e)}}if(t.hasError)throw t.error}()}}("function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i});!function(e){e.FrameNavigated=Symbol("Frame.FrameNavigated"),e.FrameSwapped=Symbol("Frame.FrameSwapped"),e.LifecycleEvent=Symbol("Frame.LifecycleEvent"),e.FrameNavigatedWithinDocument=Symbol("Frame.FrameNavigatedWithinDocument"),e.FrameDetached=Symbol("Frame.FrameDetached"),e.FrameSwappedByActivation=Symbol("Frame.FrameSwappedByActivation")}(Ai||(Ai={}));const Li=sr((e=>`Attempted to use detached Frame '${e._id}'.`));let ji=(()=>{let e,t,r,i,n,s,a,o,c,l,d,u,h,p,f,m,y,g,w,v,b=it,k=[];return class extends b{static{const S="function"==typeof Symbol&&Symbol.metadata?Object.create(b[Symbol.metadata]??null):void 0;e=[Li],t=[Li],r=[Li],i=[Li],n=[Li],s=[Li],a=[Li],o=[Li],c=[Li],l=[Li],d=[Li],u=[Li],h=[Li],p=[Li],f=[Li],m=[Li],y=[Li],g=[Li],w=[Li],v=[Li],qi(this,null,e,{kind:"method",name:"frameElement",static:!1,private:!1,access:{has:e=>"frameElement"in e,get:e=>e.frameElement},metadata:S},null,k),qi(this,null,t,{kind:"method",name:"evaluateHandle",static:!1,private:!1,access:{has:e=>"evaluateHandle"in e,get:e=>e.evaluateHandle},metadata:S},null,k),qi(this,null,r,{kind:"method",name:"evaluate",static:!1,private:!1,access:{has:e=>"evaluate"in e,get:e=>e.evaluate},metadata:S},null,k),qi(this,null,i,{kind:"method",name:"locator",static:!1,private:!1,access:{has:e=>"locator"in e,get:e=>e.locator},metadata:S},null,k),qi(this,null,n,{kind:"method",name:"$",static:!1,private:!1,access:{has:e=>"$"in e,get:e=>e.$},metadata:S},null,k),qi(this,null,s,{kind:"method",name:"$$",static:!1,private:!1,access:{has:e=>"$$"in e,get:e=>e.$$},metadata:S},null,k),qi(this,null,a,{kind:"method",name:"$eval",static:!1,private:!1,access:{has:e=>"$eval"in e,get:e=>e.$eval},metadata:S},null,k),qi(this,null,o,{kind:"method",name:"$$eval",static:!1,private:!1,access:{has:e=>"$$eval"in e,get:e=>e.$$eval},metadata:S},null,k),qi(this,null,c,{kind:"method",name:"waitForSelector",static:!1,private:!1,access:{has:e=>"waitForSelector"in e,get:e=>e.waitForSelector},metadata:S},null,k),qi(this,null,l,{kind:"method",name:"waitForFunction",static:!1,private:!1,access:{has:e=>"waitForFunction"in e,get:e=>e.waitForFunction},metadata:S},null,k),qi(this,null,d,{kind:"method",name:"content",static:!1,private:!1,access:{has:e=>"content"in e,get:e=>e.content},metadata:S},null,k),qi(this,null,u,{kind:"method",name:"addScriptTag",static:!1,private:!1,access:{has:e=>"addScriptTag"in e,get:e=>e.addScriptTag},metadata:S},null,k),qi(this,null,h,{kind:"method",name:"addStyleTag",static:!1,private:!1,access:{has:e=>"addStyleTag"in e,get:e=>e.addStyleTag},metadata:S},null,k),qi(this,null,p,{kind:"method",name:"click",static:!1,private:!1,access:{has:e=>"click"in e,get:e=>e.click},metadata:S},null,k),qi(this,null,f,{kind:"method",name:"focus",static:!1,private:!1,access:{has:e=>"focus"in e,get:e=>e.focus},metadata:S},null,k),qi(this,null,m,{kind:"method",name:"hover",static:!1,private:!1,access:{has:e=>"hover"in e,get:e=>e.hover},metadata:S},null,k),qi(this,null,y,{kind:"method",name:"select",static:!1,private:!1,access:{has:e=>"select"in e,get:e=>e.select},metadata:S},null,k),qi(this,null,g,{kind:"method",name:"tap",static:!1,private:!1,access:{has:e=>"tap"in e,get:e=>e.tap},metadata:S},null,k),qi(this,null,w,{kind:"method",name:"type",static:!1,private:!1,access:{has:e=>"type"in e,get:e=>e.type},metadata:S},null,k),qi(this,null,v,{kind:"method",name:"title",static:!1,private:!1,access:{has:e=>"title"in e,get:e=>e.title},metadata:S},null,k),S&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:S})}_id=Oi(this,k);_parentId;_name;_hasStartedLoading=!1;constructor(){super()}#Mt;#At(){return this.#Mt||(this.#Mt=this.mainRealm().evaluateHandle((()=>document))),this.#Mt}clearDocumentHandle(){this.#Mt=void 0}async frameElement(){const e={stack:[],error:void 0,hasError:!1};try{const t=this.parentFrame();if(!t)return null;const r=Ni(e,await t.isolatedRealm().evaluateHandle((()=>document.querySelectorAll("iframe,frame"))),!1);for await(const e of oi(r)){const t={stack:[],error:void 0,hasError:!1};try{const r=Ni(t,e,!1),i=await r.contentFrame();if(i?._id===this._id)return r.move()}catch(e){t.error=e,t.hasError=!0}finally{Bi(t)}}return null}catch(t){e.error=t,e.hasError=!0}finally{Bi(e)}}async evaluateHandle(e,...t){return e=vt(this.evaluateHandle.name,e),await this.mainRealm().evaluateHandle(e,...t)}async evaluate(e,...t){return e=vt(this.evaluate.name,e),await this.mainRealm().evaluate(e,...t)}locator(e){return"string"==typeof e?yr.create(this,e):hr.create(this,e)}async $(e){const t=await this.#At();return await t.$(e)}async $$(e,t){const r=await this.#At();return await r.$$(e,t)}async $eval(e,t,...r){t=vt(this.$eval.name,t);const i=await this.#At();return await i.$eval(e,t,...r)}async $$eval(e,t,...r){t=vt(this.$$eval.name,t);const i=await this.#At();return await i.$$eval(e,t,...r)}async waitForSelector(e,t={}){const{updatedSelector:r,QueryHandler:i,polling:n}=Mi(e);return await i.waitFor(this,r,{polling:n,...t})}async waitForFunction(e,t={},...r){return await this.mainRealm().waitForFunction(e,t,...r)}async content(){return await this.evaluate((()=>{let e="";for(const t of document.childNodes)if(t===document.documentElement)e+=document.documentElement.outerHTML;else e+=(new XMLSerializer).serializeToString(t);return e}))}async setFrameContent(e){return await this.evaluate((e=>{document.open(),document.write(e),document.close()}),e)}name(){return this._name||""}isDetached(){return this.detached}get disposed(){return this.detached}async addScriptTag(e){let{content:t="",type:r}=e;const{path:i}=e;if(+!!e.url+ +!!i+ +!!t!=1)throw new Error("Exactly one of `url`, `path`, or `content` must be specified.");if(i){const e=await Tt();t=await e.readFile(i,"utf8"),t+=`//# sourceURL=${i.replace(/\n/g,"")}`}return r=r??"text/javascript",await this.mainRealm().transferHandle(await this.isolatedRealm().evaluateHandle((async({url:e,id:t,type:r,content:i})=>await new Promise(((n,s)=>{const a=document.createElement("script");a.type=r,a.text=i,a.addEventListener("error",(e=>{s(new Error(e.message??"Could not load script"))}),{once:!0}),t&&(a.id=t),e?(a.src=e,a.addEventListener("load",(()=>{n(a)}),{once:!0}),document.head.appendChild(a)):(document.head.appendChild(a),n(a))}))),{...e,type:r,content:t}))}async addStyleTag(e){let{content:t=""}=e;const{path:r}=e;if(+!!e.url+ +!!r+ +!!t!=1)throw new Error("Exactly one of `url`, `path`, or `content` must be specified.");if(r){const i=await Tt();t=await i.readFile(r,"utf8"),t+="/*# sourceURL="+r.replace(/\n/g,"")+"*/",e.content=t}return await this.mainRealm().transferHandle(await this.isolatedRealm().evaluateHandle((async({url:e,content:t})=>await new Promise(((r,i)=>{let n;if(e){const t=document.createElement("link");t.rel="stylesheet",t.href=e,n=t}else n=document.createElement("style"),n.appendChild(document.createTextNode(t));return n.addEventListener("load",(()=>{r(n)}),{once:!0}),n.addEventListener("error",(e=>{i(new Error(e.message??"Could not load style"))}),{once:!0}),document.head.appendChild(n),n}))),e))}async click(e,t={}){const r={stack:[],error:void 0,hasError:!1};try{const i=Ni(r,await this.$(e),!1);nt(i,`No element found for selector: ${e}`),await i.click(t),await i.dispose()}catch(e){r.error=e,r.hasError=!0}finally{Bi(r)}}async focus(e){const t={stack:[],error:void 0,hasError:!1};try{const r=Ni(t,await this.$(e),!1);nt(r,`No element found for selector: ${e}`),await r.focus()}catch(e){t.error=e,t.hasError=!0}finally{Bi(t)}}async hover(e){const t={stack:[],error:void 0,hasError:!1};try{const r=Ni(t,await this.$(e),!1);nt(r,`No element found for selector: ${e}`),await r.hover()}catch(e){t.error=e,t.hasError=!0}finally{Bi(t)}}async select(e,...t){const r={stack:[],error:void 0,hasError:!1};try{const i=Ni(r,await this.$(e),!1);return nt(i,`No element found for selector: ${e}`),await i.select(...t)}catch(e){r.error=e,r.hasError=!0}finally{Bi(r)}}async tap(e){const t={stack:[],error:void 0,hasError:!1};try{const r=Ni(t,await this.$(e),!1);nt(r,`No element found for selector: ${e}`),await r.tap()}catch(e){t.error=e,t.hasError=!0}finally{Bi(t)}}async type(e,t,r){const i={stack:[],error:void 0,hasError:!1};try{const n=Ni(i,await this.$(e),!1);nt(n,`No element found for selector: ${e}`),await n.type(t,r)}catch(e){i.error=e,i.hasError=!0}finally{Bi(i)}}async title(){return await this.isolatedRealm().evaluate((()=>document.title))}}})();
/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Hi{#E;#Ot;#qt=new WeakMap;constructor(e,t,r){this.#E=t,this.#Ot=r,this.#qt.set(e,t)}get id(){return this.#E}get source(){return this.#Ot}getIdForFrame(e){return this.#qt.get(e)}setIdForFrame(e,t){this.#qt.set(e,t)}}
/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class $i{id;name;constructor(e,t){this.id=e,this.name=t}}class Ki{#xe;#Nt;#E;#pe=!1;#Bt=this.#Lt.bind(this);#jt=new Set;devices=[];constructor(e,t,r){this.#xe=e,this.#Nt=t,this.#E=r.id,this.#xe.on("DeviceAccess.deviceRequestPrompted",this.#Bt),this.#xe.on("Target.detachedFromTarget",(()=>{this.#xe=null})),this.#Lt(r)}#Lt(e){if(e.id===this.#E)for(const t of e.devices){if(this.devices.some((e=>e.id===t.id)))continue;const e=new $i(t.id,t.name);this.devices.push(e);for(const t of this.#jt)t.filter(e)&&t.promise.resolve(e)}}async waitForDevice(e,t={}){for(const t of this.devices)if(e(t))return t;const{timeout:r=this.#Nt.timeout()}=t,i=jt.create({message:`Waiting for \`DeviceRequestPromptDevice\` failed: ${r}ms exceeded`,timeout:r}),n={filter:e,promise:i};this.#jt.add(n);try{return await i.valueOrThrow()}finally{this.#jt.delete(n)}}async select(e){return nt(null!==this.#xe,"Cannot select device through detached session!"),nt(this.devices.includes(e),"Cannot select unknown device!"),nt(!this.#pe,"Cannot select DeviceRequestPrompt which is already handled!"),this.#xe.off("DeviceAccess.deviceRequestPrompted",this.#Bt),this.#pe=!0,await this.#xe.send("DeviceAccess.selectPrompt",{id:this.#E,deviceId:e.id})}async cancel(){return nt(null!==this.#xe,"Cannot cancel prompt through detached session!"),nt(!this.#pe,"Cannot cancel DeviceRequestPrompt which is already handled!"),this.#xe.off("DeviceAccess.deviceRequestPrompted",this.#Bt),this.#pe=!0,await this.#xe.send("DeviceAccess.cancelPrompt",{id:this.#E})}}class Vi{#xe;#Nt;#Ht=new Set;constructor(e,t){this.#xe=e,this.#Nt=t,this.#xe.on("DeviceAccess.deviceRequestPrompted",(e=>{this.#$t(e)})),this.#xe.on("Target.detachedFromTarget",(()=>{this.#xe=null}))}async waitForDevicePrompt(e={}){nt(null!==this.#xe,"Cannot wait for device prompt through detached session!");let t;0===this.#Ht.size&&(t=this.#xe.send("DeviceAccess.enable"));const{timeout:r=this.#Nt.timeout()}=e,i=jt.create({message:`Waiting for \`DeviceRequestPrompt\` failed: ${r}ms exceeded`,timeout:r});this.#Ht.add(i);try{const[e]=await Promise.all([i.valueOrThrow(),t]);return e}finally{this.#Ht.delete(i)}}#$t(e){if(!this.#Ht.size)return;nt(null!==this.#xe);const t=new Ki(this.#xe,this.#Nt,e);for(const e of this.#Ht)e.resolve(t);this.#Ht.clear()}}
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Wi=self&&self.__runInitializers||function(e,t,r){for(var i=arguments.length>2,n=0;n<t.length;n++)r=i?t[n].call(e,r):t[n].call(e);return i?r:void 0},zi=self&&self.__esDecorate||function(e,t,r,i,n,s){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,c=i.kind,l="getter"===c?"get":"setter"===c?"set":"value",d=!t&&e?i.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,i.name):{}),h=!1,p=r.length-1;p>=0;p--){var f={};for(var m in i)f[m]="access"===m?{}:i[m];for(var m in i.access)f.access[m]=i.access[m];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(e||null))};var y=(0,r[p])("accessor"===c?{get:u.get,set:u.set}:u[l],f);if("accessor"===c){if(void 0===y)continue;if(null===y||"object"!=typeof y)throw new TypeError("Object expected");(o=a(y.get))&&(u.get=o),(o=a(y.set))&&(u.set=o),(o=a(y.init))&&n.unshift(o)}else(o=a(y))&&("field"===c?n.unshift(o):u[l]=o)}d&&Object.defineProperty(d,i.name,u),h=!0},Ui=self&&self.__addDisposableResource||function(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if("function"!=typeof i)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t},Gi=self&&self.__disposeResources||function(e){return function(t){function r(r){t.error=t.hasError?new e(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}return function e(){for(;t.stack.length;){var i=t.stack.pop();try{var n=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(n).then(e,(function(t){return r(t),e()}))}catch(e){r(e)}}if(t.hasError)throw t.error}()}}("function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i}),Qi=self&&self.__setFunctionName||function(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})};let Ji=(()=>{var e,t,r,i,n,s,a,o,c,l,d,u,h,p,f,m,y,g,w,v,b,k,S,C,T,E,I,x,F,_;let D,P,R,M,A,O,q,N,B,L,j,H,$,K,V,W,z,U,G,Q,J,X,Y,Z,ee,te,re,ie,ne,se,ae,oe,ce=Mr,le=[];return class de extends ce{static{const ue="function"==typeof Symbol&&Symbol.metadata?Object.create(ce[Symbol.metadata]??null):void 0;D=[sr(),(e=de).bindIsolatedHandle.bind(e)],P=[sr(),(t=de).bindIsolatedHandle.bind(t)],R=[sr(),(r=de).bindIsolatedHandle.bind(r)],M=[sr(),(i=de).bindIsolatedHandle.bind(i)],A=[sr()],O=[(n=de).bindIsolatedHandle.bind(n)],N=[sr(),(s=de).bindIsolatedHandle.bind(s)],B=[sr(),(a=de).bindIsolatedHandle.bind(a)],L=[sr(),(o=de).bindIsolatedHandle.bind(o)],j=[sr(),(c=de).bindIsolatedHandle.bind(c)],H=[sr(),(l=de).bindIsolatedHandle.bind(l)],$=[sr(),(d=de).bindIsolatedHandle.bind(d)],K=[sr(),(u=de).bindIsolatedHandle.bind(u)],V=[sr(),(h=de).bindIsolatedHandle.bind(h)],W=[sr(),(p=de).bindIsolatedHandle.bind(p)],z=[sr(),(f=de).bindIsolatedHandle.bind(f)],U=[sr(),(m=de).bindIsolatedHandle.bind(m)],G=[sr(),(y=de).bindIsolatedHandle.bind(y)],Q=[sr(),(g=de).bindIsolatedHandle.bind(g)],J=[sr(),(w=de).bindIsolatedHandle.bind(w)],X=[sr(),(v=de).bindIsolatedHandle.bind(v)],Y=[sr(),(b=de).bindIsolatedHandle.bind(b)],Z=[sr(),(k=de).bindIsolatedHandle.bind(k)],ee=[sr(),(S=de).bindIsolatedHandle.bind(S)],te=[sr(),(C=de).bindIsolatedHandle.bind(C)],re=[sr(),(T=de).bindIsolatedHandle.bind(T)],ie=[sr(),(E=de).bindIsolatedHandle.bind(E)],ne=[sr(),(I=de).bindIsolatedHandle.bind(I)],se=[sr(),(x=de).bindIsolatedHandle.bind(x)],ae=[sr(),(F=de).bindIsolatedHandle.bind(F)],oe=[sr(),(_=de).bindIsolatedHandle.bind(_)],zi(this,null,D,{kind:"method",name:"getProperty",static:!1,private:!1,access:{has:e=>"getProperty"in e,get:e=>e.getProperty},metadata:ue},null,le),zi(this,null,P,{kind:"method",name:"getProperties",static:!1,private:!1,access:{has:e=>"getProperties"in e,get:e=>e.getProperties},metadata:ue},null,le),zi(this,null,R,{kind:"method",name:"jsonValue",static:!1,private:!1,access:{has:e=>"jsonValue"in e,get:e=>e.jsonValue},metadata:ue},null,le),zi(this,null,M,{kind:"method",name:"$",static:!1,private:!1,access:{has:e=>"$"in e,get:e=>e.$},metadata:ue},null,le),zi(this,null,A,{kind:"method",name:"$$",static:!1,private:!1,access:{has:e=>"$$"in e,get:e=>e.$$},metadata:ue},null,le),zi(this,q={value:Qi((async function(e){return await this.#Kt(e)}),"#$$")},O,{kind:"method",name:"#$$",static:!1,private:!0,access:{has:e=>#Vt in e,get:e=>e.#Vt},metadata:ue},null,le),zi(this,null,N,{kind:"method",name:"waitForSelector",static:!1,private:!1,access:{has:e=>"waitForSelector"in e,get:e=>e.waitForSelector},metadata:ue},null,le),zi(this,null,B,{kind:"method",name:"isVisible",static:!1,private:!1,access:{has:e=>"isVisible"in e,get:e=>e.isVisible},metadata:ue},null,le),zi(this,null,L,{kind:"method",name:"isHidden",static:!1,private:!1,access:{has:e=>"isHidden"in e,get:e=>e.isHidden},metadata:ue},null,le),zi(this,null,j,{kind:"method",name:"toElement",static:!1,private:!1,access:{has:e=>"toElement"in e,get:e=>e.toElement},metadata:ue},null,le),zi(this,null,H,{kind:"method",name:"clickablePoint",static:!1,private:!1,access:{has:e=>"clickablePoint"in e,get:e=>e.clickablePoint},metadata:ue},null,le),zi(this,null,$,{kind:"method",name:"hover",static:!1,private:!1,access:{has:e=>"hover"in e,get:e=>e.hover},metadata:ue},null,le),zi(this,null,K,{kind:"method",name:"click",static:!1,private:!1,access:{has:e=>"click"in e,get:e=>e.click},metadata:ue},null,le),zi(this,null,V,{kind:"method",name:"drag",static:!1,private:!1,access:{has:e=>"drag"in e,get:e=>e.drag},metadata:ue},null,le),zi(this,null,W,{kind:"method",name:"dragEnter",static:!1,private:!1,access:{has:e=>"dragEnter"in e,get:e=>e.dragEnter},metadata:ue},null,le),zi(this,null,z,{kind:"method",name:"dragOver",static:!1,private:!1,access:{has:e=>"dragOver"in e,get:e=>e.dragOver},metadata:ue},null,le),zi(this,null,U,{kind:"method",name:"drop",static:!1,private:!1,access:{has:e=>"drop"in e,get:e=>e.drop},metadata:ue},null,le),zi(this,null,G,{kind:"method",name:"dragAndDrop",static:!1,private:!1,access:{has:e=>"dragAndDrop"in e,get:e=>e.dragAndDrop},metadata:ue},null,le),zi(this,null,Q,{kind:"method",name:"select",static:!1,private:!1,access:{has:e=>"select"in e,get:e=>e.select},metadata:ue},null,le),zi(this,null,J,{kind:"method",name:"tap",static:!1,private:!1,access:{has:e=>"tap"in e,get:e=>e.tap},metadata:ue},null,le),zi(this,null,X,{kind:"method",name:"touchStart",static:!1,private:!1,access:{has:e=>"touchStart"in e,get:e=>e.touchStart},metadata:ue},null,le),zi(this,null,Y,{kind:"method",name:"touchMove",static:!1,private:!1,access:{has:e=>"touchMove"in e,get:e=>e.touchMove},metadata:ue},null,le),zi(this,null,Z,{kind:"method",name:"touchEnd",static:!1,private:!1,access:{has:e=>"touchEnd"in e,get:e=>e.touchEnd},metadata:ue},null,le),zi(this,null,ee,{kind:"method",name:"focus",static:!1,private:!1,access:{has:e=>"focus"in e,get:e=>e.focus},metadata:ue},null,le),zi(this,null,te,{kind:"method",name:"type",static:!1,private:!1,access:{has:e=>"type"in e,get:e=>e.type},metadata:ue},null,le),zi(this,null,re,{kind:"method",name:"press",static:!1,private:!1,access:{has:e=>"press"in e,get:e=>e.press},metadata:ue},null,le),zi(this,null,ie,{kind:"method",name:"boundingBox",static:!1,private:!1,access:{has:e=>"boundingBox"in e,get:e=>e.boundingBox},metadata:ue},null,le),zi(this,null,ne,{kind:"method",name:"boxModel",static:!1,private:!1,access:{has:e=>"boxModel"in e,get:e=>e.boxModel},metadata:ue},null,le),zi(this,null,se,{kind:"method",name:"screenshot",static:!1,private:!1,access:{has:e=>"screenshot"in e,get:e=>e.screenshot},metadata:ue},null,le),zi(this,null,ae,{kind:"method",name:"isIntersectingViewport",static:!1,private:!1,access:{has:e=>"isIntersectingViewport"in e,get:e=>e.isIntersectingViewport},metadata:ue},null,le),zi(this,null,oe,{kind:"method",name:"scrollIntoView",static:!1,private:!1,access:{has:e=>"scrollIntoView"in e,get:e=>e.scrollIntoView},metadata:ue},null,le),ue&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:ue})}isolatedHandle=Wi(this,le);static bindIsolatedHandle(e,t){return async function(...t){if(this.realm===this.frame.isolatedRealm())return await e.call(this,...t);let r;this.isolatedHandle?r=this.isolatedHandle:this.isolatedHandle=r=await this.frame.isolatedRealm().adoptHandle(this);const i=await e.call(r,...t);return i===r?this:i instanceof Mr?await this.realm.transferHandle(i):(Array.isArray(i)&&await Promise.all(i.map((async(e,t,r)=>{e instanceof Mr&&(r[t]=await this.realm.transferHandle(e))}))),i instanceof Map&&await Promise.all([...i.entries()].map((async([e,t])=>{t instanceof Mr&&i.set(e,await this.realm.transferHandle(t))}))),i)}}handle;constructor(e){super(),this.handle=e,this[Zr]=!0}get id(){return this.handle.id}get disposed(){return this.handle.disposed}async getProperty(e){return await this.handle.getProperty(e)}async getProperties(){return await this.handle.getProperties()}async evaluate(e,...t){return e=vt(this.evaluate.name,e),await this.handle.evaluate(e,...t)}async evaluateHandle(e,...t){return e=vt(this.evaluateHandle.name,e),await this.handle.evaluateHandle(e,...t)}async jsonValue(){return await this.handle.jsonValue()}toString(){return this.handle.toString()}remoteObject(){return this.handle.remoteObject()}dispose(){return this.handle.dispose()}asElement(){return this}async $(e){const{updatedSelector:t,QueryHandler:r}=Mi(e);return await r.queryOne(this,t)}async $$(e,t){return!1===t?.isolate?await this.#Kt(e):await this.#Vt(e)}get#Vt(){return q.value}async#Kt(e){const{updatedSelector:t,QueryHandler:r}=Mi(e);return await hi.collect(r.queryAll(this,t))}async $eval(e,t,...r){const i={stack:[],error:void 0,hasError:!1};try{t=vt(this.$eval.name,t);const n=Ui(i,await this.$(e),!1);if(!n)throw new Error(`Error: failed to find element matching selector "${e}"`);return await n.evaluate(t,...r)}catch(e){i.error=e,i.hasError=!0}finally{Gi(i)}}async $$eval(e,t,...r){const i={stack:[],error:void 0,hasError:!1};try{t=vt(this.$$eval.name,t);const n=await this.$$(e),s=Ui(i,await this.evaluateHandle(((e,...t)=>t),...n),!1),[a]=await Promise.all([s.evaluate(t,...r),...n.map((e=>e.dispose()))]);return a}catch(e){i.error=e,i.hasError=!0}finally{Gi(i)}}async waitForSelector(e,t={}){const{updatedSelector:r,QueryHandler:i,polling:n}=Mi(e);return await i.waitFor(this,r,{polling:n,...t})}async#Wt(e){return await this.evaluate((async(e,t,r)=>Boolean(t.checkVisibility(e,r))),ci.create((e=>e.puppeteerUtil)),e)}async isVisible(){return await this.#Wt(!0)}async isHidden(){return await this.#Wt(!1)}async toElement(e){const t=await this.evaluate(((e,t)=>e.nodeName===t.toUpperCase()),e);if(!t)throw new Error(`Element is not a(n) \`${e}\` element`);return this}async clickablePoint(e){const t=await this.#zt();if(!t)throw new Error("Node is either not clickable or not an Element");return void 0!==e?{x:t.x+e.x,y:t.y+e.y}:{x:t.x+t.width/2,y:t.y+t.height/2}}async hover(){await this.scrollIntoViewIfNeeded();const{x:e,y:t}=await this.clickablePoint();await this.frame.page().mouse.move(e,t)}async click(e={}){await this.scrollIntoViewIfNeeded();const{x:t,y:r}=await this.clickablePoint(e.offset);await this.frame.page().mouse.click(t,r,e)}async drag(e){await this.scrollIntoViewIfNeeded();const t=this.frame.page();if(t.isDragInterceptionEnabled()){const r=await this.clickablePoint();return e instanceof de&&(e=await e.clickablePoint()),await t.mouse.drag(r,e)}try{t._isDragging||(t._isDragging=!0,await this.hover(),await t.mouse.down()),e instanceof de?await e.hover():await t.mouse.move(e.x,e.y)}catch(e){throw t._isDragging=!1,e}}async dragEnter(e={items:[],dragOperationsMask:1}){const t=this.frame.page();await this.scrollIntoViewIfNeeded();const r=await this.clickablePoint();await t.mouse.dragEnter(r,e)}async dragOver(e={items:[],dragOperationsMask:1}){const t=this.frame.page();await this.scrollIntoViewIfNeeded();const r=await this.clickablePoint();await t.mouse.dragOver(r,e)}async drop(e={items:[],dragOperationsMask:1}){const t=this.frame.page();if("items"in e){await this.scrollIntoViewIfNeeded();const r=await this.clickablePoint();await t.mouse.drop(r,e)}else await e.drag(this),t._isDragging=!1,await t.mouse.up()}async dragAndDrop(e,t){const r=this.frame.page();nt(r.isDragInterceptionEnabled(),"Drag Interception is not enabled!"),await this.scrollIntoViewIfNeeded();const i=await this.clickablePoint(),n=await e.clickablePoint();await r.mouse.dragAndDrop(i,n,t)}async select(...e){for(const t of e)nt(bt(t),'Values must be strings. Found value "'+t+'" of type "'+typeof t+'"');return await this.evaluate(((e,t)=>{const r=new Set(t);if(!(e instanceof HTMLSelectElement))throw new Error("Element is not a <select> element.");const i=new Set;if(e.multiple)for(const t of e.options)t.selected=r.has(t.value),t.selected&&i.add(t.value);else{for(const t of e.options)t.selected=!1;for(const t of e.options)if(r.has(t.value)){t.selected=!0,i.add(t.value);break}}return e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})),[...i.values()]}),e)}async tap(){await this.scrollIntoViewIfNeeded();const{x:e,y:t}=await this.clickablePoint();await this.frame.page().touchscreen.tap(e,t)}async touchStart(){await this.scrollIntoViewIfNeeded();const{x:e,y:t}=await this.clickablePoint();await this.frame.page().touchscreen.touchStart(e,t)}async touchMove(){await this.scrollIntoViewIfNeeded();const{x:e,y:t}=await this.clickablePoint();await this.frame.page().touchscreen.touchMove(e,t)}async touchEnd(){await this.scrollIntoViewIfNeeded(),await this.frame.page().touchscreen.touchEnd()}async focus(){await this.evaluate((e=>{if(!(e instanceof HTMLElement))throw new Error("Cannot focus non-HTMLElement");return e.focus()}))}async type(e,t){await this.focus(),await this.frame.page().keyboard.type(e,t)}async press(e,t){await this.focus(),await this.frame.page().keyboard.press(e,t)}async#zt(){const e=await this.evaluate((e=>e instanceof Element?[...e.getClientRects()].map((e=>({x:e.x,y:e.y,width:e.width,height:e.height}))):null));if(!e?.length)return null;await this.#Ut(e);let t,r=this.frame;for(;t=r?.parentFrame();){const i={stack:[],error:void 0,hasError:!1};try{const n=Ui(i,await r.frameElement(),!1);if(!n)throw new Error("Unsupported frame type");const s=await n.evaluate((e=>{if(0===e.getClientRects().length)return null;const t=e.getBoundingClientRect(),r=window.getComputedStyle(e);return{left:t.left+parseInt(r.paddingLeft,10)+parseInt(r.borderLeftWidth,10),top:t.top+parseInt(r.paddingTop,10)+parseInt(r.borderTopWidth,10)}}));if(!s)return null;for(const t of e)t.x+=s.left,t.y+=s.top;await n.#Ut(e),r=t}catch(e){i.error=e,i.hasError=!0}finally{Gi(i)}}const i=e.find((e=>e.width>=1&&e.height>=1));return i?{x:i.x,y:i.y,height:i.height,width:i.width}:null}async#Ut(e){const{documentWidth:t,documentHeight:r}=await this.frame.isolatedRealm().evaluate((()=>({documentWidth:document.documentElement.clientWidth,documentHeight:document.documentElement.clientHeight})));for(const i of e)Xi(i,t,r)}async boundingBox(){const e=await this.evaluate((e=>{if(!(e instanceof Element))return null;if(0===e.getClientRects().length)return null;const t=e.getBoundingClientRect();return{x:t.x,y:t.y,width:t.width,height:t.height}}));if(!e)return null;const t=await this.#Gt();return t?{x:e.x+t.x,y:e.y+t.y,height:e.height,width:e.width}:null}async boxModel(){const e=await this.evaluate((e=>{if(!(e instanceof Element))return null;if(0===e.getClientRects().length)return null;const t=e.getBoundingClientRect(),r=window.getComputedStyle(e),i={padding:{left:parseInt(r.paddingLeft,10),top:parseInt(r.paddingTop,10),right:parseInt(r.paddingRight,10),bottom:parseInt(r.paddingBottom,10)},margin:{left:-parseInt(r.marginLeft,10),top:-parseInt(r.marginTop,10),right:-parseInt(r.marginRight,10),bottom:-parseInt(r.marginBottom,10)},border:{left:parseInt(r.borderLeft,10),top:parseInt(r.borderTop,10),right:parseInt(r.borderRight,10),bottom:parseInt(r.borderBottom,10)}},n=[{x:t.left,y:t.top},{x:t.left+t.width,y:t.top},{x:t.left+t.width,y:t.top+t.bottom},{x:t.left,y:t.top+t.bottom}],s=a(n,i.border);return{content:a(s,i.padding),padding:s,border:n,margin:a(n,i.margin),width:t.width,height:t.height};function a(e,t){return[{x:e[0].x+t.left,y:e[0].y+t.top},{x:e[1].x-t.right,y:e[1].y+t.top},{x:e[2].x-t.right,y:e[2].y-t.bottom},{x:e[3].x+t.left,y:e[3].y-t.bottom}]}}));if(!e)return null;const t=await this.#Gt();if(!t)return null;for(const r of["content","padding","border","margin"])for(const i of e[r])i.x+=t.x,i.y+=t.y;return e}async#Gt(){const e={x:0,y:0};let t,r=this.frame;for(;t=r?.parentFrame();){const i={stack:[],error:void 0,hasError:!1};try{const n=Ui(i,await r.frameElement(),!1);if(!n)throw new Error("Unsupported frame type");const s=await n.evaluate((e=>{if(0===e.getClientRects().length)return null;const t=e.getBoundingClientRect(),r=window.getComputedStyle(e);return{left:t.left+parseInt(r.paddingLeft,10)+parseInt(r.borderLeftWidth,10),top:t.top+parseInt(r.paddingTop,10)+parseInt(r.borderTopWidth,10)}}));if(!s)return null;e.x+=s.left,e.y+=s.top,r=t}catch(e){i.error=e,i.hasError=!0}finally{Gi(i)}}return e}async screenshot(e={}){const{scrollIntoView:t=!0,clip:r}=e,i=this.frame.page();t&&await this.scrollIntoViewIfNeeded();const n=await this.#Qt(),[s,a]=await this.evaluate((()=>{if(!window.visualViewport)throw new Error("window.visualViewport is not supported.");return[window.visualViewport.pageLeft,window.visualViewport.pageTop]}));return n.x+=s,n.y+=a,r&&(n.x+=r.x,n.y+=r.y,n.height=r.height,n.width=r.width),await i.screenshot({...e,clip:n})}async#Qt(){const e=await this.boundingBox();return nt(e,"Node is either not visible or not an HTMLElement"),nt(0!==e.width,"Node has 0 width."),nt(0!==e.height,"Node has 0 height."),e}async assertConnectedElement(){const e=await this.evaluate((async e=>e.isConnected?e.nodeType!==Node.ELEMENT_NODE?"Node is not of type HTMLElement":void 0:"Node is detached from document"));if(e)throw new Error(e)}async scrollIntoViewIfNeeded(){await this.isIntersectingViewport({threshold:1})||await this.scrollIntoView()}async isIntersectingViewport(e={}){const t={stack:[],error:void 0,hasError:!1};try{await this.assertConnectedElement();const r=await this.#Jt(),i=Ui(t,r&&await r.#Xt(),!1);return await(i??this).evaluate((async(e,t)=>{const r=await new Promise((t=>{const r=new IntersectionObserver((e=>{t(e[0].intersectionRatio),r.disconnect()}));r.observe(e)}));return 1===t?1===r:r>t}),e.threshold??0)}catch(e){t.error=e,t.hasError=!0}finally{Gi(t)}}async scrollIntoView(){await this.assertConnectedElement(),await this.evaluate((async e=>{e.scrollIntoView({block:"center",inline:"center",behavior:"instant"})}))}async#Jt(){return await this.evaluate((e=>e instanceof SVGElement))?this:null}async#Xt(){return await this.evaluateHandle((e=>e instanceof SVGSVGElement?e:e.ownerSVGElement))}}})();function Xi(e,t,r){e.width=Math.max(e.x>=0?Math.min(t-e.x,e.width):Math.min(t,e.width+e.x),0),e.height=Math.max(e.y>=0?Math.min(r-e.y,e.height):Math.min(r,e.height+e.y),0)}
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function Yi(e){let t,r;if(e.exception){if(!("object"===e.exception.type&&"error"===e.exception.subtype||e.exception.objectId))return en(e.exception);{const i=Zi(e);t=i.name,r=i.message}}else t="Error",r=e.text;const i=r.split("\n").length,n=new Error(r);n.name=t;const s=n.stack.split("\n"),a=s.splice(0,i);if(s.shift(),e.stackTrace&&s.length<Error.stackTraceLimit)for(const t of e.stackTrace.callFrames.reverse()){if(wt.isPuppeteerURL(t.url)&&t.url!==wt.INTERNAL_URL){const e=wt.parse(t.url);s.unshift(`    at ${t.functionName||e.functionName} (${e.functionName} at ${e.siteString}, <anonymous>:${t.lineNumber}:${t.columnNumber})`)}else s.push(`    at ${t.functionName||"<anonymous>"} (${t.url}:${t.lineNumber}:${t.columnNumber})`);if(s.length>=Error.stackTraceLimit)break}return n.stack=[...a,...s].join("\n"),n}const Zi=e=>{let t,r="";const i=e.exception?.description?.split("\n    at ")??[],n=Math.min(e.stackTrace?.callFrames.length??0,i.length-1);return i.splice(-n,n),e.exception?.className&&(r=e.exception.className),t=i.join("\n"),r&&t.startsWith(`${r}: `)&&(t=t.slice(r.length+2)),{message:t,name:r}};function en(e){if(nt(!e.objectId,"Cannot extract value when objectId is given"),e.unserializableValue){if("bigint"===e.type)return BigInt(e.unserializableValue.replace("n",""));switch(e.unserializableValue){case"-0":return-0;case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error("Unsupported unserializable value: "+e.unserializableValue)}}return e.value}function tn(e,t,r){globalThis[t]||Object.assign(globalThis,{[t](...i){const n=globalThis[t];n.args??=new Map,n.callbacks??=new Map;const s=(n.lastSeq??0)+1;return n.lastSeq=s,n.args.set(s,i),globalThis[r+t](JSON.stringify({type:e,name:t,seq:s,args:i,isTrivial:!i.some((e=>e instanceof Node))})),new Promise(((e,t)=>{n.callbacks.set(s,{resolve(t){n.args.delete(s),e(t)},reject(e){n.args.delete(s),t(e)}})}))}})}const rn="puppeteer_";
/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */
class nn extends Mr{#e=!1;#Yt;#Zt;constructor(e,t){super(),this.#Zt=e,this.#Yt=t}get disposed(){return this.#e}get realm(){return this.#Zt}get client(){return this.realm.environment.client}async jsonValue(){if(!this.#Yt.objectId)return en(this.#Yt);const e=await this.evaluate((e=>e));if(void 0===e)throw new Error("Could not serialize referenced object");return e}asElement(){return null}async dispose(){this.#e||(this.#e=!0,await sn(this.client,this.#Yt))}toString(){if(!this.#Yt.objectId)return"JSHandle:"+en(this.#Yt);return"JSHandle@"+(this.#Yt.subtype||this.#Yt.type)}get id(){return this.#Yt.objectId}remoteObject(){return this.#Yt}async getProperties(){const e=await this.client.send("Runtime.getProperties",{objectId:this.#Yt.objectId,ownProperties:!0}),t=new Map;for(const r of e.result)r.enumerable&&r.value&&t.set(r.name,this.#Zt.createCdpHandle(r.value));return t}}async function sn(e,t){t.objectId&&await e.send("Runtime.releaseObject",{objectId:t.objectId}).catch((e=>{yt(e)}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var an=self&&self.__runInitializers||function(e,t,r){for(var i=arguments.length>2,n=0;n<t.length;n++)r=i?t[n].call(e,r):t[n].call(e);return i?r:void 0},on=self&&self.__esDecorate||function(e,t,r,i,n,s){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,c=i.kind,l="getter"===c?"get":"setter"===c?"set":"value",d=!t&&e?i.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,i.name):{}),h=!1,p=r.length-1;p>=0;p--){var f={};for(var m in i)f[m]="access"===m?{}:i[m];for(var m in i.access)f.access[m]=i.access[m];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(e||null))};var y=(0,r[p])("accessor"===c?{get:u.get,set:u.set}:u[l],f);if("accessor"===c){if(void 0===y)continue;if(null===y||"object"!=typeof y)throw new TypeError("Object expected");(o=a(y.get))&&(u.get=o),(o=a(y.set))&&(u.set=o),(o=a(y.init))&&n.unshift(o)}else(o=a(y))&&("field"===c?n.unshift(o):u[l]=o)}d&&Object.defineProperty(d,i.name,u),h=!0};const cn=new Set(["StaticText","InlineTextBox"]);let ln=(()=>{var e,t;let r,i,n,s,a=Ji,o=[];return class extends a{static{const c="function"==typeof Symbol&&Symbol.metadata?Object.create(a[Symbol.metadata]??null):void 0;r=[sr()],i=[sr(),(e=Ji).bindIsolatedHandle.bind(e)],n=[sr(),(t=Ji).bindIsolatedHandle.bind(t)],s=[sr()],on(this,null,r,{kind:"method",name:"contentFrame",static:!1,private:!1,access:{has:e=>"contentFrame"in e,get:e=>e.contentFrame},metadata:c},null,o),on(this,null,i,{kind:"method",name:"scrollIntoView",static:!1,private:!1,access:{has:e=>"scrollIntoView"in e,get:e=>e.scrollIntoView},metadata:c},null,o),on(this,null,n,{kind:"method",name:"uploadFile",static:!1,private:!1,access:{has:e=>"uploadFile"in e,get:e=>e.uploadFile},metadata:c},null,o),on(this,null,s,{kind:"method",name:"autofill",static:!1,private:!1,access:{has:e=>"autofill"in e,get:e=>e.autofill},metadata:c},null,o),c&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})}constructor(e,t){super(new nn(e,t)),an(this,o)}get realm(){return this.handle.realm}get client(){return this.handle.client}remoteObject(){return this.handle.remoteObject()}get#er(){return this.frame._frameManager}get frame(){return this.realm.environment}async contentFrame(){const e=await this.client.send("DOM.describeNode",{objectId:this.id});return"string"!=typeof e.node.frameId?null:this.#er.frame(e.node.frameId)}async scrollIntoView(){await this.assertConnectedElement();try{await this.client.send("DOM.scrollIntoViewIfNeeded",{objectId:this.id})}catch(e){yt(e),await super.scrollIntoView()}}async uploadFile(...e){const t=await this.evaluate((e=>e.multiple));let r;nt(e.length<=1||t,"Multiple file uploads only work with <input type=file multiple>");try{r=await import("path")}catch(e){if(e instanceof TypeError)throw new Error("JSHandle#uploadFile can only be used in Node-like environments.");throw e}const i=e.map((e=>r.win32.isAbsolute(e)||r.posix.isAbsolute(e)?e:r.resolve(e)));if(0===i.length)return void await this.evaluate((e=>{e.files=(new DataTransfer).files,e.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),e.dispatchEvent(new Event("change",{bubbles:!0}))}));const{node:{backendNodeId:n}}=await this.client.send("DOM.describeNode",{objectId:this.id});await this.client.send("DOM.setFileInputFiles",{objectId:this.id,files:i,backendNodeId:n})}async autofill(e){const t=(await this.client.send("DOM.describeNode",{objectId:this.handle.id})).node.backendNodeId,r=this.frame._id;await this.client.send("Autofill.trigger",{fieldId:t,frameId:r,card:e.creditCard})}async*queryAXTree(e,t){const{nodes:r}=await this.client.send("Accessibility.queryAXTree",{objectId:this.id,accessibleName:e,role:t}),i=r.filter((e=>!e.ignored&&(!!e.role&&!cn.has(e.role.value))));return yield*hi.map(i,(e=>this.realm.adoptBackendNode(e.backendDOMNodeId)))}}})();
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var dn=self&&self.__addDisposableResource||function(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if("function"!=typeof i)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t},un=self&&self.__disposeResources||function(e){return function(t){function r(r){t.error=t.hasError?new e(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}return function e(){for(;t.stack.length;){var i=t.stack.pop();try{var n=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(n).then(e,(function(t){return r(t),e()}))}catch(e){r(e)}}if(t.hasError)throw t.error}()}}("function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i});const hn=new qr("__ariaQuerySelector",mi.queryOne,""),pn=new qr("__ariaQuerySelectorAll",(async(e,t)=>{const r=mi.queryAll(e,t);return await e.realm.evaluateHandle(((...e)=>e),...await hi.collect(r))}),"");class fn extends it{#xe;#Zt;#E;#fe;#tr=new tt;constructor(e,t,r){super(),this.#xe=e,this.#Zt=r,this.#E=t.id,t.name&&(this.#fe=t.name);const i=this.#tr.use(new it(this.#xe));i.on("Runtime.bindingCalled",this.#rr.bind(this)),i.on("Runtime.executionContextDestroyed",(async e=>{e.executionContextId===this.#E&&this[Ze]()})),i.on("Runtime.executionContextsCleared",(async()=>{this[Ze]()})),i.on("Runtime.consoleAPICalled",this.#ir.bind(this)),i.on(Bt.Disconnected,(()=>{this[Ze]()}))}#nr=new Map;#g=new Ht;async#sr(e){const t={stack:[],error:void 0,hasError:!1};try{if(this.#nr.has(e.name))return;dn(t,await this.#g.acquire(),!1);try{await this.#xe.send("Runtime.addBinding",this.#fe?{name:rn+e.name,executionContextName:this.#fe}:{name:rn+e.name,executionContextId:this.#E}),await this.evaluate(tn,"internal",e.name,rn),this.#nr.set(e.name,e)}catch(e){if(e instanceof Error){if(e.message.includes("Execution context was destroyed"))return;if(e.message.includes("Cannot find context with specified id"))return}yt(e)}}catch(e){t.error=e,t.hasError=!0}finally{un(t)}}async#rr(e){if(e.executionContextId!==this.#E)return;let t;try{t=JSON.parse(e.payload)}catch{return}const{type:r,name:i,seq:n,args:s,isTrivial:a}=t;if("internal"===r)if(this.#nr.has(i))try{const e=this.#nr.get(i);await(e?.run(this,n,s,a))}catch(e){yt(e)}else this.emit("bindingcalled",e);else this.emit("bindingcalled",e)}get id(){return this.#E}#ir(e){e.executionContextId===this.#E&&this.emit("consoleapicalled",e)}#ar=!1;#or;get puppeteerUtil(){let e=Promise.resolve();return this.#ar||(e=Promise.all([this.#cr(hn),this.#cr(pn)]),this.#ar=!0),gi.inject((t=>{this.#or&&this.#or.then((e=>{e.dispose()})),this.#or=e.then((()=>this.evaluateHandle(t)))}),!this.#or),this.#or}async#cr(e){try{await this.#sr(e)}catch(e){yt(e)}}async evaluate(e,...t){return await this.#lr(!0,e,...t)}async evaluateHandle(e,...t){return await this.#lr(!1,e,...t)}async#lr(e,t,...r){const i=`//# sourceURL=${(e=>{if(Object.prototype.hasOwnProperty.call(e,gt))return e[gt]})(t)?.toString()??wt.INTERNAL_URL}`;if(bt(t)){const r=this.#E,n=t,s=_t.test(n)?n:`${n}\n${i}\n`,{exceptionDetails:a,result:o}=await this.#xe.send("Runtime.evaluate",{expression:s,contextId:r,returnByValue:e,awaitPromise:!0,userGesture:!0}).catch(mn);if(a)throw Yi(a);return e?en(o):this.#Zt.createCdpHandle(o)}const n=ti(t),s=_t.test(n)?n:`${n}\n${i}\n`;let a;try{a=this.#xe.send("Runtime.callFunctionOn",{functionDeclaration:s,executionContextId:this.#E,arguments:r.length?await Promise.all(r.map(async function(e){e instanceof ci&&(e=await e.get(this));if("bigint"==typeof e)return{unserializableValue:`${e.toString()}n`};if(Object.is(e,-0))return{unserializableValue:"-0"};if(Object.is(e,1/0))return{unserializableValue:"Infinity"};if(Object.is(e,-1/0))return{unserializableValue:"-Infinity"};if(Object.is(e,NaN))return{unserializableValue:"NaN"};const t=e&&(e instanceof nn||e instanceof ln)?e:null;if(t){if(t.realm!==this.#Zt)throw new Error("JSHandles can be evaluated only in the context they were created!");if(t.disposed)throw new Error("JSHandle is disposed!");return t.remoteObject().unserializableValue?{unserializableValue:t.remoteObject().unserializableValue}:t.remoteObject().objectId?{objectId:t.remoteObject().objectId}:{value:t.remoteObject().value}}return{value:e}}.bind(this))):[],returnByValue:e,awaitPromise:!0,userGesture:!0})}catch(e){throw e instanceof TypeError&&e.message.startsWith("Converting circular structure to JSON")&&(e.message+=" Recursive objects are not allowed."),e}const{exceptionDetails:o,result:c}=await a.catch(mn);if(o)throw Yi(o);return e?en(c):this.#Zt.createCdpHandle(c)}[Ze](){this.#tr.dispose(),this.emit("disposed",void 0)}}const mn=e=>{if(e.message.includes("Object reference chain is too long"))return{result:{type:"undefined"}};if(e.message.includes("Object couldn't be returned by value"))return{result:{type:"undefined"}};if(e.message.endsWith("Cannot find context with specified id")||e.message.endsWith("Inspected target navigated or closed"))throw new Error("Execution context was destroyed, most likely because of a navigation.");throw e};
/**
 * @license
 * Copyright 2018 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class yn{#dr;constructor(e){this.#dr=e}async snapshot(e={}){const{interestingOnly:t=!0,root:r=null}=e,{nodes:i}=await this.#dr.environment.client.send("Accessibility.getFullAXTree");let n;if(r){const{node:e}=await this.#dr.environment.client.send("DOM.describeNode",{objectId:r.id});n=e.backendNodeId}const s=gn.createTree(this.#dr,i);let a=s;if(n&&(a=s.find((e=>e.payload.backendDOMNodeId===n)),!a))return null;if(!t)return this.serializeTree(a)[0]??null;const o=new Set;return this.collectInterestingNodes(o,s,!1),o.has(a)?this.serializeTree(a,o)[0]??null:null}serializeTree(e,t){const r=[];for(const i of e.children)r.push(...this.serializeTree(i,t));if(t&&!t.has(e))return r;const i=e.serialize();return r.length&&(i.children=r),[i]}collectInterestingNodes(e,t,r){if(t.isInteresting(r)&&e.add(t),!t.isLeafNode()){r=r||t.isControl();for(const i of t.children)this.collectInterestingNodes(e,i,r)}}}class gn{payload;children=[];#ur=!1;#hr=!1;#pr=!1;#fr=!1;#fe;#mr;#yr;#gr;#dr;constructor(e,t){this.payload=t,this.#fe=this.payload.name?this.payload.name.value:"",this.#mr=this.payload.role?this.payload.role.value:"Unknown",this.#yr=this.payload.ignored,this.#dr=e;for(const e of this.payload.properties||[])"editable"===e.name&&(this.#ur="richtext"===e.value.value,this.#hr=!0),"focusable"===e.name&&(this.#pr=e.value.value),"hidden"===e.name&&(this.#fr=e.value.value)}#wr(){return!this.#ur&&(!!this.#hr||("textbox"===this.#mr||"searchbox"===this.#mr))}#vr(){const e=this.#mr;return"LineBreak"===e||"text"===e||"InlineTextBox"===e||"StaticText"===e}#br(){if(void 0===this.#gr){this.#gr=!1;for(const e of this.children)if(e.#pr||e.#br()){this.#gr=!0;break}}return this.#gr}find(e){if(e(this))return this;for(const t of this.children){const r=t.find(e);if(r)return r}return null}isLeafNode(){if(!this.children.length)return!0;if(this.#wr()||this.#vr())return!0;switch(this.#mr){case"doc-cover":case"graphics-symbol":case"img":case"image":case"Meter":case"scrollbar":case"slider":case"separator":case"progressbar":return!0}return!this.#br()&&(!(!this.#pr||!this.#fe)||!("heading"!==this.#mr||!this.#fe))}isControl(){switch(this.#mr){case"button":case"checkbox":case"ColorWell":case"combobox":case"DisclosureTriangle":case"listbox":case"menu":case"menubar":case"menuitem":case"menuitemcheckbox":case"menuitemradio":case"radio":case"scrollbar":case"searchbox":case"slider":case"spinbutton":case"switch":case"tab":case"textbox":case"tree":case"treeitem":return!0;default:return!1}}isInteresting(e){return"Ignored"!==this.#mr&&!this.#fr&&!this.#yr&&(!(!this.#pr&&!this.#ur)||(!!this.isControl()||!e&&(this.isLeafNode()&&!!this.#fe)))}serialize(){const e=new Map;for(const t of this.payload.properties||[])e.set(t.name.toLowerCase(),t.value.value);this.payload.name&&e.set("name",this.payload.name.value),this.payload.value&&e.set("value",this.payload.value.value),this.payload.description&&e.set("description",this.payload.description.value);const t={role:this.#mr,elementHandle:async()=>this.payload.backendDOMNodeId?await this.#dr.adoptBackendNode(this.payload.backendDOMNodeId):null},r=["name","value","description","keyshortcuts","roledescription","valuetext"];for(const n of r)e.has(n)&&(t[n]=(i=n,e.get(i)));var i;const n=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"],s=t=>e.get(t);for(const e of n){if("focused"===e&&"RootWebArea"===this.#mr)continue;s(e)&&(t[e]=s(e))}const a=["checked","pressed"];for(const r of a){if(!e.has(r))continue;const i=e.get(r);t[r]="mixed"===i?"mixed":"true"===i}const o=["level","valuemax","valuemin"],c=t=>e.get(t);for(const r of o)e.has(r)&&(t[r]=c(r));const l=["autocomplete","haspopup","invalid","orientation"],d=t=>e.get(t);for(const e of l){const r=d(e);r&&"false"!==r&&(t[e]=d(e))}return t}static createTree(e,t){const r=new Map;for(const i of t)r.set(i.nodeId,new gn(e,i));for(const e of r.values())for(const t of e.payload.childIds||[]){const i=r.get(t);i&&e.children.push(i)}return r.values().next().value}}
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var wn;!function(e){e.FrameAttached=Symbol("FrameManager.FrameAttached"),e.FrameNavigated=Symbol("FrameManager.FrameNavigated"),e.FrameDetached=Symbol("FrameManager.FrameDetached"),e.FrameSwapped=Symbol("FrameManager.FrameSwapped"),e.LifecycleEvent=Symbol("FrameManager.LifecycleEvent"),e.FrameNavigatedWithinDocument=Symbol("FrameManager.FrameNavigatedWithinDocument"),e.ConsoleApiCalled=Symbol("FrameManager.ConsoleApiCalled"),e.BindingCalled=Symbol("FrameManager.BindingCalled")}(wn||(wn={}));
/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */
class vn{#Zt;#kr;#Sr;#me;#le;#be;#f;#Cr=jt.create();#Tr;#Er;#Ir=[];constructor(e,t,r,...i){if(this.#Zt=e,this.#kr=t.polling,this.#Sr=t.root,this.#Er=t.signal,this.#Er?.addEventListener("abort",(()=>{this.terminate(this.#Er?.reason)}),{once:!0}),"string"==typeof r)this.#me=`() => {return (${r});}`;else this.#me=ti(r);this.#le=i,this.#Zt.taskManager.add(this),t.timeout&&(this.#f=new ut(`Waiting failed: ${t.timeout}ms exceeded`),this.#be=setTimeout((()=>{this.terminate(this.#f)}),t.timeout)),this.rerun()}get result(){return this.#Cr.valueOrThrow()}async rerun(){for(const e of this.#Ir)e.abort();this.#Ir.length=0;const e=new AbortController;this.#Ir.push(e);try{switch(this.#kr){case"raf":this.#Tr=await this.#Zt.evaluateHandle((({RAFPoller:e,createFunction:t},r,...i)=>{const n=t(r);return new e((()=>n(...i)))}),ci.create((e=>e.puppeteerUtil)),this.#me,...this.#le);break;case"mutation":this.#Tr=await this.#Zt.evaluateHandle((({MutationPoller:e,createFunction:t},r,i,...n)=>{const s=t(i);return new e((()=>s(...n)),r||document)}),ci.create((e=>e.puppeteerUtil)),this.#Sr,this.#me,...this.#le);break;default:this.#Tr=await this.#Zt.evaluateHandle((({IntervalPoller:e,createFunction:t},r,i,...n)=>{const s=t(i);return new e((()=>s(...n)),r)}),ci.create((e=>e.puppeteerUtil)),this.#kr,this.#me,...this.#le)}await this.#Tr.evaluate((e=>{e.start()}));const e=await this.#Tr.evaluateHandle((e=>e.result()));this.#Cr.resolve(e),await this.terminate()}catch(t){if(e.signal.aborted)return;const r=this.getBadError(t);r&&await this.terminate(r)}}async terminate(e){if(this.#Zt.taskManager.delete(this),clearTimeout(this.#be),e&&!this.#Cr.finished()&&this.#Cr.reject(e),this.#Tr)try{await this.#Tr.evaluateHandle((async e=>{await e.stop()})),this.#Tr&&(await this.#Tr.dispose(),this.#Tr=void 0)}catch{}}getBadError(e){if(Gt(e)){if(e.message.includes("Execution context is not available in detached frame"))return new Error("Waiting failed: Frame detached");if(e.message.includes("Execution context was destroyed"))return;if(e.message.includes("Cannot find context with specified id"))return;if(e.message.includes("AbortError: Actor 'MessageHandlerFrame' destroyed"))return;return e}return new Error("WaitTask failed with an error",{cause:e})}}class bn{#xr=new Set;add(e){this.#xr.add(e)}delete(e){this.#xr.delete(e)}terminateAll(e){for(const t of this.#xr)t.terminate(e);this.#xr.clear()}async rerunAll(){await Promise.all([...this.#xr].map((e=>e.rerun())))}}
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class kn{timeoutSettings;taskManager=new bn;constructor(e){this.timeoutSettings=e}async waitForFunction(e,t={},...r){const{polling:i="raf",timeout:n=this.timeoutSettings.timeout(),root:s,signal:a}=t;if("number"==typeof i&&i<0)throw new Error("Cannot poll with non-positive interval");const o=new vn(this,{polling:i,root:s,timeout:n,signal:a},e,...r);return await o.result}get disposed(){return this.#e}#e=!1;dispose(){this.#e=!0,this.taskManager.terminateAll(new Error("waitForFunction failed: frame got detached."))}[Ze](){this.dispose()}}
/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Sn extends kn{#Fr;#r=new it;#_r;constructor(e,t){super(t),this.#_r=e}get environment(){return this.#_r}get client(){return this.#_r.client}get emitter(){return this.#r}setContext(e){this.#Fr?.[Ze](),e.once("disposed",this.#Dr.bind(this)),e.on("consoleapicalled",this.#Pr.bind(this)),e.on("bindingcalled",this.#Rr.bind(this)),this.#Fr=e,this.#r.emit("context",e),this.taskManager.rerunAll()}#Dr(){this.#Fr=void 0,"clearDocumentHandle"in this.#_r&&this.#_r.clearDocumentHandle()}#Pr(e){this.#r.emit("consoleapicalled",e)}#Rr(e){this.#r.emit("bindingcalled",e)}hasContext(){return!!this.#Fr}get context(){return this.#Fr}#Mr(){if(this.disposed)throw new Error(`Execution context is not available in detached frame or worker "${this.environment.url()}" (are you trying to evaluate?)`);return this.#Fr}async#Ar(){return await Se(Mt(this.#r,"context").pipe(Je(Mt(this.#r,"disposed").pipe(Ce((()=>{throw new Error("Execution context was destroyed")}))),xt(this.timeoutSettings.timeout()))))}async evaluateHandle(e,...t){e=vt(this.evaluateHandle.name,e);let r=this.#Mr();return r||(r=await this.#Ar()),await r.evaluateHandle(e,...t)}async evaluate(e,...t){e=vt(this.evaluate.name,e);let r=this.#Mr();return r||(r=await this.#Ar()),await r.evaluate(e,...t)}async adoptBackendNode(e){let t=this.#Mr();t||(t=await this.#Ar());const{object:r}=await this.client.send("DOM.resolveNode",{backendNodeId:e,executionContextId:t.id});return this.createCdpHandle(r)}async adoptHandle(e){if(e.realm===this)return await e.evaluateHandle((e=>e));const t=await this.client.send("DOM.describeNode",{objectId:e.id});return await this.adoptBackendNode(t.node.backendNodeId)}async transferHandle(e){if(e.realm===this)return e;if(void 0===e.remoteObject().objectId)return e;const t=await this.client.send("DOM.describeNode",{objectId:e.remoteObject().objectId}),r=await this.adoptBackendNode(t.node.backendNodeId);return await e.dispose(),r}createCdpHandle(e){return"node"===e.subtype?new ln(this,e):new nn(this,e)}[Ze](){this.#Fr?.[Ze](),this.#r.emit("disposed",void 0),super[Ze](),this.#r.removeAllListeners()}}
/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Cn=Symbol("mainWorld"),Tn=Symbol("puppeteerWorld"),En=new Map([["load","load"],["domcontentloaded","DOMContentLoaded"],["networkidle0","networkIdle"],["networkidle2","networkAlmostIdle"]]);class In{#Or;#qr;#be;#Nr=null;#Pe=new tt;#Br;#Lr;#jr=jt.create();#Hr=jt.create();#$r=jt.create();#Kr;#Vr;#Wr;constructor(e,t,r,i){Array.isArray(r)?r=r.slice():"string"==typeof r&&(r=[r]),this.#Br=t._loaderId,this.#Or=r.map((e=>{const t=En.get(e);return nt(t,"Unknown value for options.waitUntil: "+e),t})),this.#qr=t,this.#be=i;this.#Pe.use(new it(t._frameManager)).on(wn.LifecycleEvent,this.#zr.bind(this));const n=this.#Pe.use(new it(t));n.on(Ai.FrameNavigatedWithinDocument,this.#Ur.bind(this)),n.on(Ai.FrameNavigated,this.#Gr.bind(this)),n.on(Ai.FrameSwapped,this.#Qr.bind(this)),n.on(Ai.FrameSwappedByActivation,this.#Qr.bind(this)),n.on(Ai.FrameDetached,this.#Jr.bind(this));const s=this.#Pe.use(new it(e));s.on(Fr.Request,this.#Xr.bind(this)),s.on(Fr.Response,this.#Yr.bind(this)),s.on(Fr.RequestFailed,this.#Zr.bind(this)),this.#Lr=jt.create({timeout:this.#be,message:`Navigation timeout of ${this.#be} ms exceeded`}),this.#zr()}#Xr(e){e.frame()===this.#qr&&e.isNavigationRequest()&&(this.#Nr=e,this.#Wr?.resolve(),this.#Wr=jt.create(),null!==e.response()&&this.#Wr?.resolve())}#Zr(e){this.#Nr?.id===e.id&&this.#Wr?.resolve()}#Yr(e){this.#Nr?.id===e.request().id&&this.#Wr?.resolve()}#Jr(e){this.#qr!==e?this.#zr():this.#Lr.resolve(new Error("Navigating frame was detached"))}async navigationResponse(){return await(this.#Wr?.valueOrThrow()),this.#Nr?this.#Nr.response():null}sameDocumentNavigationPromise(){return this.#jr.valueOrThrow()}newDocumentNavigationPromise(){return this.#$r.valueOrThrow()}lifecyclePromise(){return this.#Hr.valueOrThrow()}terminationPromise(){return this.#Lr.valueOrThrow()}#Ur(){this.#Kr=!0,this.#zr()}#Gr(e){if("BackForwardCacheRestore"===e)return this.#Qr();this.#zr()}#Qr(){this.#Vr=!0,this.#zr()}#zr(){(function e(t,r){for(const e of r)if(!t._lifecycleEvents.has(e))return!1;for(const i of t.childFrames())if(i._hasStartedLoading&&!e(i,r))return!1;return!0})(this.#qr,this.#Or)&&(this.#Hr.resolve(),this.#Kr&&this.#jr.resolve(void 0),(this.#Vr||this.#qr._loaderId!==this.#Br)&&this.#$r.resolve(void 0))}dispose(){this.#Pe.dispose(),this.#Lr.resolve(new Error("LifecycleWatcher disposed"))}}
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var xn=self&&self.__runInitializers||function(e,t,r){for(var i=arguments.length>2,n=0;n<t.length;n++)r=i?t[n].call(e,r):t[n].call(e);return i?r:void 0},Fn=self&&self.__esDecorate||function(e,t,r,i,n,s){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,c=i.kind,l="getter"===c?"get":"setter"===c?"set":"value",d=!t&&e?i.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,i.name):{}),h=!1,p=r.length-1;p>=0;p--){var f={};for(var m in i)f[m]="access"===m?{}:i[m];for(var m in i.access)f.access[m]=i.access[m];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(e||null))};var y=(0,r[p])("accessor"===c?{get:u.get,set:u.set}:u[l],f);if("accessor"===c){if(void 0===y)continue;if(null===y||"object"!=typeof y)throw new TypeError("Object expected");(o=a(y.get))&&(u.get=o),(o=a(y.set))&&(u.set=o),(o=a(y.init))&&n.unshift(o)}else(o=a(y))&&("field"===c?n.unshift(o):u[l]=o)}d&&Object.defineProperty(d,i.name,u),h=!0};let _n=(()=>{let e,t,r,i,n,s,a,o=ji,c=[];return class extends o{static{const l="function"==typeof Symbol&&Symbol.metadata?Object.create(o[Symbol.metadata]??null):void 0;Fn(this,null,e,{kind:"method",name:"goto",static:!1,private:!1,access:{has:e=>"goto"in e,get:e=>e.goto},metadata:l},null,c),Fn(this,null,t,{kind:"method",name:"waitForNavigation",static:!1,private:!1,access:{has:e=>"waitForNavigation"in e,get:e=>e.waitForNavigation},metadata:l},null,c),Fn(this,null,r,{kind:"method",name:"setContent",static:!1,private:!1,access:{has:e=>"setContent"in e,get:e=>e.setContent},metadata:l},null,c),Fn(this,null,i,{kind:"method",name:"addPreloadScript",static:!1,private:!1,access:{has:e=>"addPreloadScript"in e,get:e=>e.addPreloadScript},metadata:l},null,c),Fn(this,null,n,{kind:"method",name:"addExposedFunctionBinding",static:!1,private:!1,access:{has:e=>"addExposedFunctionBinding"in e,get:e=>e.addExposedFunctionBinding},metadata:l},null,c),Fn(this,null,s,{kind:"method",name:"removeExposedFunctionBinding",static:!1,private:!1,access:{has:e=>"removeExposedFunctionBinding"in e,get:e=>e.removeExposedFunctionBinding},metadata:l},null,c),Fn(this,null,a,{kind:"method",name:"waitForDevicePrompt",static:!1,private:!1,access:{has:e=>"waitForDevicePrompt"in e,get:e=>e.waitForDevicePrompt},metadata:l},null,c),l&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})}#ge=(xn(this,c),"");#ei=!1;#xe;_frameManager;_loaderId="";_lifecycleEvents=new Set;_id;_parentId;accessibility;worlds;constructor(e,t,r,i){super(),this._frameManager=e,this.#ge="",this._id=t,this._parentId=r,this.#ei=!1,this.#xe=i,this._loaderId="",this.worlds={[Cn]:new Sn(this,this._frameManager.timeoutSettings),[Tn]:new Sn(this,this._frameManager.timeoutSettings)},this.accessibility=new yn(this.worlds[Cn]),this.on(Ai.FrameSwappedByActivation,(()=>{this._onLoadingStarted(),this._onLoadingStopped()})),this.worlds[Cn].emitter.on("consoleapicalled",this.#ti.bind(this)),this.worlds[Cn].emitter.on("bindingcalled",this.#ri.bind(this))}#ti(e){this._frameManager.emit(wn.ConsoleApiCalled,[this.worlds[Cn],e])}#ri(e){this._frameManager.emit(wn.BindingCalled,[this.worlds[Cn],e])}_client(){return this.#xe}updateId(e){this._id=e}updateClient(e){this.#xe=e}page(){return this._frameManager.page()}isOOPFrame(){return this.#xe!==this._frameManager.client}async goto(e,t={}){const{referer:r=this._frameManager.networkManager.extraHTTPHeaders().referer,referrerPolicy:i=this._frameManager.networkManager.extraHTTPHeaders()["referer-policy"],waitUntil:n=["load"],timeout:s=this._frameManager.timeoutSettings.navigationTimeout()}=t;let a=!1;const o=new In(this._frameManager.networkManager,this,n,s);let c=await jt.race([async function(e,t,r,i,n){try{const s=await e.send("Page.navigate",{url:t,referrer:r,frameId:n,referrerPolicy:i});return a=!!s.loaderId,"net::ERR_HTTP_RESPONSE_CODE_FAILURE"===s.errorText?null:s.errorText?new Error(`${s.errorText} at ${t}`):null}catch(e){if(Gt(e))return e;throw e}}(this.#xe,e,r,i,this._id),o.terminationPromise()]);c||(c=await jt.race([o.terminationPromise(),a?o.newDocumentNavigationPromise():o.sameDocumentNavigationPromise()]));try{if(c)throw c;return await o.navigationResponse()}finally{o.dispose()}}async waitForNavigation(e={}){const{waitUntil:t=["load"],timeout:r=this._frameManager.timeoutSettings.navigationTimeout()}=e,i=new In(this._frameManager.networkManager,this,t,r),n=await jt.race([i.terminationPromise(),...e.ignoreSameDocumentNavigation?[]:[i.sameDocumentNavigationPromise()],i.newDocumentNavigationPromise()]);try{if(n)throw n;const e=await jt.race([i.terminationPromise(),i.navigationResponse()]);if(e instanceof Error)throw n;return e||null}finally{i.dispose()}}get client(){return this.#xe}mainRealm(){return this.worlds[Cn]}isolatedRealm(){return this.worlds[Tn]}async setContent(e,t={}){const{waitUntil:r=["load"],timeout:i=this._frameManager.timeoutSettings.navigationTimeout()}=t;await this.setFrameContent(e);const n=new In(this._frameManager.networkManager,this,r,i),s=await jt.race([n.terminationPromise(),n.lifecyclePromise()]);if(n.dispose(),s)throw s}url(){return this.#ge}parentFrame(){return this._frameManager._frameTree.parentFrame(this._id)||null}childFrames(){return this._frameManager._frameTree.childFrames(this._id)}#ii(){const e=this.page().mainFrame();return this.isOOPFrame()||null===e?this._frameManager._deviceRequestPromptManager(this.#xe):e._frameManager._deviceRequestPromptManager(this.#xe)}async addPreloadScript(e){if(!this.isOOPFrame()&&this!==this._frameManager.mainFrame())return;if(e.getIdForFrame(this))return;const{identifier:t}=await this.#xe.send("Page.addScriptToEvaluateOnNewDocument",{source:e.source});e.setIdForFrame(this,t)}async addExposedFunctionBinding(e){(this===this._frameManager.mainFrame()||this._hasStartedLoading)&&await Promise.all([this.#xe.send("Runtime.addBinding",{name:rn+e.name}),this.evaluate(e.initSource).catch(yt)])}async removeExposedFunctionBinding(e){(this===this._frameManager.mainFrame()||this._hasStartedLoading)&&await Promise.all([this.#xe.send("Runtime.removeBinding",{name:rn+e.name}),this.evaluate((e=>{globalThis[e]=void 0}),e.name).catch(yt)])}async waitForDevicePrompt(e={}){return await this.#ii().waitForDevicePrompt(e)}_navigated(e){this._name=e.name,this.#ge=`${e.url}${e.urlFragment||""}`}_navigatedWithinDocument(e){this.#ge=e}_onLifecycleEvent(e,t){"init"===t&&(this._loaderId=e,this._lifecycleEvents.clear()),this._lifecycleEvents.add(t)}_onLoadingStopped(){this._lifecycleEvents.add("DOMContentLoaded"),this._lifecycleEvents.add("load")}_onLoadingStarted(){this._hasStartedLoading=!0}get detached(){return this.#ei}[(e=[Li],t=[Li],r=[Li],i=[Li],n=[Li],s=[Li],a=[Li],Ze)](){this.#ei||(this.#ei=!0,this.worlds[Cn][Ze](),this.worlds[Tn][Ze]())}exposeFunction(){throw new pt}}})();
/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Dn{#ni=new Map;#si=new Map;#ai=new Map;#oi;#ci=!1;#li=new Map;getMainFrame(){return this.#oi}getById(e){return this.#ni.get(e)}waitForFrame(e){const t=this.getById(e);if(t)return Promise.resolve(t);const r=jt.create();return(this.#li.get(e)||new Set).add(r),r.valueOrThrow()}frames(){return Array.from(this.#ni.values())}addFrame(e){this.#ni.set(e._id,e),e._parentId?(this.#si.set(e._id,e._parentId),this.#ai.has(e._parentId)||this.#ai.set(e._parentId,new Set),this.#ai.get(e._parentId).add(e._id)):this.#oi&&!this.#ci||(this.#oi=e,this.#ci=!1),this.#li.get(e._id)?.forEach((t=>t.resolve(e)))}removeFrame(e){this.#ni.delete(e._id),this.#si.delete(e._id),e._parentId?this.#ai.get(e._parentId)?.delete(e._id):this.#ci=!0}childFrames(e){const t=this.#ai.get(e);return t?Array.from(t).map((e=>this.getById(e))).filter((e=>void 0!==e)):[]}parentFrame(e){const t=this.#si.get(e);return t?this.getById(t):void 0}}class Pn{_interceptionId;_failureText=null;_response=null;_fromMemoryCache=!1;_redirectChain=[];interception={enabled:!1,handled:!1,handlers:[],resolutionState:{action:Rn.None},requestOverrides:{},response:null,abortReason:null};constructor(){}continueRequestOverrides(){return nt(this.interception.enabled,"Request Interception is not enabled!"),this.interception.requestOverrides}responseForRequest(){return nt(this.interception.enabled,"Request Interception is not enabled!"),this.interception.response}abortErrorReason(){return nt(this.interception.enabled,"Request Interception is not enabled!"),this.interception.abortReason}interceptResolutionState(){return this.interception.enabled?this.interception.handled?{action:Rn.AlreadyHandled}:{...this.interception.resolutionState}:{action:Rn.Disabled}}isInterceptResolutionHandled(){return this.interception.handled}enqueueInterceptAction(e){this.interception.handlers.push(e)}async finalizeInterceptions(){await this.interception.handlers.reduce(((e,t)=>e.then(t)),Promise.resolve()),this.interception.handlers=[];const{action:e}=this.interceptResolutionState();switch(e){case"abort":return await this._abort(this.interception.abortReason);case"respond":if(null===this.interception.response)throw new Error("Response is missing for the interception");return await this._respond(this.interception.response);case"continue":return await this._continue(this.interception.requestOverrides)}}async continue(e={},t){if(!this.url().startsWith("data:")){if(nt(this.interception.enabled,"Request Interception is not enabled!"),nt(!this.interception.handled,"Request is already handled!"),void 0===t)return await this._continue(e);if(this.interception.requestOverrides=e,void 0===this.interception.resolutionState.priority||t>this.interception.resolutionState.priority)this.interception.resolutionState={action:Rn.Continue,priority:t};else if(t===this.interception.resolutionState.priority){if("abort"===this.interception.resolutionState.action||"respond"===this.interception.resolutionState.action)return;this.interception.resolutionState.action=Rn.Continue}}}async respond(e,t){if(!this.url().startsWith("data:")){if(nt(this.interception.enabled,"Request Interception is not enabled!"),nt(!this.interception.handled,"Request is already handled!"),void 0===t)return await this._respond(e);if(this.interception.response=e,void 0===this.interception.resolutionState.priority||t>this.interception.resolutionState.priority)this.interception.resolutionState={action:Rn.Respond,priority:t};else if(t===this.interception.resolutionState.priority){if("abort"===this.interception.resolutionState.action)return;this.interception.resolutionState.action=Rn.Respond}}}async abort(e="failed",t){if(this.url().startsWith("data:"))return;const r=On[e];if(nt(r,"Unknown error code: "+e),nt(this.interception.enabled,"Request Interception is not enabled!"),nt(!this.interception.handled,"Request is already handled!"),void 0===t)return await this._abort(r);this.interception.abortReason=r,(void 0===this.interception.resolutionState.priority||t>=this.interception.resolutionState.priority)&&(this.interception.resolutionState={action:Rn.Abort,priority:t})}static getResponse(e){const t=bt(e)?(new TextEncoder).encode(e):e,r=[];for(const e of t)r.push(String.fromCharCode(e));return{contentLength:t.byteLength,base64:btoa(r.join(""))}}}var Rn;function Mn(e){const t=[];for(const r in e){const i=e[r];if(!Object.is(i,void 0)){const e=Array.isArray(i)?i:[i];t.push(...e.map((e=>({name:r,value:e+""}))))}}return t}!function(e){e.Abort="abort",e.Respond="respond",e.Continue="continue",e.Disabled="disabled",e.None="none",e.AlreadyHandled="already-handled"}(Rn||(Rn={}));const An={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Switch Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"},On={aborted:"Aborted",accessdenied:"AccessDenied",addressunreachable:"AddressUnreachable",blockedbyclient:"BlockedByClient",blockedbyresponse:"BlockedByResponse",connectionaborted:"ConnectionAborted",connectionclosed:"ConnectionClosed",connectionfailed:"ConnectionFailed",connectionrefused:"ConnectionRefused",connectionreset:"ConnectionReset",internetdisconnected:"InternetDisconnected",namenotresolved:"NameNotResolved",timedout:"TimedOut",failed:"Failed"};function qn(e){if(e.originalMessage.includes("Invalid header")||e.originalMessage.includes('Expected "header"')||e.originalMessage.includes("invalid argument"))throw e;yt(e)}class Nn extends Pn{id;#xe;#di;#ge;#ui;#hi;#pi=!1;#fi;#mi={};#qr;#yi;get client(){return this.#xe}constructor(e,t,r,i,n,s){super(),this.#xe=e,this.id=n.requestId,this.#di=n.requestId===n.loaderId&&"Document"===n.type,this._interceptionId=r,this.#ge=n.request.url,this.#ui=(n.type||"other").toLowerCase(),this.#hi=n.request.method,this.#fi=n.request.postData,this.#pi=n.request.hasPostData??!1,this.#qr=t,this._redirectChain=s,this.#yi=n.initiator,this.interception.enabled=i;for(const[e,t]of Object.entries(n.request.headers))this.#mi[e.toLowerCase()]=t}url(){return this.#ge}resourceType(){return this.#ui}method(){return this.#hi}postData(){return this.#fi}hasPostData(){return this.#pi}async fetchPostData(){try{return(await this.#xe.send("Network.getRequestPostData",{requestId:this.id})).postData}catch(e){return void yt(e)}}headers(){return this.#mi}response(){return this._response}frame(){return this.#qr}isNavigationRequest(){return this.#di}initiator(){return this.#yi}redirectChain(){return this._redirectChain.slice()}failure(){return this._failureText?{errorText:this._failureText}:null}async _continue(e={}){const{url:t,method:r,postData:i,headers:n}=e;this.interception.handled=!0;const s=i?btoa(i):void 0;if(void 0===this._interceptionId)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.continueRequest");await this.#xe.send("Fetch.continueRequest",{requestId:this._interceptionId,url:t,method:r,postData:s,headers:n?Mn(n):void 0}).catch((e=>(this.interception.handled=!1,qn(e))))}async _respond(e){let t;this.interception.handled=!0,e.body&&(t=Pn.getResponse(e.body));const r={};if(e.headers)for(const t of Object.keys(e.headers)){const i=e.headers[t];r[t.toLowerCase()]=Array.isArray(i)?i.map((e=>String(e))):String(i)}e.contentType&&(r["content-type"]=e.contentType),t?.contentLength&&!("content-length"in r)&&(r["content-length"]=String(t.contentLength));const i=e.status||200;if(void 0===this._interceptionId)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.fulfillRequest");await this.#xe.send("Fetch.fulfillRequest",{requestId:this._interceptionId,responseCode:i,responsePhrase:An[i],responseHeaders:Mn(r),body:t?.base64}).catch((e=>(this.interception.handled=!1,qn(e))))}async _abort(e){if(this.interception.handled=!0,void 0===this._interceptionId)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.failRequest");await this.#xe.send("Fetch.failRequest",{requestId:this._interceptionId,errorReason:e||"Failed"}).catch(qn)}}
/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Bn{constructor(){}ok(){const e=this.status();return 0===e||e>=200&&e<=299}async text(){return(await this.buffer()).toString("utf8")}async json(){const e=await this.text();return JSON.parse(e)}}
/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Ln{#gi;#wi;#vi;#bi;#ki;#Si;constructor(e){this.#gi=e.subjectName,this.#wi=e.issuer,this.#vi=e.validFrom,this.#bi=e.validTo,this.#ki=e.protocol,this.#Si=e.sanList}issuer(){return this.#wi}validFrom(){return this.#vi}validTo(){return this.#bi}protocol(){return this.#ki}subjectName(){return this.#gi}subjectAlternativeNames(){return this.#Si}}class jn extends Bn{#xe;#Ci;#Ti=null;#Ei=jt.create();#Ii;#xi;#Fi;#ge;#_i;#Di;#mi={};#Pi;#Ri;constructor(e,t,r,i){super(),this.#xe=e,this.#Ci=t,this.#Ii={ip:r.remoteIPAddress,port:r.remotePort},this.#Fi=this.#Mi(i)||r.statusText,this.#ge=t.url(),this.#_i=!!r.fromDiskCache,this.#Di=!!r.fromServiceWorker,this.#xi=i?i.statusCode:r.status;const n=i?i.headers:r.headers;for(const[e,t]of Object.entries(n))this.#mi[e.toLowerCase()]=t;this.#Pi=r.securityDetails?new Ln(r.securityDetails):null,this.#Ri=r.timing||null}#Mi(e){if(!e||!e.headersText)return;const t=e.headersText.split("\r",1)[0];if(!t)return;const r=t.match(/[^ ]* [^ ]* (.*)/);if(!r)return;const i=r[1];return i||void 0}_resolveBody(e){return e?this.#Ei.reject(e):this.#Ei.resolve()}remoteAddress(){return this.#Ii}url(){return this.#ge}status(){return this.#xi}statusText(){return this.#Fi}headers(){return this.#mi}securityDetails(){return this.#Pi}timing(){return this.#Ri}buffer(){return this.#Ti||(this.#Ti=this.#Ei.valueOrThrow().then((async()=>{try{const e=await this.#xe.send("Network.getResponseBody",{requestId:this.#Ci.id});return Buffer.from(e.body,e.base64Encoded?"base64":"utf8")}catch(e){if(e instanceof ht&&"No resource with given identifier found"===e.originalMessage)throw new ht("Could not load body for this request. This might happen if the request is a preflight request.");throw e}}))),this.#Ti}request(){return this.#Ci}fromCache(){return this.#_i||this.#Ci._fromMemoryCache}fromServiceWorker(){return this.#Di}frame(){return this.#Ci.frame()}}
/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Hn{#Ai=new Map;#Oi=new Map;#qi=new Map;#Ni=new Map;#Bi=new Map;#Li=new Map;forget(e){this.#Ai.delete(e),this.#Oi.delete(e),this.#Li.delete(e),this.#Bi.delete(e),this.#Ni.delete(e)}responseExtraInfo(e){return this.#Ni.has(e)||this.#Ni.set(e,[]),this.#Ni.get(e)}queuedRedirectInfo(e){return this.#Bi.has(e)||this.#Bi.set(e,[]),this.#Bi.get(e)}queueRedirectInfo(e,t){this.queuedRedirectInfo(e).push(t)}takeQueuedRedirectInfo(e){return this.queuedRedirectInfo(e).shift()}inFlightRequestsCount(){let e=0;for(const t of this.#qi.values())t.response()||e++;return e}storeRequestWillBeSent(e,t){this.#Ai.set(e,t)}getRequestWillBeSent(e){return this.#Ai.get(e)}forgetRequestWillBeSent(e){this.#Ai.delete(e)}getRequestPaused(e){return this.#Oi.get(e)}forgetRequestPaused(e){this.#Oi.delete(e)}storeRequestPaused(e,t){this.#Oi.set(e,t)}getRequest(e){return this.#qi.get(e)}storeRequest(e,t){this.#qi.set(e,t)}forgetRequest(e){this.#qi.delete(e)}getQueuedEventGroup(e){return this.#Li.get(e)}queueEventGroup(e,t){this.#Li.set(e,t)}forgetQueuedEventGroup(e){this.#Li.delete(e)}}
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class $n extends it{#er;#ji=new Hn;#Hi;#$i=null;#Ki=new Set;#Vi=!1;#Wi=!1;#zi;#Ui;#Gi;#Qi;#i=[["Fetch.requestPaused",this.#Ji],["Fetch.authRequired",this.#Xi],["Network.requestWillBeSent",this.#Yi],["Network.requestServedFromCache",this.#Zi],["Network.responseReceived",this.#en],["Network.loadingFinished",this.#tn],["Network.loadingFailed",this.#rn],["Network.responseReceivedExtraInfo",this.#in],[Bt.Disconnected,this.#nn]];#sn=new Map;constructor(e){super(),this.#er=e}async addClient(e){if(this.#sn.has(e))return;const t=new tt;this.#sn.set(e,t);const r=t.use(new it(e));for(const[t,i]of this.#i)r.on(t,(t=>i.bind(this)(e,t)));await Promise.all([e.send("Network.enable"),this.#an(e),this.#on(e),this.#cn(e),this.#ln(e),this.#dn(e)])}async#nn(e){this.#sn.get(e)?.dispose(),this.#sn.delete(e)}async authenticate(e){this.#$i=e;const t=this.#Vi||!!this.#$i;t!==this.#Wi&&(this.#Wi=t,await this.#un(this.#ln.bind(this)))}async setExtraHTTPHeaders(e){const t={};for(const[r,i]of Object.entries(e))nt(bt(i),`Expected value of header "${r}" to be String, but "${typeof i}" is found.`),t[r.toLowerCase()]=i;this.#Hi=t,await this.#un(this.#an.bind(this))}async#an(e){void 0!==this.#Hi&&await e.send("Network.setExtraHTTPHeaders",{headers:this.#Hi})}extraHTTPHeaders(){return Object.assign({},this.#Hi)}inFlightRequestsCount(){return this.#ji.inFlightRequestsCount()}async setOfflineMode(e){this.#Ui||(this.#Ui={offline:!1,upload:-1,download:-1,latency:0}),this.#Ui.offline=e,await this.#un(this.#on.bind(this))}async emulateNetworkConditions(e){this.#Ui||(this.#Ui={offline:!1,upload:-1,download:-1,latency:0}),this.#Ui.upload=e?e.upload:-1,this.#Ui.download=e?e.download:-1,this.#Ui.latency=e?e.latency:0,await this.#un(this.#on.bind(this))}async#un(e){await Promise.all(Array.from(this.#sn.keys()).map((t=>e(t))))}async#on(e){void 0!==this.#Ui&&await e.send("Network.emulateNetworkConditions",{offline:this.#Ui.offline,latency:this.#Ui.latency,uploadThroughput:this.#Ui.upload,downloadThroughput:this.#Ui.download})}async setUserAgent(e,t){this.#Gi=e,this.#Qi=t,await this.#un(this.#dn.bind(this))}async#dn(e){void 0!==this.#Gi&&await e.send("Network.setUserAgentOverride",{userAgent:this.#Gi,userAgentMetadata:this.#Qi})}async setCacheEnabled(e){this.#zi=!e,await this.#un(this.#cn.bind(this))}async setRequestInterception(e){this.#Vi=e;const t=this.#Vi||!!this.#$i;t!==this.#Wi&&(this.#Wi=t,await this.#un(this.#ln.bind(this)))}async#ln(e){void 0===this.#zi&&(this.#zi=!1),this.#Wi?await Promise.all([this.#cn(e),e.send("Fetch.enable",{handleAuthRequests:!0,patterns:[{urlPattern:"*"}]})]):await Promise.all([this.#cn(e),e.send("Fetch.disable")])}async#cn(e){void 0!==this.#zi&&await e.send("Network.setCacheDisabled",{cacheDisabled:this.#zi})}#Yi(e,t){if(!this.#Vi||t.request.url.startsWith("data:"))this.#Xr(e,t,void 0);else{const{requestId:r}=t;this.#ji.storeRequestWillBeSent(r,t);const i=this.#ji.getRequestPaused(r);if(i){const{requestId:n}=i;this.#hn(t,i),this.#Xr(e,t,n),this.#ji.forgetRequestPaused(r)}}}#Xi(e,t){let r="Default";this.#Ki.has(t.requestId)?r="CancelAuth":this.#$i&&(r="ProvideCredentials",this.#Ki.add(t.requestId));const{username:i,password:n}=this.#$i||{username:void 0,password:void 0};e.send("Fetch.continueWithAuth",{requestId:t.requestId,authChallengeResponse:{response:r,username:i,password:n}}).catch(yt)}#Ji(e,t){!this.#Vi&&this.#Wi&&e.send("Fetch.continueRequest",{requestId:t.requestId}).catch(yt);const{networkId:r,requestId:i}=t;if(!r)return void this.#pn(e,t);const n=(()=>{const e=this.#ji.getRequestWillBeSent(r);if(!e||e.request.url===t.request.url&&e.request.method===t.request.method)return e;this.#ji.forgetRequestWillBeSent(r)})();n?(this.#hn(n,t),this.#Xr(e,n,i)):this.#ji.storeRequestPaused(r,t)}#hn(e,t){e.request.headers={...e.request.headers,...t.request.headers}}#pn(e,t){const r=t.frameId?this.#er.frame(t.frameId):null,i=new Nn(e,r,t.requestId,this.#Vi,t,[]);this.emit(Fr.Request,i),i.finalizeInterceptions()}#Xr(e,t,r){let i=[];if(t.redirectResponse){let n=null;if(t.redirectHasExtraInfo&&(n=this.#ji.responseExtraInfo(t.requestId).shift(),!n))return void this.#ji.queueRedirectInfo(t.requestId,{event:t,fetchRequestId:r});const s=this.#ji.getRequest(t.requestId);s&&(this.#fn(e,s,t.redirectResponse,n),i=s._redirectChain)}const n=t.frameId?this.#er.frame(t.frameId):null,s=new Nn(e,n,r,this.#Vi,t,i);this.#ji.storeRequest(t.requestId,s),this.emit(Fr.Request,s),s.finalizeInterceptions()}#Zi(e,t){const r=this.#ji.getRequest(t.requestId);r&&(r._fromMemoryCache=!0),this.emit(Fr.RequestServedFromCache,r)}#fn(e,t,r,i){const n=new jn(e,t,r,i);t._response=n,t._redirectChain.push(t),n._resolveBody(new Error("Response body is unavailable for redirect responses")),this.#mn(t,!1),this.emit(Fr.Response,n),this.emit(Fr.RequestFinished,t)}#yn(e,t,r){const i=this.#ji.getRequest(t.requestId);if(!i)return;this.#ji.responseExtraInfo(t.requestId).length&&yt(new Error("Unexpected extraInfo events for request "+t.requestId)),t.response.fromDiskCache&&(r=null);const n=new jn(e,i,t.response,r);i._response=n,this.emit(Fr.Response,n)}#en(e,t){const r=this.#ji.getRequest(t.requestId);let i=null;!r||r._fromMemoryCache||!t.hasExtraInfo||(i=this.#ji.responseExtraInfo(t.requestId).shift(),i)?this.#yn(e,t,i):this.#ji.queueEventGroup(t.requestId,{responseReceivedEvent:t})}#in(e,t){const r=this.#ji.takeQueuedRedirectInfo(t.requestId);if(r)return this.#ji.responseExtraInfo(t.requestId).push(t),void this.#Xr(e,r.event,r.fetchRequestId);const i=this.#ji.getQueuedEventGroup(t.requestId);if(i)return this.#ji.forgetQueuedEventGroup(t.requestId),this.#yn(e,i.responseReceivedEvent,t),i.loadingFinishedEvent&&this.#gn(i.loadingFinishedEvent),void(i.loadingFailedEvent&&this.#wn(i.loadingFailedEvent));this.#ji.responseExtraInfo(t.requestId).push(t)}#mn(e,t){const r=e.id,i=e._interceptionId;this.#ji.forgetRequest(r),void 0!==i&&this.#Ki.delete(i),t&&this.#ji.forget(r)}#tn(e,t){const r=this.#ji.getQueuedEventGroup(t.requestId);r?r.loadingFinishedEvent=t:this.#gn(t)}#gn(e){const t=this.#ji.getRequest(e.requestId);t&&(t.response()&&t.response()?._resolveBody(),this.#mn(t,!0),this.emit(Fr.RequestFinished,t))}#rn(e,t){const r=this.#ji.getQueuedEventGroup(t.requestId);r?r.loadingFailedEvent=t:this.#wn(t)}#wn(e){const t=this.#ji.getRequest(e.requestId);if(!t)return;t._failureText=e.errorText;const r=t.response();r&&r._resolveBody(),this.#mn(t,!0),this.emit(Fr.RequestFailed,t)}}
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Kn extends it{#vn;#bn;#Nt;#kn=new Set;#xe;#Sn=new Map;#nr=new Set;_frameTree=new Dn;#Cn=new Set;#Tn=new WeakMap;#En;get timeoutSettings(){return this.#Nt}get networkManager(){return this.#bn}get client(){return this.#xe}constructor(e,t,r){super(),this.#xe=e,this.#vn=t,this.#bn=new $n(this),this.#Nt=r,this.setupEventListeners(this.#xe),e.once(Bt.Disconnected,(()=>{this.#In().catch(yt)}))}async#In(){const e=this._frameTree.getMainFrame();if(!e)return;for(const t of e.childFrames())this.#xn(t);const t=jt.create({timeout:100,message:"Frame was not swapped"});e.once(Ai.FrameSwappedByActivation,(()=>{t.resolve()}));try{await t.valueOrThrow()}catch(t){this.#xn(e)}}async swapFrameTree(e){this.#xe=e,nt(this.#xe instanceof Zt,"CDPSession is not an instance of CDPSessionImpl.");const t=this._frameTree.getMainFrame();t&&(this.#Cn.add(this.#xe._target()._targetId),this._frameTree.removeFrame(t),t.updateId(this.#xe._target()._targetId),this._frameTree.addFrame(t),t.updateClient(e)),this.setupEventListeners(e),e.once(Bt.Disconnected,(()=>{this.#In().catch(yt)})),await this.initialize(e,t),await this.#bn.addClient(e),t&&t.emit(Ai.FrameSwappedByActivation,void 0)}async registerSpeculativeSession(e){await this.#bn.addClient(e)}setupEventListeners(e){e.on("Page.frameAttached",(async t=>{await(this.#En?.valueOrThrow()),this.#Fn(e,t.frameId,t.parentFrameId)})),e.on("Page.frameNavigated",(async e=>{this.#Cn.add(e.frame.id),await(this.#En?.valueOrThrow()),this.#_n(e.frame,e.type)})),e.on("Page.navigatedWithinDocument",(async e=>{await(this.#En?.valueOrThrow()),this.#Dn(e.frameId,e.url)})),e.on("Page.frameDetached",(async e=>{await(this.#En?.valueOrThrow()),this.#Jr(e.frameId,e.reason)})),e.on("Page.frameStartedLoading",(async e=>{await(this.#En?.valueOrThrow()),this.#Pn(e.frameId)})),e.on("Page.frameStoppedLoading",(async e=>{await(this.#En?.valueOrThrow()),this.#Rn(e.frameId)})),e.on("Runtime.executionContextCreated",(async t=>{await(this.#En?.valueOrThrow()),this.#Mn(t.context,e)})),e.on("Page.lifecycleEvent",(async e=>{await(this.#En?.valueOrThrow()),this.#An(e)}))}async initialize(e,t){try{this.#En?.resolve(),this.#En=jt.create(),await Promise.all([this.#bn.addClient(e),e.send("Page.enable"),e.send("Page.getFrameTree").then((({frameTree:t})=>{this.#On(e,t),this.#En?.resolve()})),e.send("Page.setLifecycleEventsEnabled",{enabled:!0}),e.send("Runtime.enable").then((()=>this.#qn(e,Ft))),...(t?Array.from(this.#Sn.values()):[]).map((e=>t?.addPreloadScript(e))),...(t?Array.from(this.#nr.values()):[]).map((e=>t?.addExposedFunctionBinding(e)))])}catch(e){if(this.#En?.resolve(),Gt(e)&&jr(e))return;throw e}}page(){return this.#vn}mainFrame(){const e=this._frameTree.getMainFrame();return nt(e,"Requesting main frame too early!"),e}frames(){return Array.from(this._frameTree.frames())}frame(e){return this._frameTree.getById(e)||null}async addExposedFunctionBinding(e){this.#nr.add(e),await Promise.all(this.frames().map((async t=>await t.addExposedFunctionBinding(e))))}async removeExposedFunctionBinding(e){this.#nr.delete(e),await Promise.all(this.frames().map((async t=>await t.removeExposedFunctionBinding(e))))}async evaluateOnNewDocument(e){const{identifier:t}=await this.mainFrame()._client().send("Page.addScriptToEvaluateOnNewDocument",{source:e}),r=new Hi(this.mainFrame(),t,e);return this.#Sn.set(t,r),await Promise.all(this.frames().map((async e=>await e.addPreloadScript(r)))),{identifier:t}}async removeScriptToEvaluateOnNewDocument(e){const t=this.#Sn.get(e);if(!t)throw new Error(`Script to evaluate on new document with id ${e} not found`);this.#Sn.delete(e),await Promise.all(this.frames().map((e=>{const r=t.getIdForFrame(e);if(r)return e._client().send("Page.removeScriptToEvaluateOnNewDocument",{identifier:r}).catch(yt)})))}onAttachedToTarget(e){if("iframe"!==e._getTargetInfo().type)return;const t=this.frame(e._getTargetInfo().targetId);t&&t.updateClient(e._session()),this.setupEventListeners(e._session()),this.initialize(e._session(),t)}_deviceRequestPromptManager(e){let t=this.#Tn.get(e);return void 0===t&&(t=new Vi(e,this.#Nt),this.#Tn.set(e,t)),t}#An(e){const t=this.frame(e.frameId);t&&(t._onLifecycleEvent(e.loaderId,e.name),this.emit(wn.LifecycleEvent,t),t.emit(Ai.LifecycleEvent,void 0))}#Pn(e){const t=this.frame(e);t&&t._onLoadingStarted()}#Rn(e){const t=this.frame(e);t&&(t._onLoadingStopped(),this.emit(wn.LifecycleEvent,t),t.emit(Ai.LifecycleEvent,void 0))}#On(e,t){if(t.frame.parentId&&this.#Fn(e,t.frame.id,t.frame.parentId),this.#Cn.has(t.frame.id)?this.#Cn.delete(t.frame.id):this.#_n(t.frame,"Navigation"),t.childFrames)for(const r of t.childFrames)this.#On(e,r)}#Fn(e,t,r){let i=this.frame(t);i?e&&i.isOOPFrame()&&i.updateClient(e):(i=new _n(this,t,r,e),this._frameTree.addFrame(i),this.emit(wn.FrameAttached,i))}async#_n(e,t){const r=e.id,i=!e.parentId;let n=this._frameTree.getById(r);if(n)for(const e of n.childFrames())this.#xn(e);i&&(n?(this._frameTree.removeFrame(n),n._id=r):n=new _n(this,r,void 0,this.#xe),this._frameTree.addFrame(n)),n=await this._frameTree.waitForFrame(r),n._navigated(e),this.emit(wn.FrameNavigated,n),n.emit(Ai.FrameNavigated,t)}async#qn(e,t){const r=`${e.id()}:${t}`;this.#kn.has(r)||(await e.send("Page.addScriptToEvaluateOnNewDocument",{source:`//# sourceURL=${wt.INTERNAL_URL}`,worldName:t}),await Promise.all(this.frames().filter((t=>t.client===e)).map((r=>e.send("Page.createIsolatedWorld",{frameId:r._id,worldName:t,grantUniveralAccess:!0}).catch(yt)))),this.#kn.add(r))}#Dn(e,t){const r=this.frame(e);r&&(r._navigatedWithinDocument(t),this.emit(wn.FrameNavigatedWithinDocument,r),r.emit(Ai.FrameNavigatedWithinDocument,void 0),this.emit(wn.FrameNavigated,r),r.emit(Ai.FrameNavigated,"Navigation"))}#Jr(e,t){const r=this.frame(e);if(r)switch(t){case"remove":this.#xn(r);break;case"swap":this.emit(wn.FrameSwapped,r),r.emit(Ai.FrameSwapped,void 0)}}#Mn(e,t){const r=e.auxData,i=r&&r.frameId,n="string"==typeof i?this.frame(i):void 0;let s;if(n){if(n.client!==t)return;e.auxData&&e.auxData.isDefault?s=n.worlds[Cn]:e.name===Ft&&(s=n.worlds[Tn])}if(!s)return;const a=new fn(n?.client||this.#xe,e,s);s.setContext(a)}#xn(e){for(const t of e.childFrames())this.#xn(t);e[Ze](),this._frameTree.removeFrame(e),this.emit(wn.FrameDetached,e),e.emit(Ai.FrameDetached,e)}}
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Vn{constructor(){}}const Wn=Object.freeze({Left:"left",Right:"right",Middle:"middle",Back:"back",Forward:"forward"});class zn{constructor(){}}class Un{constructor(){}async tap(e,t){await this.touchStart(e,t),await this.touchEnd()}}
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Gn={0:{keyCode:48,key:"0",code:"Digit0"},1:{keyCode:49,key:"1",code:"Digit1"},2:{keyCode:50,key:"2",code:"Digit2"},3:{keyCode:51,key:"3",code:"Digit3"},4:{keyCode:52,key:"4",code:"Digit4"},5:{keyCode:53,key:"5",code:"Digit5"},6:{keyCode:54,key:"6",code:"Digit6"},7:{keyCode:55,key:"7",code:"Digit7"},8:{keyCode:56,key:"8",code:"Digit8"},9:{keyCode:57,key:"9",code:"Digit9"},Power:{key:"Power",code:"Power"},Eject:{key:"Eject",code:"Eject"},Abort:{keyCode:3,code:"Abort",key:"Cancel"},Help:{keyCode:6,code:"Help",key:"Help"},Backspace:{keyCode:8,code:"Backspace",key:"Backspace"},Tab:{keyCode:9,code:"Tab",key:"Tab"},Numpad5:{keyCode:12,shiftKeyCode:101,key:"Clear",code:"Numpad5",shiftKey:"5",location:3},NumpadEnter:{keyCode:13,code:"NumpadEnter",key:"Enter",text:"\r",location:3},Enter:{keyCode:13,code:"Enter",key:"Enter",text:"\r"},"\r":{keyCode:13,code:"Enter",key:"Enter",text:"\r"},"\n":{keyCode:13,code:"Enter",key:"Enter",text:"\r"},ShiftLeft:{keyCode:16,code:"ShiftLeft",key:"Shift",location:1},ShiftRight:{keyCode:16,code:"ShiftRight",key:"Shift",location:2},ControlLeft:{keyCode:17,code:"ControlLeft",key:"Control",location:1},ControlRight:{keyCode:17,code:"ControlRight",key:"Control",location:2},AltLeft:{keyCode:18,code:"AltLeft",key:"Alt",location:1},AltRight:{keyCode:18,code:"AltRight",key:"Alt",location:2},Pause:{keyCode:19,code:"Pause",key:"Pause"},CapsLock:{keyCode:20,code:"CapsLock",key:"CapsLock"},Escape:{keyCode:27,code:"Escape",key:"Escape"},Convert:{keyCode:28,code:"Convert",key:"Convert"},NonConvert:{keyCode:29,code:"NonConvert",key:"NonConvert"},Space:{keyCode:32,code:"Space",key:" "},Numpad9:{keyCode:33,shiftKeyCode:105,key:"PageUp",code:"Numpad9",shiftKey:"9",location:3},PageUp:{keyCode:33,code:"PageUp",key:"PageUp"},Numpad3:{keyCode:34,shiftKeyCode:99,key:"PageDown",code:"Numpad3",shiftKey:"3",location:3},PageDown:{keyCode:34,code:"PageDown",key:"PageDown"},End:{keyCode:35,code:"End",key:"End"},Numpad1:{keyCode:35,shiftKeyCode:97,key:"End",code:"Numpad1",shiftKey:"1",location:3},Home:{keyCode:36,code:"Home",key:"Home"},Numpad7:{keyCode:36,shiftKeyCode:103,key:"Home",code:"Numpad7",shiftKey:"7",location:3},ArrowLeft:{keyCode:37,code:"ArrowLeft",key:"ArrowLeft"},Numpad4:{keyCode:37,shiftKeyCode:100,key:"ArrowLeft",code:"Numpad4",shiftKey:"4",location:3},Numpad8:{keyCode:38,shiftKeyCode:104,key:"ArrowUp",code:"Numpad8",shiftKey:"8",location:3},ArrowUp:{keyCode:38,code:"ArrowUp",key:"ArrowUp"},ArrowRight:{keyCode:39,code:"ArrowRight",key:"ArrowRight"},Numpad6:{keyCode:39,shiftKeyCode:102,key:"ArrowRight",code:"Numpad6",shiftKey:"6",location:3},Numpad2:{keyCode:40,shiftKeyCode:98,key:"ArrowDown",code:"Numpad2",shiftKey:"2",location:3},ArrowDown:{keyCode:40,code:"ArrowDown",key:"ArrowDown"},Select:{keyCode:41,code:"Select",key:"Select"},Open:{keyCode:43,code:"Open",key:"Execute"},PrintScreen:{keyCode:44,code:"PrintScreen",key:"PrintScreen"},Insert:{keyCode:45,code:"Insert",key:"Insert"},Numpad0:{keyCode:45,shiftKeyCode:96,key:"Insert",code:"Numpad0",shiftKey:"0",location:3},Delete:{keyCode:46,code:"Delete",key:"Delete"},NumpadDecimal:{keyCode:46,shiftKeyCode:110,code:"NumpadDecimal",key:"\0",shiftKey:".",location:3},Digit0:{keyCode:48,code:"Digit0",shiftKey:")",key:"0"},Digit1:{keyCode:49,code:"Digit1",shiftKey:"!",key:"1"},Digit2:{keyCode:50,code:"Digit2",shiftKey:"@",key:"2"},Digit3:{keyCode:51,code:"Digit3",shiftKey:"#",key:"3"},Digit4:{keyCode:52,code:"Digit4",shiftKey:"$",key:"4"},Digit5:{keyCode:53,code:"Digit5",shiftKey:"%",key:"5"},Digit6:{keyCode:54,code:"Digit6",shiftKey:"^",key:"6"},Digit7:{keyCode:55,code:"Digit7",shiftKey:"&",key:"7"},Digit8:{keyCode:56,code:"Digit8",shiftKey:"*",key:"8"},Digit9:{keyCode:57,code:"Digit9",shiftKey:"(",key:"9"},KeyA:{keyCode:65,code:"KeyA",shiftKey:"A",key:"a"},KeyB:{keyCode:66,code:"KeyB",shiftKey:"B",key:"b"},KeyC:{keyCode:67,code:"KeyC",shiftKey:"C",key:"c"},KeyD:{keyCode:68,code:"KeyD",shiftKey:"D",key:"d"},KeyE:{keyCode:69,code:"KeyE",shiftKey:"E",key:"e"},KeyF:{keyCode:70,code:"KeyF",shiftKey:"F",key:"f"},KeyG:{keyCode:71,code:"KeyG",shiftKey:"G",key:"g"},KeyH:{keyCode:72,code:"KeyH",shiftKey:"H",key:"h"},KeyI:{keyCode:73,code:"KeyI",shiftKey:"I",key:"i"},KeyJ:{keyCode:74,code:"KeyJ",shiftKey:"J",key:"j"},KeyK:{keyCode:75,code:"KeyK",shiftKey:"K",key:"k"},KeyL:{keyCode:76,code:"KeyL",shiftKey:"L",key:"l"},KeyM:{keyCode:77,code:"KeyM",shiftKey:"M",key:"m"},KeyN:{keyCode:78,code:"KeyN",shiftKey:"N",key:"n"},KeyO:{keyCode:79,code:"KeyO",shiftKey:"O",key:"o"},KeyP:{keyCode:80,code:"KeyP",shiftKey:"P",key:"p"},KeyQ:{keyCode:81,code:"KeyQ",shiftKey:"Q",key:"q"},KeyR:{keyCode:82,code:"KeyR",shiftKey:"R",key:"r"},KeyS:{keyCode:83,code:"KeyS",shiftKey:"S",key:"s"},KeyT:{keyCode:84,code:"KeyT",shiftKey:"T",key:"t"},KeyU:{keyCode:85,code:"KeyU",shiftKey:"U",key:"u"},KeyV:{keyCode:86,code:"KeyV",shiftKey:"V",key:"v"},KeyW:{keyCode:87,code:"KeyW",shiftKey:"W",key:"w"},KeyX:{keyCode:88,code:"KeyX",shiftKey:"X",key:"x"},KeyY:{keyCode:89,code:"KeyY",shiftKey:"Y",key:"y"},KeyZ:{keyCode:90,code:"KeyZ",shiftKey:"Z",key:"z"},MetaLeft:{keyCode:91,code:"MetaLeft",key:"Meta",location:1},MetaRight:{keyCode:92,code:"MetaRight",key:"Meta",location:2},ContextMenu:{keyCode:93,code:"ContextMenu",key:"ContextMenu"},NumpadMultiply:{keyCode:106,code:"NumpadMultiply",key:"*",location:3},NumpadAdd:{keyCode:107,code:"NumpadAdd",key:"+",location:3},NumpadSubtract:{keyCode:109,code:"NumpadSubtract",key:"-",location:3},NumpadDivide:{keyCode:111,code:"NumpadDivide",key:"/",location:3},F1:{keyCode:112,code:"F1",key:"F1"},F2:{keyCode:113,code:"F2",key:"F2"},F3:{keyCode:114,code:"F3",key:"F3"},F4:{keyCode:115,code:"F4",key:"F4"},F5:{keyCode:116,code:"F5",key:"F5"},F6:{keyCode:117,code:"F6",key:"F6"},F7:{keyCode:118,code:"F7",key:"F7"},F8:{keyCode:119,code:"F8",key:"F8"},F9:{keyCode:120,code:"F9",key:"F9"},F10:{keyCode:121,code:"F10",key:"F10"},F11:{keyCode:122,code:"F11",key:"F11"},F12:{keyCode:123,code:"F12",key:"F12"},F13:{keyCode:124,code:"F13",key:"F13"},F14:{keyCode:125,code:"F14",key:"F14"},F15:{keyCode:126,code:"F15",key:"F15"},F16:{keyCode:127,code:"F16",key:"F16"},F17:{keyCode:128,code:"F17",key:"F17"},F18:{keyCode:129,code:"F18",key:"F18"},F19:{keyCode:130,code:"F19",key:"F19"},F20:{keyCode:131,code:"F20",key:"F20"},F21:{keyCode:132,code:"F21",key:"F21"},F22:{keyCode:133,code:"F22",key:"F22"},F23:{keyCode:134,code:"F23",key:"F23"},F24:{keyCode:135,code:"F24",key:"F24"},NumLock:{keyCode:144,code:"NumLock",key:"NumLock"},ScrollLock:{keyCode:145,code:"ScrollLock",key:"ScrollLock"},AudioVolumeMute:{keyCode:173,code:"AudioVolumeMute",key:"AudioVolumeMute"},AudioVolumeDown:{keyCode:174,code:"AudioVolumeDown",key:"AudioVolumeDown"},AudioVolumeUp:{keyCode:175,code:"AudioVolumeUp",key:"AudioVolumeUp"},MediaTrackNext:{keyCode:176,code:"MediaTrackNext",key:"MediaTrackNext"},MediaTrackPrevious:{keyCode:177,code:"MediaTrackPrevious",key:"MediaTrackPrevious"},MediaStop:{keyCode:178,code:"MediaStop",key:"MediaStop"},MediaPlayPause:{keyCode:179,code:"MediaPlayPause",key:"MediaPlayPause"},Semicolon:{keyCode:186,code:"Semicolon",shiftKey:":",key:";"},Equal:{keyCode:187,code:"Equal",shiftKey:"+",key:"="},NumpadEqual:{keyCode:187,code:"NumpadEqual",key:"=",location:3},Comma:{keyCode:188,code:"Comma",shiftKey:"<",key:","},Minus:{keyCode:189,code:"Minus",shiftKey:"_",key:"-"},Period:{keyCode:190,code:"Period",shiftKey:">",key:"."},Slash:{keyCode:191,code:"Slash",shiftKey:"?",key:"/"},Backquote:{keyCode:192,code:"Backquote",shiftKey:"~",key:"`"},BracketLeft:{keyCode:219,code:"BracketLeft",shiftKey:"{",key:"["},Backslash:{keyCode:220,code:"Backslash",shiftKey:"|",key:"\\"},BracketRight:{keyCode:221,code:"BracketRight",shiftKey:"}",key:"]"},Quote:{keyCode:222,code:"Quote",shiftKey:'"',key:"'"},AltGraph:{keyCode:225,code:"AltGraph",key:"AltGraph"},Props:{keyCode:247,code:"Props",key:"CrSel"},Cancel:{keyCode:3,key:"Cancel",code:"Abort"},Clear:{keyCode:12,key:"Clear",code:"Numpad5",location:3},Shift:{keyCode:16,key:"Shift",code:"ShiftLeft",location:1},Control:{keyCode:17,key:"Control",code:"ControlLeft",location:1},Alt:{keyCode:18,key:"Alt",code:"AltLeft",location:1},Accept:{keyCode:30,key:"Accept"},ModeChange:{keyCode:31,key:"ModeChange"}," ":{keyCode:32,key:" ",code:"Space"},Print:{keyCode:42,key:"Print"},Execute:{keyCode:43,key:"Execute",code:"Open"},"\0":{keyCode:46,key:"\0",code:"NumpadDecimal",location:3},a:{keyCode:65,key:"a",code:"KeyA"},b:{keyCode:66,key:"b",code:"KeyB"},c:{keyCode:67,key:"c",code:"KeyC"},d:{keyCode:68,key:"d",code:"KeyD"},e:{keyCode:69,key:"e",code:"KeyE"},f:{keyCode:70,key:"f",code:"KeyF"},g:{keyCode:71,key:"g",code:"KeyG"},h:{keyCode:72,key:"h",code:"KeyH"},i:{keyCode:73,key:"i",code:"KeyI"},j:{keyCode:74,key:"j",code:"KeyJ"},k:{keyCode:75,key:"k",code:"KeyK"},l:{keyCode:76,key:"l",code:"KeyL"},m:{keyCode:77,key:"m",code:"KeyM"},n:{keyCode:78,key:"n",code:"KeyN"},o:{keyCode:79,key:"o",code:"KeyO"},p:{keyCode:80,key:"p",code:"KeyP"},q:{keyCode:81,key:"q",code:"KeyQ"},r:{keyCode:82,key:"r",code:"KeyR"},s:{keyCode:83,key:"s",code:"KeyS"},t:{keyCode:84,key:"t",code:"KeyT"},u:{keyCode:85,key:"u",code:"KeyU"},v:{keyCode:86,key:"v",code:"KeyV"},w:{keyCode:87,key:"w",code:"KeyW"},x:{keyCode:88,key:"x",code:"KeyX"},y:{keyCode:89,key:"y",code:"KeyY"},z:{keyCode:90,key:"z",code:"KeyZ"},Meta:{keyCode:91,key:"Meta",code:"MetaLeft",location:1},"*":{keyCode:106,key:"*",code:"NumpadMultiply",location:3},"+":{keyCode:107,key:"+",code:"NumpadAdd",location:3},"-":{keyCode:109,key:"-",code:"NumpadSubtract",location:3},"/":{keyCode:111,key:"/",code:"NumpadDivide",location:3},";":{keyCode:186,key:";",code:"Semicolon"},"=":{keyCode:187,key:"=",code:"Equal"},",":{keyCode:188,key:",",code:"Comma"},".":{keyCode:190,key:".",code:"Period"},"`":{keyCode:192,key:"`",code:"Backquote"},"[":{keyCode:219,key:"[",code:"BracketLeft"},"\\":{keyCode:220,key:"\\",code:"Backslash"},"]":{keyCode:221,key:"]",code:"BracketRight"},"'":{keyCode:222,key:"'",code:"Quote"},Attn:{keyCode:246,key:"Attn"},CrSel:{keyCode:247,key:"CrSel",code:"Props"},ExSel:{keyCode:248,key:"ExSel"},EraseEof:{keyCode:249,key:"EraseEof"},Play:{keyCode:250,key:"Play"},ZoomOut:{keyCode:251,key:"ZoomOut"},")":{keyCode:48,key:")",code:"Digit0"},"!":{keyCode:49,key:"!",code:"Digit1"},"@":{keyCode:50,key:"@",code:"Digit2"},"#":{keyCode:51,key:"#",code:"Digit3"},$:{keyCode:52,key:"$",code:"Digit4"},"%":{keyCode:53,key:"%",code:"Digit5"},"^":{keyCode:54,key:"^",code:"Digit6"},"&":{keyCode:55,key:"&",code:"Digit7"},"(":{keyCode:57,key:"(",code:"Digit9"},A:{keyCode:65,key:"A",code:"KeyA"},B:{keyCode:66,key:"B",code:"KeyB"},C:{keyCode:67,key:"C",code:"KeyC"},D:{keyCode:68,key:"D",code:"KeyD"},E:{keyCode:69,key:"E",code:"KeyE"},F:{keyCode:70,key:"F",code:"KeyF"},G:{keyCode:71,key:"G",code:"KeyG"},H:{keyCode:72,key:"H",code:"KeyH"},I:{keyCode:73,key:"I",code:"KeyI"},J:{keyCode:74,key:"J",code:"KeyJ"},K:{keyCode:75,key:"K",code:"KeyK"},L:{keyCode:76,key:"L",code:"KeyL"},M:{keyCode:77,key:"M",code:"KeyM"},N:{keyCode:78,key:"N",code:"KeyN"},O:{keyCode:79,key:"O",code:"KeyO"},P:{keyCode:80,key:"P",code:"KeyP"},Q:{keyCode:81,key:"Q",code:"KeyQ"},R:{keyCode:82,key:"R",code:"KeyR"},S:{keyCode:83,key:"S",code:"KeyS"},T:{keyCode:84,key:"T",code:"KeyT"},U:{keyCode:85,key:"U",code:"KeyU"},V:{keyCode:86,key:"V",code:"KeyV"},W:{keyCode:87,key:"W",code:"KeyW"},X:{keyCode:88,key:"X",code:"KeyX"},Y:{keyCode:89,key:"Y",code:"KeyY"},Z:{keyCode:90,key:"Z",code:"KeyZ"},":":{keyCode:186,key:":",code:"Semicolon"},"<":{keyCode:188,key:"<",code:"Comma"},_:{keyCode:189,key:"_",code:"Minus"},">":{keyCode:190,key:">",code:"Period"},"?":{keyCode:191,key:"?",code:"Slash"},"~":{keyCode:192,key:"~",code:"Backquote"},"{":{keyCode:219,key:"{",code:"BracketLeft"},"|":{keyCode:220,key:"|",code:"Backslash"},"}":{keyCode:221,key:"}",code:"BracketRight"},'"':{keyCode:222,key:'"',code:"Quote"},SoftLeft:{key:"SoftLeft",code:"SoftLeft",location:4},SoftRight:{key:"SoftRight",code:"SoftRight",location:4},Camera:{keyCode:44,key:"Camera",code:"Camera",location:4},Call:{key:"Call",code:"Call",location:4},EndCall:{keyCode:95,key:"EndCall",code:"EndCall",location:4},VolumeDown:{keyCode:182,key:"VolumeDown",code:"VolumeDown",location:4},VolumeUp:{keyCode:183,key:"VolumeUp",code:"VolumeUp",location:4}};
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Qn extends Vn{#xe;#Nn=new Set;_modifiers=0;constructor(e){super(),this.#xe=e}updateClient(e){this.#xe=e}async down(e,t={text:void 0,commands:[]}){const r=this.#Bn(e),i=this.#Nn.has(r.code);this.#Nn.add(r.code),this._modifiers|=this.#Ln(r.key);const n=void 0===t.text?r.text:t.text;await this.#xe.send("Input.dispatchKeyEvent",{type:n?"keyDown":"rawKeyDown",modifiers:this._modifiers,windowsVirtualKeyCode:r.keyCode,code:r.code,key:r.key,text:n,unmodifiedText:n,autoRepeat:i,location:r.location,isKeypad:3===r.location,commands:t.commands})}#Ln(e){return"Alt"===e?1:"Control"===e?2:"Meta"===e?4:"Shift"===e?8:0}#Bn(e){const t=8&this._modifiers,r={key:"",keyCode:0,code:"",text:"",location:0},i=Gn[e];return nt(i,`Unknown key: "${e}"`),i.key&&(r.key=i.key),t&&i.shiftKey&&(r.key=i.shiftKey),i.keyCode&&(r.keyCode=i.keyCode),t&&i.shiftKeyCode&&(r.keyCode=i.shiftKeyCode),i.code&&(r.code=i.code),i.location&&(r.location=i.location),1===r.key.length&&(r.text=r.key),i.text&&(r.text=i.text),t&&i.shiftText&&(r.text=i.shiftText),-9&this._modifiers&&(r.text=""),r}async up(e){const t=this.#Bn(e);this._modifiers&=~this.#Ln(t.key),this.#Nn.delete(t.code),await this.#xe.send("Input.dispatchKeyEvent",{type:"keyUp",modifiers:this._modifiers,key:t.key,windowsVirtualKeyCode:t.keyCode,code:t.code,location:t.location})}async sendCharacter(e){await this.#xe.send("Input.insertText",{text:e})}charIsKey(e){return!!Gn[e]}async type(e,t={}){const r=t.delay||void 0;for(const t of e)this.charIsKey(t)?await this.press(t,{delay:r}):(r&&await new Promise((e=>setTimeout(e,r))),await this.sendCharacter(t))}async press(e,t={}){const{delay:r=null}=t;await this.down(e,t),r&&await new Promise((e=>setTimeout(e,t.delay))),await this.up(e)}}const Jn=e=>{switch(e){case Wn.Left:return 1;case Wn.Right:return 2;case Wn.Middle:return 4;case Wn.Back:return 8;case Wn.Forward:return 16}},Xn=e=>1&e?Wn.Left:2&e?Wn.Right:4&e?Wn.Middle:8&e?Wn.Back:16&e?Wn.Forward:"none";class Yn extends zn{#xe;#jn;constructor(e,t){super(),this.#xe=e,this.#jn=t}updateClient(e){this.#xe=e}#Hn={position:{x:0,y:0},buttons:0};get#Ke(){return Object.assign({...this.#Hn},...this.#$n)}#$n=[];#Kn(){const e={};this.#$n.push(e);const t=()=>{this.#$n.splice(this.#$n.indexOf(e),1)};return{update:t=>{Object.assign(e,t)},commit:()=>{this.#Hn={...this.#Hn,...e},t()},rollback:t}}async#Vn(e){const{update:t,commit:r,rollback:i}=this.#Kn();try{await e(t),r()}catch(e){throw i(),e}}async reset(){const e=[];for(const[t,r]of[[1,Wn.Left],[4,Wn.Middle],[2,Wn.Right],[16,Wn.Forward],[8,Wn.Back]])this.#Ke.buttons&t&&e.push(this.up({button:r}));0===this.#Ke.position.x&&0===this.#Ke.position.y||e.push(this.move(0,0)),await Promise.all(e)}async move(e,t,r={}){const{steps:i=1}=r,n=this.#Ke.position,s=e,a=t;for(let e=1;e<=i;e++)await this.#Vn((t=>{t({position:{x:n.x+(s-n.x)*(e/i),y:n.y+(a-n.y)*(e/i)}});const{buttons:r,position:o}=this.#Ke;return this.#xe.send("Input.dispatchMouseEvent",{type:"mouseMoved",modifiers:this.#jn._modifiers,buttons:r,button:Xn(r),...o})}))}async down(e={}){const{button:t=Wn.Left,clickCount:r=1}=e,i=Jn(t);if(!i)throw new Error(`Unsupported mouse button: ${t}`);if(this.#Ke.buttons&i)throw new Error(`'${t}' is already pressed.`);await this.#Vn((e=>{e({buttons:this.#Ke.buttons|i});const{buttons:n,position:s}=this.#Ke;return this.#xe.send("Input.dispatchMouseEvent",{type:"mousePressed",modifiers:this.#jn._modifiers,clickCount:r,buttons:n,button:t,...s})}))}async up(e={}){const{button:t=Wn.Left,clickCount:r=1}=e,i=Jn(t);if(!i)throw new Error(`Unsupported mouse button: ${t}`);if(!(this.#Ke.buttons&i))throw new Error(`'${t}' is not pressed.`);await this.#Vn((e=>{e({buttons:this.#Ke.buttons&~i});const{buttons:n,position:s}=this.#Ke;return this.#xe.send("Input.dispatchMouseEvent",{type:"mouseReleased",modifiers:this.#jn._modifiers,clickCount:r,buttons:n,button:t,...s})}))}async click(e,t,r={}){const{delay:i,count:n=1,clickCount:s=n}=r;if(n<1)throw new Error("Click must occur a positive number of times.");const a=[this.move(e,t)];if(s===n)for(let e=1;e<n;++e)a.push(this.down({...r,clickCount:e}),this.up({...r,clickCount:e}));a.push(this.down({...r,clickCount:s})),"number"==typeof i&&(await Promise.all(a),a.length=0,await new Promise((e=>{setTimeout(e,i)}))),a.push(this.up({...r,clickCount:s})),await Promise.all(a)}async wheel(e={}){const{deltaX:t=0,deltaY:r=0}=e,{position:i,buttons:n}=this.#Ke;await this.#xe.send("Input.dispatchMouseEvent",{type:"mouseWheel",pointerType:"mouse",modifiers:this.#jn._modifiers,deltaY:r,deltaX:t,buttons:n,...i})}async drag(e,t){const r=new Promise((e=>{this.#xe.once("Input.dragIntercepted",(t=>e(t.data)))}));return await this.move(e.x,e.y),await this.down(),await this.move(t.x,t.y),await r}async dragEnter(e,t){await this.#xe.send("Input.dispatchDragEvent",{type:"dragEnter",x:e.x,y:e.y,modifiers:this.#jn._modifiers,data:t})}async dragOver(e,t){await this.#xe.send("Input.dispatchDragEvent",{type:"dragOver",x:e.x,y:e.y,modifiers:this.#jn._modifiers,data:t})}async drop(e,t){await this.#xe.send("Input.dispatchDragEvent",{type:"drop",x:e.x,y:e.y,modifiers:this.#jn._modifiers,data:t})}async dragAndDrop(e,t,r={}){const{delay:i=null}=r,n=await this.drag(e,t);await this.dragEnter(t,n),await this.dragOver(t,n),i&&await new Promise((e=>setTimeout(e,i))),await this.drop(t,n),await this.up()}}class Zn extends Un{#xe;#jn;constructor(e,t){super(),this.#xe=e,this.#jn=t}updateClient(e){this.#xe=e}async touchStart(e,t){await this.#xe.send("Input.dispatchTouchEvent",{type:"touchStart",touchPoints:[{x:Math.round(e),y:Math.round(t),radiusX:.5,radiusY:.5,force:.5}],modifiers:this.#jn._modifiers})}async touchMove(e,t){await this.#xe.send("Input.dispatchTouchEvent",{type:"touchMove",touchPoints:[{x:Math.round(e),y:Math.round(t),radiusX:.5,radiusY:.5,force:.5}],modifiers:this.#jn._modifiers})}async touchEnd(){await this.#xe.send("Input.dispatchTouchEvent",{type:"touchEnd",touchPoints:[],modifiers:this.#jn._modifiers})}}class es{#xe;#Wn=!1;#zn;constructor(e){this.#xe=e}updateClient(e){this.#xe=e}async start(e={}){nt(!this.#Wn,"Cannot start recording trace while already recording trace.");const t=["-*","devtools.timeline","v8.execute","disabled-by-default-devtools.timeline","disabled-by-default-devtools.timeline.frame","toplevel","blink.console","blink.user_timing","latencyInfo","disabled-by-default-devtools.timeline.stack","disabled-by-default-v8.cpu_profiler"],{path:r,screenshots:i=!1,categories:n=t}=e;i&&n.push("disabled-by-default-devtools.screenshot");const s=n.filter((e=>e.startsWith("-"))).map((e=>e.slice(1))),a=n.filter((e=>!e.startsWith("-")));this.#zn=r,this.#Wn=!0,await this.#xe.send("Tracing.start",{transferMode:"ReturnAsStream",traceConfig:{excludedCategories:s,includedCategories:a}})}async stop(){const e=jt.create();return this.#xe.once("Tracing.tracingComplete",(async t=>{try{nt(t.stream,'Missing "stream"');const r=await It(this.#xe,t.stream),i=await Et(r,this.#zn);e.resolve(i??void 0)}catch(t){Gt(t)?e.reject(t):e.reject(new Error(`Unknown error: ${t}`))}})),await this.#xe.send("Tracing.end"),this.#Wn=!1,await e.valueOrThrow()}}
/**
 * @license
 * Copyright 2018 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class ts extends it{timeoutSettings=new er;#ge;constructor(e){super(),this.#ge=e}url(){return this.#ge}async evaluate(e,...t){return e=vt(this.evaluate.name,e),await this.mainRealm().evaluate(e,...t)}async evaluateHandle(e,...t){return e=vt(this.evaluateHandle.name,e),await this.mainRealm().evaluateHandle(e,...t)}async close(){throw new pt("WebWorker.close() is not supported")}}class rs extends ts{#Zt;#xe;#E;#M;constructor(e,t,r,i,n,s){super(t),this.#E=r,this.#xe=e,this.#M=i,this.#Zt=new Sn(this,new er),this.#xe.once("Runtime.executionContextCreated",(async t=>{this.#Zt.setContext(new fn(e,t.context,this.#Zt))})),this.#Zt.emitter.on("consoleapicalled",(async e=>{try{return n(e.type,e.args.map((e=>new nn(this.#Zt,e))),e.stackTrace)}catch(e){yt(e)}})),this.#xe.on("Runtime.exceptionThrown",s),this.#xe.once(Bt.Disconnected,(()=>{this.#Zt.dispose()})),this.#xe.send("Runtime.enable").catch(yt)}mainRealm(){return this.#Zt}get client(){return this.#xe}async close(){switch(this.#M){case Kt.SERVICE_WORKER:case Kt.SHARED_WORKER:await(this.client.connection()?.send("Target.closeTarget",{targetId:this.#E})),await(this.client.connection()?.send("Target.detachFromTarget",{sessionId:this.client.id()}));break;default:await this.evaluate((()=>{self.close()}))}}}
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var is=self&&self.__addDisposableResource||function(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if("function"!=typeof i)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t},ns=self&&self.__disposeResources||function(e){return function(t){function r(r){t.error=t.hasError?new e(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}return function e(){for(;t.stack.length;){var i=t.stack.pop();try{var n=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(n).then(e,(function(t){return r(t),e()}))}catch(e){r(e)}}if(t.hasError)throw t.error}()}}("function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i});function ss(e){return"warning"===e?"warn":e}class as extends Cr{static async _create(e,t,r){const i=new as(e,t);if(await i.#Un(),r)try{await i.setViewport(r)}catch(e){if(!Gt(e)||!jr(e))throw e;yt(e)}return i}#Se=!1;#Gn;#Qn;#Jn;#Xn;#Yn;#jn;#Zn;#es;#er;#ts;#rs;#nr=new Map;#is=new Map;#ns;#ss;#as=new Map;#os=new Set;#cs=jt.create();#ls=!1;#ds=!1;#us=[[wn.FrameAttached,e=>{this.emit("frameattached",e)}],[wn.FrameDetached,e=>{this.emit("framedetached",e)}],[wn.FrameNavigated,e=>{this.emit("framenavigated",e)}]];#hs=[[Fr.Request,e=>{this.emit("request",e)}],[Fr.RequestServedFromCache,e=>{this.emit("requestservedfromcache",e)}],[Fr.Response,e=>{this.emit("response",e)}],[Fr.RequestFailed,e=>{this.emit("requestfailed",e)}],[Fr.RequestFinished,e=>{this.emit("requestfinished",e)}]];#ps=[[Bt.Disconnected,()=>{this.#cs.reject(new ft("Target closed"))}],["Page.domContentEventFired",()=>this.emit("domcontentloaded",void 0)],["Page.loadEventFired",()=>this.emit("load",void 0)],["Page.javascriptDialogOpening",this.#fs.bind(this)],["Runtime.exceptionThrown",this.#ms.bind(this)],["Inspector.targetCrashed",this.#ys.bind(this)],["Performance.metrics",this.#gs.bind(this)],["Log.entryAdded",this.#ws.bind(this)],["Page.fileChooserOpened",this.#vs.bind(this)]];constructor(e,t){super(),this.#Qn=e,this.#Xn=e.parentSession(),nt(this.#Xn,"Tab target session is not defined."),this.#Yn=this.#Xn._target(),nt(this.#Yn,"Tab target is not defined."),this.#Jn=t,this.#Gn=t._targetManager(),this.#jn=new Qn(e),this.#Zn=new Yn(e,this.#jn),this.#es=new Zn(e,this.#jn),this.#er=new Kn(e,this,this._timeoutSettings),this.#ts=new Xr(e),this.#rs=new es(e),this.#ns=new Hr(e),this.#ss=null;for(const[e,t]of this.#us)this.#er.on(e,t);this.#er.on(wn.ConsoleApiCalled,(([e,t])=>{this.#ir(e,t)})),this.#er.on(wn.BindingCalled,(([e,t])=>{this.#rr(e,t)}));for(const[e,t]of this.#hs)this.#er.networkManager.on(e,t);this.#Xn.on(Bt.Swapped,this.#bs.bind(this)),this.#Xn.on(Bt.Ready,this.#ks.bind(this)),this.#Gn.on("targetGone",this.#Ss),this.#Yn._isClosedDeferred.valueOrThrow().then((()=>{this.#Gn.off("targetGone",this.#Ss),this.emit("close",void 0),this.#Se=!0})).catch(yt),this.#Cs(),this.#Ts()}#Ts(){const e=[];for(const t of this.#Gn.getChildTargets(this.#Jn))e.push(t);let t=0;for(;t<e.length;){const r=e[t];t++;const i=r._session();i&&this.#xt(i);for(const t of this.#Gn.getChildTargets(r))e.push(t)}}async#bs(e){this.#Qn=e,nt(this.#Qn instanceof Zt,"CDPSession is not instance of CDPSessionImpl"),this.#Jn=this.#Qn._target(),nt(this.#Jn,"Missing target on swap"),this.#jn.updateClient(e),this.#Zn.updateClient(e),this.#es.updateClient(e),this.#ts.updateClient(e),this.#rs.updateClient(e),this.#ns.updateClient(e),await this.#er.swapFrameTree(e),this.#Cs()}async#ks(e){nt(e instanceof Zt),"prerender"===e._target()._subtype()&&(this.#er.registerSpeculativeSession(e).catch(yt),this.#ts.registerSpeculativeSession(e).catch(yt))}#Cs(){this.#Qn.on(Bt.Ready,this.#xt);for(const[e,t]of this.#ps)this.#Qn.on(e,t)}#Ss=e=>{const t=e._session()?.id(),r=this.#as.get(t);r&&(this.#as.delete(t),this.emit("workerdestroyed",r))};#xt=e=>{if(nt(e instanceof Zt),this.#er.onAttachedToTarget(e._target()),"worker"===e._target()._getTargetInfo().type){const t=new rs(e,e._target().url(),e._target()._targetId,e._target().type(),this.#Es.bind(this),this.#ms.bind(this));this.#as.set(e.id(),t),this.emit("workercreated",t)}e.on(Bt.Ready,this.#xt)};async#Un(){try{await Promise.all([this.#er.initialize(this.#Qn),this.#Qn.send("Performance.enable"),this.#Qn.send("Log.enable")])}catch(e){if(!Gt(e)||!jr(e))throw e;yt(e)}}async#vs(e){const t={stack:[],error:void 0,hasError:!1};try{if(!this.#os.size)return;const r=this.#er.frame(e.frameId);nt(r,"This should never happen.");const i=is(t,await r.worlds[Cn].adoptBackendNode(e.backendNodeId),!1),n=new xr(i.move(),e);for(const e of this.#os)e.resolve(n);this.#os.clear()}catch(e){t.error=e,t.hasError=!0}finally{ns(t)}}_client(){return this.#Qn}isServiceWorkerBypassed(){return this.#ls}isDragInterceptionEnabled(){return this.#ds}isJavaScriptEnabled(){return this.#ts.javascriptEnabled}async waitForFileChooser(e={}){const t=0===this.#os.size,{timeout:r=this._timeoutSettings.timeout()}=e,i=jt.create({message:`Waiting for \`FileChooser\` failed: ${r}ms exceeded`,timeout:r});let n;this.#os.add(i),t&&(n=this.#Qn.send("Page.setInterceptFileChooserDialog",{enabled:!0}));try{const[e]=await Promise.all([i.valueOrThrow(),n]);return e}catch(e){throw this.#os.delete(i),e}}async setGeolocation(e){return await this.#ts.setGeolocation(e)}target(){return this.#Jn}browser(){return this.#Jn.browser()}browserContext(){return this.#Jn.browserContext()}#ys(){this.emit("error",new Error("Page crashed!"))}#ws(e){const{level:t,text:r,args:i,source:n,url:s,lineNumber:a}=e.entry;i&&i.map((e=>{sn(this.#Qn,e)})),"worker"!==n&&this.emit("console",new Ir(ss(t),r,[],[{url:s,lineNumber:a}]))}mainFrame(){return this.#er.mainFrame()}get keyboard(){return this.#jn}get touchscreen(){return this.#es}get coverage(){return this.#ns}get tracing(){return this.#rs}frames(){return this.#er.frames()}workers(){return Array.from(this.#as.values())}async setRequestInterception(e){return await this.#er.networkManager.setRequestInterception(e)}async setBypassServiceWorker(e){return this.#ls=e,await this.#Qn.send("Network.setBypassServiceWorker",{bypass:e})}async setDragInterception(e){return this.#ds=e,await this.#Qn.send("Input.setInterceptDrags",{enabled:e})}async setOfflineMode(e){return await this.#er.networkManager.setOfflineMode(e)}async emulateNetworkConditions(e){return await this.#er.networkManager.emulateNetworkConditions(e)}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e)}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e)}getDefaultTimeout(){return this._timeoutSettings.timeout()}async queryObjects(e){nt(!e.disposed,"Prototype JSHandle is disposed!"),nt(e.id,"Prototype JSHandle must not be referencing primitive value");const t=await this.mainFrame().client.send("Runtime.queryObjects",{prototypeObjectId:e.id});return this.mainFrame().mainRealm().createCdpHandle(t.objects)}async cookies(...e){const t=(await this.#Qn.send("Network.getCookies",{urls:e.length?e:[this.url()]})).cookies,r=["sourcePort"];return t.map((e=>{for(const t of r)delete e[t];return e}))}async deleteCookie(...e){const t=this.url();for(const r of e){const e=Object.assign({},r);!r.url&&t.startsWith("http")&&(e.url=t),await this.#Qn.send("Network.deleteCookies",e)}}async setCookie(...e){const t=this.url(),r=t.startsWith("http"),i=e.map((e=>{const i=Object.assign({},e);return!i.url&&r&&(i.url=t),nt("about:blank"!==i.url,`Blank page can not have cookie "${i.name}"`),nt(!String.prototype.startsWith.call(i.url||"","data:"),`Data URL page can not have cookie "${i.name}"`),i}));await this.deleteCookie(...i),i.length&&await this.#Qn.send("Network.setCookies",{cookies:i})}async exposeFunction(e,t){if(this.#nr.has(e))throw new Error(`Failed to add page binding with name ${e}: window['${e}'] already exists!`);const r=function(e,t){return St(tn,e,t,rn)}("exposedFun",e);let i;if("function"==typeof t)i=new qr(e,t,r);else i=new qr(e,t.default,r);this.#nr.set(e,i);const[{identifier:n}]=await Promise.all([this.#er.evaluateOnNewDocument(r),this.#er.addExposedFunctionBinding(i)]);this.#is.set(e,n)}async removeExposedFunction(e){const t=this.#is.get(e);if(!t)throw new Error(`Function with name "${e}" does not exist`);const r=this.#nr.get(e);this.#is.delete(e),this.#nr.delete(e),await Promise.all([this.#er.removeScriptToEvaluateOnNewDocument(t),this.#er.removeExposedFunctionBinding(r)])}async authenticate(e){return await this.#er.networkManager.authenticate(e)}async setExtraHTTPHeaders(e){return await this.#er.networkManager.setExtraHTTPHeaders(e)}async setUserAgent(e,t){return await this.#er.networkManager.setUserAgent(e,t)}async metrics(){const e=await this.#Qn.send("Performance.getMetrics");return this.#Is(e.metrics)}#gs(e){this.emit("metrics",{title:e.title,metrics:this.#Is(e.metrics)})}#Is(e){const t={};for(const r of e||[])os.has(r.name)&&(t[r.name]=r.value);return t}#ms(e){this.emit("pageerror",function(e){let t,r;if(e.exception){if(!("object"===e.exception.type&&"error"===e.exception.subtype||e.exception.objectId))return en(e.exception);{const i=Zi(e);t=i.name,r=i.message}}else t="Error",r=e.text;const i=new Error(r);i.name=t;const n=i.message.split("\n").length,s=i.stack.split("\n").splice(0,n),a=[];if(e.stackTrace)for(const t of e.stackTrace.callFrames)if(a.push(`    at ${t.functionName||"<anonymous>"} (${t.url}:${t.lineNumber+1}:${t.columnNumber+1})`),a.length>=Error.stackTraceLimit)break;return i.stack=[...s,...a].join("\n"),i}(e.exceptionDetails))}#ir(e,t){const r=t.args.map((t=>e.createCdpHandle(t)));this.#Es(ss(t.type),r,t.stackTrace)}async#rr(e,t){let r;try{r=JSON.parse(t.payload)}catch{return}const{type:i,name:n,seq:s,args:a,isTrivial:o}=r;if("exposedFun"!==i)return;const c=e.context;if(!c)return;const l=this.#nr.get(n);await(l?.run(c,s,a,o))}#Es(e,t,r){if(!this.listenerCount("console"))return void t.forEach((e=>e.dispose()));const i=[];for(const e of t){const t=e.remoteObject();t.objectId?i.push(e.toString()):i.push(en(t))}const n=[];if(r)for(const e of r.callFrames)n.push({url:e.url,lineNumber:e.lineNumber,columnNumber:e.columnNumber});const s=new Ir(ss(e),i.join(" "),t,n);this.emit("console",s)}#fs(e){const t=function(e){let t=null;return new Set(["alert","confirm","prompt","beforeunload"]).has(e)&&(t=e),nt(t,`Unknown javascript dialog type: ${e}`),t}(e.type),r=new zr(this.#Qn,t,e.message,e.defaultPrompt);this.emit("dialog",r)}async reload(e){const[t]=await Promise.all([this.waitForNavigation({...e,ignoreSameDocumentNavigation:!0}),this.#Qn.send("Page.reload")]);return t}async createCDPSession(){return await this.target().createCDPSession()}async goBack(e={}){return await this.#xs(-1,e)}async goForward(e={}){return await this.#xs(1,e)}async#xs(e,t){const r=await this.#Qn.send("Page.getNavigationHistory"),i=r.entries[r.currentIndex+e];if(!i)return null;return(await Promise.all([this.waitForNavigation(t),this.#Qn.send("Page.navigateToHistoryEntry",{entryId:i.id})]))[0]}async bringToFront(){await this.#Qn.send("Page.bringToFront")}async setJavaScriptEnabled(e){return await this.#ts.setJavaScriptEnabled(e)}async setBypassCSP(e){await this.#Qn.send("Page.setBypassCSP",{enabled:e})}async emulateMediaType(e){return await this.#ts.emulateMediaType(e)}async emulateCPUThrottling(e){return await this.#ts.emulateCPUThrottling(e)}async emulateMediaFeatures(e){return await this.#ts.emulateMediaFeatures(e)}async emulateTimezone(e){return await this.#ts.emulateTimezone(e)}async emulateIdleState(e){return await this.#ts.emulateIdleState(e)}async emulateVisionDeficiency(e){return await this.#ts.emulateVisionDeficiency(e)}async setViewport(e){const t=await this.#ts.emulateViewport(e);this.#ss=e,t&&await this.reload()}viewport(){return this.#ss}async evaluateOnNewDocument(e,...t){const r=St(e,...t);return await this.#er.evaluateOnNewDocument(r)}async removeScriptToEvaluateOnNewDocument(e){return await this.#er.removeScriptToEvaluateOnNewDocument(e)}async setCacheEnabled(e=!0){await this.#er.networkManager.setCacheEnabled(e)}async _screenshot(e){const t={stack:[],error:void 0,hasError:!1};try{const{fromSurface:r,omitBackground:i,optimizeForSpeed:n,quality:s,clip:a,type:o,captureBeyondViewport:c}=e,l=this.target()._targetManager()instanceof Yr,d=is(t,new rt,!0);l||!i||"png"!==o&&"webp"!==o||(await this.#ts.setTransparentBackgroundColor(),d.defer((async()=>{await this.#ts.resetDefaultBackgroundColor().catch(yt)})));let u=a;if(u&&!c){u=function(e,t){const r=Math.max(e.x,t.x),i=Math.max(e.y,t.y);return{x:r,y:i,width:Math.max(Math.min(e.x+e.width,t.x+t.width)-r,0),height:Math.max(Math.min(e.y+e.height,t.y+t.height)-i,0)}}
/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */(u,await this.mainFrame().isolatedRealm().evaluate((()=>{const{height:e,pageLeft:t,pageTop:r,width:i}=window.visualViewport;return{x:t,y:r,height:e,width:i}})))}const{data:h}=await this.#Qn.send("Page.captureScreenshot",{format:o,...n?{optimizeForSpeed:n}:{},...void 0!==s?{quality:Math.round(s)}:{},...u?{clip:{...u,scale:u.scale??1}}:{},...r?{}:{fromSurface:r},captureBeyondViewport:c});return h}catch(e){t.error=e,t.hasError=!0}finally{const e=ns(t);e&&await e}}async createPDFStream(e={}){const{timeout:t=this._timeoutSettings.timeout()}=e,{landscape:r,displayHeaderFooter:i,headerTemplate:n,footerTemplate:s,printBackground:a,scale:o,width:c,height:l,margin:d,pageRanges:u,preferCSSPageSize:h,omitBackground:p,tagged:f,outline:m,waitForFonts:y}=function(e={},t="in"){let r=8.5,i=11;if(e.format){const t=mt[e.format.toLowerCase()];nt(t,"Unknown paper format: "+e.format),r=t.width,i=t.height}else r=Rt(e.width,t)??r,i=Rt(e.height,t)??i;const n={top:Rt(e.margin?.top,t)||0,left:Rt(e.margin?.left,t)||0,bottom:Rt(e.margin?.bottom,t)||0,right:Rt(e.margin?.right,t)||0};return e.outline&&(e.tagged=!0),{scale:1,displayHeaderFooter:!1,headerTemplate:"",footerTemplate:"",printBackground:!1,landscape:!1,pageRanges:"",preferCSSPageSize:!1,omitBackground:!1,outline:!1,tagged:!0,waitForFonts:!0,...e,width:r,height:i,margin:n}}(e);p&&await this.#ts.setTransparentBackgroundColor(),y&&await Se(ve(this.mainFrame().isolatedRealm().evaluate((()=>document.fonts.ready))).pipe(Je(xt(t))));const g=this.#Qn.send("Page.printToPDF",{transferMode:"ReturnAsStream",landscape:r,displayHeaderFooter:i,headerTemplate:n,footerTemplate:s,printBackground:a,scale:o,paperWidth:c,paperHeight:l,marginTop:d.top,marginBottom:d.bottom,marginLeft:d.left,marginRight:d.right,pageRanges:u,preferCSSPageSize:h,generateTaggedPDF:f,generateDocumentOutline:m}),w=await Se(ve(g).pipe(Je(xt(t))));return p&&await this.#ts.resetDefaultBackgroundColor(),nt(w.stream,"`stream` is missing from `Page.printToPDF"),await It(this.#Qn,w.stream)}async pdf(e={}){const{path:t}=e,r=await this.createPDFStream(e),i=await Et(r,t);return nt(i,"Could not create buffer"),i}async close(e={runBeforeUnload:void 0}){const t={stack:[],error:void 0,hasError:!1};try{is(t,await this.browserContext().waitForScreenshotOperations(),!1);const r=this.#Qn.connection();nt(r,"Protocol error: Connection closed. Most likely the page has been closed.");!!e.runBeforeUnload?await this.#Qn.send("Page.close"):(await r.send("Target.closeTarget",{targetId:this.#Jn._targetId}),await this.#Yn._isClosedDeferred.valueOrThrow())}catch(e){t.error=e,t.hasError=!0}finally{ns(t)}}isClosed(){return this.#Se}get mouse(){return this.#Zn}async waitForDevicePrompt(e={}){return await this.mainFrame().waitForDevicePrompt(e)}}const os=new Set(["Timestamp","Documents","Frames","JSEventListeners","Nodes","LayoutCount","RecalcStyleCount","LayoutDuration","RecalcStyleDuration","ScriptDuration","TaskDuration","JSHeapUsedSize","JSHeapTotalSize"]);var cs;!function(e){e.SUCCESS="success",e.ABORTED="aborted"}(cs||(cs={}));class ls extends Ut{#Fs;#_s;#Ds;#Gn;#Ps;#Rs=new Set;_initializedDeferred=jt.create();_isClosedDeferred=jt.create();_targetId;constructor(e,t,r,i,n){super(),this.#_s=t,this.#Gn=i,this.#Ds=e,this.#Fs=r,this._targetId=e.targetId,this.#Ps=n,this.#_s&&this.#_s instanceof Zt&&this.#_s._setTarget(this)}async asPage(){const e=this._session();return e?await as._create(e,this,null):await this.createCDPSession().then((e=>as._create(e,this,null)))}_subtype(){return this.#Ds.subtype}_session(){return this.#_s}_addChildTarget(e){this.#Rs.add(e)}_removeChildTarget(e){this.#Rs.delete(e)}_childTargets(){return this.#Rs}_sessionFactory(){if(!this.#Ps)throw new Error("sessionFactory is not initialized");return this.#Ps}createCDPSession(){if(!this.#Ps)throw new Error("sessionFactory is not initialized");return this.#Ps(!1).then((e=>(e._setTarget(this),e)))}url(){return this.#Ds.url}type(){switch(this.#Ds.type){case"page":return Kt.PAGE;case"background_page":return Kt.BACKGROUND_PAGE;case"service_worker":return Kt.SERVICE_WORKER;case"shared_worker":return Kt.SHARED_WORKER;case"browser":return Kt.BROWSER;case"webview":return Kt.WEBVIEW;case"tab":return Kt.TAB;default:return Kt.OTHER}}_targetManager(){if(!this.#Gn)throw new Error("targetManager is not initialized");return this.#Gn}_getTargetInfo(){return this.#Ds}browser(){if(!this.#Fs)throw new Error("browserContext is not initialized");return this.#Fs.browser()}browserContext(){if(!this.#Fs)throw new Error("browserContext is not initialized");return this.#Fs}opener(){const{openerId:e}=this.#Ds;if(e)return this.browser().targets().find((t=>t._targetId===e))}_targetInfoChanged(e){this.#Ds=e,this._checkIfInitialized()}_initialize(){this._initializedDeferred.resolve(cs.SUCCESS)}_isTargetExposed(){return this.type()!==Kt.TAB&&!this._subtype()}_checkIfInitialized(){this._initializedDeferred.resolved()||this._initializedDeferred.resolve(cs.SUCCESS)}}class ds extends ls{#Ms;pagePromise;constructor(e,t,r,i,n,s){super(e,t,r,i,n),this.#Ms=s??void 0}_initialize(){this._initializedDeferred.valueOrThrow().then((async e=>{if(e===cs.ABORTED)return;const t=this.opener();if(!(t instanceof ds))return;if(!t||!t.pagePromise||"page"!==this.type())return!0;const r=await t.pagePromise;if(!r.listenerCount("popup"))return!0;const i=await this.page();return r.emit("popup",i),!0})).catch(yt),this._checkIfInitialized()}async page(){if(!this.pagePromise){const e=this._session();this.pagePromise=(e?Promise.resolve(e):this._sessionFactory()(!1)).then((e=>as._create(e,this,this.#Ms??null)))}return await this.pagePromise??null}_checkIfInitialized(){this._initializedDeferred.resolved()||""!==this._getTargetInfo().url&&this._initializedDeferred.resolve(cs.SUCCESS)}}class us extends ds{}class hs extends ls{#As;async worker(){if(!this.#As){const e=this._session();this.#As=(e?Promise.resolve(e):this._sessionFactory()(!1)).then((e=>new rs(e,this._getTargetInfo().url,this._targetId,this.type(),(()=>{}),(()=>{}))))}return await this.#As}}class ps extends ls{}
/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class fs extends it{#C;#yt=new Map;#Os=new Map;#qs=new Map;#Ns=new Set;#vt;#bt;#kt=new WeakMap;#Bs=new WeakMap;#St=jt.create();#Ct=new Set;#Ls=!0;#js=[{}];constructor(e,t,r,i=!0){super(),this.#C=e,this.#vt=r,this.#bt=t,this.#Ls=i,this.#C.on("Target.targetCreated",this.#Tt),this.#C.on("Target.targetDestroyed",this.#Et),this.#C.on("Target.targetInfoChanged",this.#Hs),this.#C.on(Bt.SessionDetached,this.#It),this.#$s(this.#C)}#Ks=()=>{if(this.#Ls)for(const[e,t]of this.#yt.entries()){const r=new ls(t,void 0,void 0,this,void 0),i="browser"===t.type||t.url.startsWith("chrome-extension://");this.#vt&&!this.#vt(r)||i||this.#Ct.add(e)}};async initialize(){await this.#C.send("Target.setDiscoverTargets",{discover:!0,filter:this.#js}),this.#Ks(),await this.#C.send("Target.setAutoAttach",{waitForDebuggerOnStart:!0,flatten:!0,autoAttach:!0,filter:[{type:"page",exclude:!0},...this.#js]}),this.#Ft(),await this.#St.valueOrThrow()}getChildTargets(e){return e._childTargets()}dispose(){this.#C.off("Target.targetCreated",this.#Tt),this.#C.off("Target.targetDestroyed",this.#Et),this.#C.off("Target.targetInfoChanged",this.#Hs),this.#C.off(Bt.SessionDetached,this.#It),this.#Vs(this.#C)}getAvailableTargets(){return this.#Os}#$s(e){const t=t=>{this.#xt(e,t)};nt(!this.#kt.has(e)),this.#kt.set(e,t),e.on("Target.attachedToTarget",t);const r=t=>this.#Ss(e,t);nt(!this.#Bs.has(e)),this.#Bs.set(e,r),e.on("Target.detachedFromTarget",r)}#Vs(e){const t=this.#kt.get(e);t&&(e.off("Target.attachedToTarget",t),this.#kt.delete(e)),this.#Bs.has(e)&&(e.off("Target.detachedFromTarget",this.#Bs.get(e)),this.#Bs.delete(e))}#It=e=>{this.#Vs(e)};#Tt=async e=>{if(this.#yt.set(e.targetInfo.targetId,e.targetInfo),this.emit("targetDiscovered",e.targetInfo),"browser"===e.targetInfo.type&&e.targetInfo.attached){if(this.#Os.has(e.targetInfo.targetId))return;const t=this.#bt(e.targetInfo,void 0);t._initialize(),this.#Os.set(e.targetInfo.targetId,t)}};#Et=e=>{const t=this.#yt.get(e.targetId);if(this.#yt.delete(e.targetId),this.#Ft(e.targetId),"service_worker"===t?.type&&this.#Os.has(e.targetId)){const t=this.#Os.get(e.targetId);t&&(this.emit("targetGone",t),this.#Os.delete(e.targetId))}};#Hs=e=>{if(this.#yt.set(e.targetInfo.targetId,e.targetInfo),this.#Ns.has(e.targetInfo.targetId)||!this.#Os.has(e.targetInfo.targetId)||!e.targetInfo.attached)return;const t=this.#Os.get(e.targetInfo.targetId);if(!t)return;const r=t.url(),i=t._initializedDeferred.value()===cs.SUCCESS;if(function(e,t){return Boolean(e._subtype())&&!t.subtype}(t,e.targetInfo)){const e=t?._session();nt(e,"Target that is being activated is missing a CDPSession."),e.parentSession()?.emit(Bt.Swapped,e)}t._targetInfoChanged(e.targetInfo),i&&r!==t.url()&&this.emit("targetChanged",{target:t,wasInitialized:i,previousURL:r})};#xt=async(e,t)=>{const r=t.targetInfo,i=this.#C.session(t.sessionId);if(!i)throw new Error(`Session ${t.sessionId} was not created.`);const n=async()=>{await i.send("Runtime.runIfWaitingForDebugger").catch(yt),await e.send("Target.detachFromTarget",{sessionId:i.id()}).catch(yt)};if(!this.#C.isAutoAttached(r.targetId))return;if("service_worker"===r.type){if(this.#Ft(r.targetId),await n(),this.#Os.has(r.targetId))return;const e=this.#bt(r);return e._initialize(),this.#Os.set(r.targetId,e),void this.emit("targetAvailable",e)}const s=this.#Os.has(r.targetId),a=s?this.#Os.get(r.targetId):this.#bt(r,i,e instanceof Lt?e:void 0);if(this.#vt&&!this.#vt(a))return this.#Ns.add(r.targetId),this.#Ft(r.targetId),void await n();this.#$s(i),s?(i._setTarget(a),this.#qs.set(i.id(),this.#Os.get(r.targetId))):(a._initialize(),this.#Os.set(r.targetId,a),this.#qs.set(i.id(),a));const o=e instanceof Lt?e._target():null;o?._addChildTarget(a),e.emit(Bt.Ready,i),this.#Ct.delete(a._targetId),s||this.emit("targetAvailable",a),this.#Ft(),await Promise.all([i.send("Target.setAutoAttach",{waitForDebuggerOnStart:!0,flatten:!0,autoAttach:!0,filter:this.#js}),i.send("Runtime.runIfWaitingForDebugger")]).catch(yt)};#Ft(e){void 0!==e&&this.#Ct.delete(e),0===this.#Ct.size&&this.#St.resolve()}#Ss=(e,t)=>{const r=this.#qs.get(t.sessionId);this.#qs.delete(t.sessionId),r&&(e instanceof Lt&&e._target()._removeChildTarget(r),this.#Os.delete(r._targetId),this.emit("targetGone",r))}}
/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class ms extends Nt{protocol="cdp";static async _create(e,t,r,i,n,s,a,o,c,l=!0){const d=new ms(e,t,r,n,s,a,o,c,l);return i&&await t.send("Security.setIgnoreCertificateErrors",{ignore:!0}),await d._attach(),d}#Ms;#Ws;#C;#zs;#vt;#Us;#Gs;#Qs=new Map;#Gn;constructor(e,t,r,i,n,s,a,o,c=!0){super(),e=e||"chrome",this.#Ms=i,this.#Ws=n,this.#C=t,this.#zs=s||(()=>{}),this.#vt=a||(()=>!0),this.#Js(o),this.#Gn="firefox"===e?new Yr(t,this.#Xs,this.#vt):new fs(t,this.#Xs,this.#vt,c),this.#Gs=new zt(this.#C,this);for(const e of r)this.#Qs.set(e,new zt(this.#C,this,e))}#Ys=()=>{this.emit("disconnected",void 0)};async _attach(){this.#C.on(Bt.Disconnected,this.#Ys),this.#Gn.on("targetAvailable",this.#xt),this.#Gn.on("targetGone",this.#Ss),this.#Gn.on("targetChanged",this.#Zs),this.#Gn.on("targetDiscovered",this.#ea),await this.#Gn.initialize()}_detach(){this.#C.off(Bt.Disconnected,this.#Ys),this.#Gn.off("targetAvailable",this.#xt),this.#Gn.off("targetGone",this.#Ss),this.#Gn.off("targetChanged",this.#Zs),this.#Gn.off("targetDiscovered",this.#ea)}process(){return this.#Ws??null}_targetManager(){return this.#Gn}#Js(e){this.#Us=e||(e=>"page"===e.type()||"background_page"===e.type()||"webview"===e.type())}_getIsPageTargetCallback(){return this.#Us}async createBrowserContext(e={}){const{proxyServer:t,proxyBypassList:r}=e,{browserContextId:i}=await this.#C.send("Target.createBrowserContext",{proxyServer:t,proxyBypassList:r&&r.join(",")}),n=new zt(this.#C,this,i);return this.#Qs.set(i,n),n}browserContexts(){return[this.#Gs,...Array.from(this.#Qs.values())]}defaultBrowserContext(){return this.#Gs}async _disposeContext(e){e&&(await this.#C.send("Target.disposeBrowserContext",{browserContextId:e}),this.#Qs.delete(e))}#Xs=(e,t)=>{const{browserContextId:r}=e,i=r&&this.#Qs.has(r)?this.#Qs.get(r):this.#Gs;if(!i)throw new Error("Missing browser context");const n=t=>this.#C._createSession(e,t),s=new ps(e,t,i,this.#Gn,n);return e.url?.startsWith("devtools://")?new us(e,t,i,this.#Gn,n,this.#Ms??null):this.#Us(s)?new ds(e,t,i,this.#Gn,n,this.#Ms??null):"service_worker"===e.type||"shared_worker"===e.type?new hs(e,t,i,this.#Gn,n):s};#xt=async e=>{e._isTargetExposed()&&await e._initializedDeferred.valueOrThrow()===cs.SUCCESS&&(this.emit("targetcreated",e),e.browserContext().emit("targetcreated",e))};#Ss=async e=>{e._initializedDeferred.resolve(cs.ABORTED),e._isClosedDeferred.resolve(),e._isTargetExposed()&&await e._initializedDeferred.valueOrThrow()===cs.SUCCESS&&(this.emit("targetdestroyed",e),e.browserContext().emit("targetdestroyed",e))};#Zs=({target:e})=>{this.emit("targetchanged",e),e.browserContext().emit("targetchanged",e)};#ea=e=>{this.emit("targetdiscovered",e)};wsEndpoint(){return this.#C.url()}async newPage(){return await this.#Gs.newPage()}async _createPageInContext(e){const{targetId:t}=await this.#C.send("Target.createTarget",{url:"about:blank",browserContextId:e||void 0}),r=await this.waitForTarget((e=>e._targetId===t));if(!r)throw new Error(`Missing target for page (id = ${t})`);if(!(await r._initializedDeferred.valueOrThrow()===cs.SUCCESS))throw new Error(`Failed to create target for page (id = ${t})`);const i=await r.page();if(!i)throw new Error(`Failed to create a page for context (id = ${e})`);return i}targets(){return Array.from(this.#Gn.getAvailableTargets().values()).filter((e=>e._isTargetExposed()&&e._initializedDeferred.value()===cs.SUCCESS))}target(){const e=this.targets().find((e=>"browser"===e.type()));if(!e)throw new Error("Browser target is not found");return e}async version(){return(await this.#ta()).product}async userAgent(){return(await this.#ta()).userAgent}async close(){await this.#zs.call(null),await this.disconnect()}disconnect(){return this.#Gn.dispose(),this.#C.dispose(),this._detach(),Promise.resolve()}get connected(){return!this.#C._closed}#ta(){return this.#C.send("Browser.getVersion")}get debugInfo(){return{pendingProtocolErrors:this.#C.getPendingProtocolErrors()}}}export{ms as Browser,Lr as Connection,ln as ElementHandle,_n as Frame,as as Page,ls as Target};
=======
const e=(e,t)=>{if(!e)throw new Error(t)},t=!("undefined"==typeof process||!process.version),i="undefined"!=typeof process&&void 0!==process.env.PUPPETEER_DEFERRED_PROMISE_DEBUG_TIMEOUT?Number(process.env.PUPPETEER_DEFERRED_PROMISE_DEBUG_TIMEOUT):-1;let s=null;const r=e=>t?async(...t)=>{o&&n.push(e+t),(await async function(){return s||(s=(await import("debug")).default),s}())(e)(t)}:(...t)=>{const i=globalThis.__PUPPETEER_DEBUG;if(!i)return;("*"===i||(i.endsWith("*")?e.startsWith(i):e===i))&&console.log(`${e}:`,...t)};let n=[],o=!1;class a{constructor(){var e;this.eventsMap=new Map,this.emitter={all:e=(e=this.eventsMap)||new Map,on:function(t,i){var s=e.get(t);s?s.push(i):e.set(t,[i])},off:function(t,i){var s=e.get(t);s&&(i?s.splice(s.indexOf(i)>>>0,1):e.set(t,[]))},emit:function(t,i){var s=e.get(t);s&&s.slice().map((function(e){e(i)})),(s=e.get("*"))&&s.slice().map((function(e){e(t,i)}))}}}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}removeListener(e,t){return this.off(e,t),this}addListener(e,t){return this.on(e,t),this}emit(e,t){return this.emitter.emit(e,t),this.eventListenersCount(e)>0}once(e,t){const i=s=>{t(s),this.off(e,i)};return this.on(e,i)}listenerCount(e){return this.eventListenersCount(e)}removeAllListeners(e){return e?this.eventsMap.delete(e):this.eventsMap.clear(),this}eventListenersCount(e){var t;return(null===(t=this.eventsMap.get(e))||void 0===t?void 0:t.length)||0}}var c,d,l=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},h=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class f extends Error{constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}class u extends f{}class w extends f{constructor(){super(...arguments),c.set(this,void 0),d.set(this,"")}set code(e){l(this,c,e,"f")}get code(){return h(this,c,"f")}set originalMessage(e){l(this,d,e,"f")}get originalMessage(){return h(this,d,"f")}}c=new WeakMap,d=new WeakMap;Object.freeze({TimeoutError:u,ProtocolError:w});var m,p,y,g,v,k,b,E,C,M,P,_,T,x,I=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},N=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};const S=r("puppeteer:protocol:SEND ►"),F=r("puppeteer:protocol:RECV ◀"),W={Disconnected:Symbol("Connection.Disconnected")};class R extends a{constructor(e,t,i=0){super(),m.add(this),p.set(this,void 0),y.set(this,void 0),g.set(this,void 0),v.set(this,0),k.set(this,new Map),b.set(this,!1),E.set(this,new Map),C.set(this,new Set),I(this,p,e,"f"),I(this,g,i,"f"),I(this,y,t,"f"),N(this,y,"f").onmessage=this.onMessage.bind(this),N(this,y,"f").onclose=N(this,m,"m",M).bind(this)}static fromSession(e){return e.connection()}get _closed(){return N(this,b,"f")}get _sessions(){return N(this,k,"f")}session(e){return N(this,k,"f").get(e)||null}url(){return N(this,p,"f")}send(e,...t){const i=t.length?t[0]:void 0,s=this._rawSend({method:e,params:i});return new Promise(((t,i)=>{N(this,E,"f").set(s,{resolve:t,reject:i,error:new w,method:e})}))}_rawSend(e){var t;const i=I(this,v,(t=N(this,v,"f"),++t),"f"),s=JSON.stringify(Object.assign({},e,{id:i}));return S(s),N(this,y,"f").send(s),i}async onMessage(e){N(this,g,"f")&&await new Promise((e=>setTimeout(e,N(this,g,"f")))),F(e);const t=JSON.parse(e);if("Target.attachedToTarget"===t.method){const e=t.params.sessionId,i=new j(this,t.params.targetInfo.type,e);N(this,k,"f").set(e,i),this.emit("sessionattached",i);const s=N(this,k,"f").get(t.sessionId);s&&s.emit("sessionattached",i)}else if("Target.detachedFromTarget"===t.method){const e=N(this,k,"f").get(t.params.sessionId);if(e){e._onClosed(),N(this,k,"f").delete(t.params.sessionId),this.emit("sessiondetached",e);const i=N(this,k,"f").get(t.sessionId);i&&i.emit("sessiondetached",e)}}if(t.sessionId){const e=N(this,k,"f").get(t.sessionId);e&&e._onMessage(t)}else if(t.id){const e=N(this,E,"f").get(t.id);e&&(N(this,E,"f").delete(t.id),t.error?e.reject(A(e.error,e.method,t)):e.resolve(t.result))}else this.emit(t.method,t.params)}dispose(){N(this,m,"m",M).call(this),N(this,y,"f").close()}isAutoAttached(e){return!N(this,C,"f").has(e)}async _createSession(e,t=!0){t||N(this,C,"f").add(e.targetId);const{sessionId:i}=await this.send("Target.attachToTarget",{targetId:e.targetId,flatten:!0});N(this,C,"f").delete(e.targetId);const s=N(this,k,"f").get(i);if(!s)throw new Error("CDPSession creation failed.");return s}async createSession(e){return await this._createSession(e,!1)}}p=new WeakMap,y=new WeakMap,g=new WeakMap,v=new WeakMap,k=new WeakMap,b=new WeakMap,E=new WeakMap,C=new WeakMap,m=new WeakSet,M=function(){if(!N(this,b,"f")){I(this,b,!0,"f"),N(this,y,"f").onmessage=void 0,N(this,y,"f").onclose=void 0;for(const e of N(this,E,"f").values())e.reject(O(e.error,`Protocol error (${e.method}): Target closed.`));N(this,E,"f").clear();for(const e of N(this,k,"f").values())e._onClosed();N(this,k,"f").clear(),this.emit(W.Disconnected)}};const D={Disconnected:Symbol("CDPSession.Disconnected")};class q extends a{constructor(){super()}connection(){throw new Error("Not implemented")}send(){throw new Error("Not implemented")}async detach(){throw new Error("Not implemented")}id(){throw new Error("Not implemented")}}class j extends q{constructor(e,t,i){super(),P.set(this,void 0),_.set(this,void 0),T.set(this,new Map),x.set(this,void 0),I(this,x,e,"f"),I(this,_,t,"f"),I(this,P,i,"f")}connection(){return N(this,x,"f")}send(e,...t){if(!N(this,x,"f"))return Promise.reject(new Error(`Protocol error (${e}): Session closed. Most likely the ${N(this,_,"f")} has been closed.`));const i=t.length?t[0]:void 0,s=N(this,x,"f")._rawSend({sessionId:N(this,P,"f"),method:e,params:i});return new Promise(((t,i)=>{N(this,T,"f").set(s,{resolve:t,reject:i,error:new w,method:e})}))}_onMessage(t){const i=t.id?N(this,T,"f").get(t.id):void 0;t.id&&i?(N(this,T,"f").delete(t.id),t.error?i.reject(A(i.error,i.method,t)):i.resolve(t.result)):(e(!t.id),this.emit(t.method,t.params))}async detach(){if(!N(this,x,"f"))throw new Error(`Session already detached. Most likely the ${N(this,_,"f")} has been closed.`);await N(this,x,"f").send("Target.detachFromTarget",{sessionId:N(this,P,"f")})}_onClosed(){for(const e of N(this,T,"f").values())e.reject(O(e.error,`Protocol error (${e.method}): Target closed.`));N(this,T,"f").clear(),I(this,x,void 0,"f"),this.emit(D.Disconnected)}id(){return N(this,P,"f")}}function A(e,t,i){let s=`Protocol error (${t}): ${i.error.message}`;return"data"in i.error&&(s+=` ${i.error.data}`),O(e,s,i.error.message)}function O(e,t,i){return e.message=t,e.originalMessage=null!=i?i:e.originalMessage,e}function K(e){return e.message.includes("Target closed")||e.message.includes("Session closed")}function L(e){return"object"==typeof e&&null!==e&&"name"in e&&"message"in e}P=new WeakMap,_=new WeakMap,T=new WeakMap,x=new WeakMap;const $=Symbol("mainWorld"),B=Symbol("puppeteerWorld");async function H(e,t,i,s){const{nodes:r}=await e.send("Accessibility.queryAXTree",{objectId:t.remoteObject().objectId,accessibleName:i,role:s});return r.filter((e=>!e.role||"StaticText"!==e.role.value))}const U=e=>e.replace(/ +/g," ").trim(),V=new Set(["name","role"]),z=/\[\s*(?<attribute>\w+)\s*=\s*(?<quote>"|')(?<value>\\.|.*?(?=\k<quote>))\k<quote>\s*\]/g;function G(t){const i={},s=t.replace(z,((t,s,r,n)=>(s=s.trim(),e(function(e){return V.has(e)}(s),`Unknown aria attribute "${s}" in selector`),i[s]=U(n),"")));return s&&!i.name&&(i.name=U(s)),i}const Q=async(e,t)=>{const{name:i,role:s}=G(t),r=await H(e.client,e,i,s);return r[0]&&r[0].backendDOMNodeId?r[0].backendDOMNodeId:null},J={queryOne:async(e,t)=>{const i=await Q(e,t);return i?await e.frame.worlds[$].adoptBackendNode(i):null},waitFor:async(e,t,i)=>{let s,r;"isOOPFrame"in e?s=e:(s=e.frame,r=await s.worlds[B].adoptHandle(e));const n=await s.worlds[B]._waitForSelectorInPage(((e,t)=>globalThis.ariaQuerySelector(t)),r,t,i,new Map([["ariaQuerySelector",async e=>{const t=await Q(r||await s.worlds[B].document(),e);return t?await s.worlds[B].adoptBackendNode(t):null}]]));r&&await r.dispose();const o=null==n?void 0:n.asElement();return o?o.frame.worlds[$].transferHandle(o):(await(null==n?void 0:n.dispose()),null)},queryAll:async(e,t)=>{const i=e.executionContext(),{name:s,role:r}=G(t),n=await H(i._client,e,s,r),o=i._world;return Promise.all(n.map((e=>o.adoptBackendNode(e.backendDOMNodeId))))}};class X{constructor(){}get disposed(){throw new Error("Not implemented")}executionContext(){throw new Error("Not implemented")}get client(){throw new Error("Not implemented")}async evaluate(){throw new Error("Not implemented")}async evaluateHandle(){throw new Error("Not implemented")}async getProperty(){throw new Error("Not implemented")}async getProperties(){throw new Error("Not implemented")}async jsonValue(){throw new Error("Not implemented")}asElement(){throw new Error("Not implemented")}async dispose(){throw new Error("Not implemented")}toString(){throw new Error("Not implemented")}remoteObject(){throw new Error("Not implemented")}}class Y extends X{constructor(){super()}executionContext(){throw new Error("Not implemented")}get client(){throw new Error("Not implemented")}get frame(){throw new Error("Not implemented")}async $(){throw new Error("Not implemented")}async $$(){throw new Error("Not implemented")}async $eval(){throw new Error("Not implemented")}async $$eval(){throw new Error("Not implemented")}async $x(){throw new Error("Not implemented")}async waitForSelector(){throw new Error("Not implemented")}async waitForXPath(){throw new Error("Not implemented")}async toElement(){throw new Error("Not implemented")}asElement(){return this}async contentFrame(){throw new Error("Not implemented")}async clickablePoint(){throw new Error("Not implemented")}async hover(){throw new Error("Not implemented")}async click(){throw new Error("Not implemented")}async drag(){throw new Error("Not implemented")}async dragEnter(){throw new Error("Not implemented")}async dragOver(){throw new Error("Not implemented")}async drop(){throw new Error("Not implemented")}async dragAndDrop(){throw new Error("Not implemented")}async select(){throw new Error("Not implemented")}async uploadFile(){throw new Error("Not implemented")}async tap(){throw new Error("Not implemented")}async touchStart(){throw new Error("Not implemented")}async touchMove(){throw new Error("Not implemented")}async touchEnd(){throw new Error("Not implemented")}async focus(){throw new Error("Not implemented")}async type(){throw new Error("Not implemented")}async press(){throw new Error("Not implemented")}async boundingBox(){throw new Error("Not implemented")}async boxModel(){throw new Error("Not implemented")}async screenshot(){throw new Error("Not implemented")}async isIntersectingViewport(){throw new Error("Not implemented")}}function Z(e){let t,i,s=!1,r=!1;const n=new Promise(((e,s)=>{t=e,i=s})),o=e&&e.timeout>0?setTimeout((()=>{r=!0,i(new u(e.message))}),e.timeout):void 0;return Object.assign(n,{resolved:()=>s,finished:()=>s||r,resolve:e=>{o&&clearTimeout(o),s=!0,t(e)},reject:e=>{clearTimeout(o),r=!0,i(e)}})}var ee,te=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},ie=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class se{constructor(e){ee.set(this,void 0),te(this,ee,e,"f")}async get(e){return ie(this,ee,"f").call(this,e)}}ee=new WeakMap,se.create=e=>new se(e);var re,ne,oe,ae=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)},ce=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i};const de=/^[\040\t]*\/\/[@#] sourceURL=\s*(\S*?)\s*$/m;class le{constructor(e,t,i){re.add(this),ne.set(this,void 0),this._client=e,this._world=i,this._contextId=t.id,this._contextName=t.name}get puppeteerUtil(){return ae(this,ne,"f")||ce(this,ne,this.evaluateHandle('(() => {\n            const module = {};\n            "use strict";\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === "object" || typeof from === "function") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);\n\n// src/injected/injected.ts\nvar injected_exports = {};\n__export(injected_exports, {\n  default: () => injected_default\n});\nmodule.exports = __toCommonJS(injected_exports);\n\n// src/common/Errors.ts\nvar CustomError = class extends Error {\n  constructor(message) {\n    super(message);\n    this.name = this.constructor.name;\n    Error.captureStackTrace(this, this.constructor);\n  }\n};\nvar TimeoutError = class extends CustomError {\n};\nvar ProtocolError = class extends CustomError {\n  #code;\n  #originalMessage = "";\n  set code(code) {\n    this.#code = code;\n  }\n  get code() {\n    return this.#code;\n  }\n  set originalMessage(originalMessage) {\n    this.#originalMessage = originalMessage;\n  }\n  get originalMessage() {\n    return this.#originalMessage;\n  }\n};\nvar errors = Object.freeze({\n  TimeoutError,\n  ProtocolError\n});\n\n// src/util/DeferredPromise.ts\nfunction createDeferredPromise(opts) {\n  let isResolved = false;\n  let isRejected = false;\n  let resolver;\n  let rejector;\n  const taskPromise = new Promise((resolve, reject) => {\n    resolver = resolve;\n    rejector = reject;\n  });\n  const timeoutId = opts && opts.timeout > 0 ? setTimeout(() => {\n    isRejected = true;\n    rejector(new TimeoutError(opts.message));\n  }, opts.timeout) : void 0;\n  return Object.assign(taskPromise, {\n    resolved: () => {\n      return isResolved;\n    },\n    finished: () => {\n      return isResolved || isRejected;\n    },\n    resolve: (value) => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      isResolved = true;\n      resolver(value);\n    },\n    reject: (err) => {\n      clearTimeout(timeoutId);\n      isRejected = true;\n      rejector(err);\n    }\n  });\n}\n\n// src/util/assert.ts\nvar assert = (value, message) => {\n  if (!value) {\n    throw new Error(message);\n  }\n};\n\n// src/injected/Poller.ts\nvar MutationPoller = class {\n  #fn;\n  #root;\n  #observer;\n  #promise;\n  constructor(fn, root) {\n    this.#fn = fn;\n    this.#root = root;\n  }\n  async start() {\n    const promise = this.#promise = createDeferredPromise();\n    const result = await this.#fn();\n    if (result) {\n      promise.resolve(result);\n      return;\n    }\n    this.#observer = new MutationObserver(async () => {\n      const result2 = await this.#fn();\n      if (!result2) {\n        return;\n      }\n      promise.resolve(result2);\n      await this.stop();\n    });\n    this.#observer.observe(this.#root, {\n      childList: true,\n      subtree: true,\n      attributes: true\n    });\n  }\n  async stop() {\n    assert(this.#promise, "Polling never started.");\n    if (!this.#promise.finished()) {\n      this.#promise.reject(new Error("Polling stopped"));\n    }\n    if (this.#observer) {\n      this.#observer.disconnect();\n      this.#observer = void 0;\n    }\n  }\n  result() {\n    assert(this.#promise, "Polling never started.");\n    return this.#promise;\n  }\n};\nvar RAFPoller = class {\n  #fn;\n  #promise;\n  constructor(fn) {\n    this.#fn = fn;\n  }\n  async start() {\n    const promise = this.#promise = createDeferredPromise();\n    const result = await this.#fn();\n    if (result) {\n      promise.resolve(result);\n      return;\n    }\n    const poll = async () => {\n      if (promise.finished()) {\n        return;\n      }\n      const result2 = await this.#fn();\n      if (!result2) {\n        window.requestAnimationFrame(poll);\n        return;\n      }\n      promise.resolve(result2);\n      await this.stop();\n    };\n    window.requestAnimationFrame(poll);\n  }\n  async stop() {\n    assert(this.#promise, "Polling never started.");\n    if (!this.#promise.finished()) {\n      this.#promise.reject(new Error("Polling stopped"));\n    }\n  }\n  result() {\n    assert(this.#promise, "Polling never started.");\n    return this.#promise;\n  }\n};\nvar IntervalPoller = class {\n  #fn;\n  #ms;\n  #interval;\n  #promise;\n  constructor(fn, ms) {\n    this.#fn = fn;\n    this.#ms = ms;\n  }\n  async start() {\n    const promise = this.#promise = createDeferredPromise();\n    const result = await this.#fn();\n    if (result) {\n      promise.resolve(result);\n      return;\n    }\n    this.#interval = setInterval(async () => {\n      const result2 = await this.#fn();\n      if (!result2) {\n        return;\n      }\n      promise.resolve(result2);\n      await this.stop();\n    }, this.#ms);\n  }\n  async stop() {\n    assert(this.#promise, "Polling never started.");\n    if (!this.#promise.finished()) {\n      this.#promise.reject(new Error("Polling stopped"));\n    }\n    if (this.#interval) {\n      clearInterval(this.#interval);\n      this.#interval = void 0;\n    }\n  }\n  result() {\n    assert(this.#promise, "Polling never started.");\n    return this.#promise;\n  }\n};\n\n// src/injected/TextContent.ts\nvar TRIVIAL_VALUE_INPUT_TYPES = /* @__PURE__ */ new Set(["checkbox", "image", "radio"]);\nvar isNonTrivialValueNode = (node) => {\n  if (node instanceof HTMLSelectElement) {\n    return true;\n  }\n  if (node instanceof HTMLTextAreaElement) {\n    return true;\n  }\n  if (node instanceof HTMLInputElement && !TRIVIAL_VALUE_INPUT_TYPES.has(node.type)) {\n    return true;\n  }\n  return false;\n};\nvar UNSUITABLE_NODE_NAMES = /* @__PURE__ */ new Set(["SCRIPT", "STYLE"]);\nvar isSuitableNodeForTextMatching = (node) => {\n  return !UNSUITABLE_NODE_NAMES.has(node.nodeName) && !document.head?.contains(node);\n};\nvar textContentCache = /* @__PURE__ */ new WeakMap();\nvar eraseFromCache = (node) => {\n  while (node) {\n    textContentCache.delete(node);\n    if (node instanceof ShadowRoot) {\n      node = node.host;\n    } else {\n      node = node.parentNode;\n    }\n  }\n};\nvar observedNodes = /* @__PURE__ */ new WeakSet();\nvar textChangeObserver = new MutationObserver((mutations) => {\n  for (const mutation of mutations) {\n    eraseFromCache(mutation.target);\n  }\n});\nvar createTextContent = (root) => {\n  let value = textContentCache.get(root);\n  if (value) {\n    return value;\n  }\n  value = { full: "", immediate: [] };\n  if (!isSuitableNodeForTextMatching(root)) {\n    return value;\n  }\n  let currentImmediate = "";\n  if (isNonTrivialValueNode(root)) {\n    value.full = root.value;\n    value.immediate.push(root.value);\n    root.addEventListener(\n      "input",\n      (event) => {\n        eraseFromCache(event.target);\n      },\n      { once: true, capture: true }\n    );\n  } else {\n    for (let child = root.firstChild; child; child = child.nextSibling) {\n      if (child.nodeType === Node.TEXT_NODE) {\n        value.full += child.nodeValue ?? "";\n        currentImmediate += child.nodeValue ?? "";\n        continue;\n      }\n      if (currentImmediate) {\n        value.immediate.push(currentImmediate);\n      }\n      currentImmediate = "";\n      if (child.nodeType === Node.ELEMENT_NODE) {\n        value.full += createTextContent(child).full;\n      }\n    }\n    if (currentImmediate) {\n      value.immediate.push(currentImmediate);\n    }\n    if (root instanceof Element && root.shadowRoot) {\n      value.full += createTextContent(root.shadowRoot).full;\n    }\n    if (!observedNodes.has(root)) {\n      textChangeObserver.observe(root, {\n        childList: true,\n        characterData: true\n      });\n      observedNodes.add(root);\n    }\n  }\n  textContentCache.set(root, value);\n  return value;\n};\n\n// src/injected/TextQuerySelector.ts\nvar TextQuerySelector_exports = {};\n__export(TextQuerySelector_exports, {\n  textQuerySelector: () => textQuerySelector,\n  textQuerySelectorAll: () => textQuerySelectorAll\n});\nvar textQuerySelector = (root, selector) => {\n  for (const node of root.childNodes) {\n    if (node instanceof Element && isSuitableNodeForTextMatching(node)) {\n      let matchedNode;\n      if (node.shadowRoot) {\n        matchedNode = textQuerySelector(node.shadowRoot, selector);\n      } else {\n        matchedNode = textQuerySelector(node, selector);\n      }\n      if (matchedNode) {\n        return matchedNode;\n      }\n    }\n  }\n  if (root instanceof Element) {\n    const textContent = createTextContent(root);\n    if (textContent.full.includes(selector)) {\n      return root;\n    }\n  }\n  return null;\n};\nvar textQuerySelectorAll = (root, selector) => {\n  let results = [];\n  for (const node of root.childNodes) {\n    if (node instanceof Element) {\n      let matchedNodes;\n      if (node.shadowRoot) {\n        matchedNodes = textQuerySelectorAll(node.shadowRoot, selector);\n      } else {\n        matchedNodes = textQuerySelectorAll(node, selector);\n      }\n      results = results.concat(matchedNodes);\n    }\n  }\n  if (results.length > 0) {\n    return results;\n  }\n  if (root instanceof Element) {\n    const textContent = createTextContent(root);\n    if (textContent.full.includes(selector)) {\n      return [root];\n    }\n  }\n  return [];\n};\n\n// src/injected/XPathQuerySelector.ts\nvar XPathQuerySelector_exports = {};\n__export(XPathQuerySelector_exports, {\n  xpathQuerySelector: () => xpathQuerySelector,\n  xpathQuerySelectorAll: () => xpathQuerySelectorAll\n});\nvar xpathQuerySelector = (root, selector) => {\n  const doc = root.ownerDocument || document;\n  const result = doc.evaluate(\n    selector,\n    root,\n    null,\n    XPathResult.FIRST_ORDERED_NODE_TYPE\n  );\n  return result.singleNodeValue;\n};\nvar xpathQuerySelectorAll = (root, selector) => {\n  const doc = root.ownerDocument || document;\n  const iterator = doc.evaluate(\n    selector,\n    root,\n    null,\n    XPathResult.ORDERED_NODE_ITERATOR_TYPE\n  );\n  const array = [];\n  let item;\n  while (item = iterator.iterateNext()) {\n    array.push(item);\n  }\n  return array;\n};\n\n// src/injected/PierceQuerySelector.ts\nvar PierceQuerySelector_exports = {};\n__export(PierceQuerySelector_exports, {\n  pierceQuerySelector: () => pierceQuerySelector,\n  pierceQuerySelectorAll: () => pierceQuerySelectorAll\n});\nvar pierceQuerySelector = (root, selector) => {\n  let found = null;\n  const search = (root2) => {\n    const iter = document.createTreeWalker(root2, NodeFilter.SHOW_ELEMENT);\n    do {\n      const currentNode = iter.currentNode;\n      if (currentNode.shadowRoot) {\n        search(currentNode.shadowRoot);\n      }\n      if (currentNode instanceof ShadowRoot) {\n        continue;\n      }\n      if (currentNode !== root2 && !found && currentNode.matches(selector)) {\n        found = currentNode;\n      }\n    } while (!found && iter.nextNode());\n  };\n  if (root instanceof Document) {\n    root = root.documentElement;\n  }\n  search(root);\n  return found;\n};\nvar pierceQuerySelectorAll = (element, selector) => {\n  const result = [];\n  const collect = (root) => {\n    const iter = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT);\n    do {\n      const currentNode = iter.currentNode;\n      if (currentNode.shadowRoot) {\n        collect(currentNode.shadowRoot);\n      }\n      if (currentNode instanceof ShadowRoot) {\n        continue;\n      }\n      if (currentNode !== root && currentNode.matches(selector)) {\n        result.push(currentNode);\n      }\n    } while (iter.nextNode());\n  };\n  if (element instanceof Document) {\n    element = element.documentElement;\n  }\n  collect(element);\n  return result;\n};\n\n// src/injected/util.ts\nvar util_exports = {};\n__export(util_exports, {\n  checkVisibility: () => checkVisibility,\n  createFunction: () => createFunction\n});\nvar createdFunctions = /* @__PURE__ */ new Map();\nvar createFunction = (functionValue) => {\n  let fn = createdFunctions.get(functionValue);\n  if (fn) {\n    return fn;\n  }\n  fn = new Function(`return ${functionValue}`)();\n  createdFunctions.set(functionValue, fn);\n  return fn;\n};\nvar HIDDEN_VISIBILITY_VALUES = ["hidden", "collapse"];\nvar checkVisibility = (node, visible) => {\n  if (!node) {\n    return visible === false;\n  }\n  if (visible === void 0) {\n    return node;\n  }\n  const element = node.nodeType === Node.TEXT_NODE ? node.parentElement : node;\n  const style = window.getComputedStyle(element);\n  const isVisible = style && !HIDDEN_VISIBILITY_VALUES.includes(style.visibility) && !isBoundingBoxEmpty(element);\n  return visible === isVisible ? node : false;\n};\nfunction isBoundingBoxEmpty(element) {\n  const rect = element.getBoundingClientRect();\n  return rect.width === 0 || rect.height === 0;\n}\n\n// src/injected/injected.ts\nvar PuppeteerUtil = Object.freeze({\n  ...util_exports,\n  ...TextQuerySelector_exports,\n  ...XPathQuerySelector_exports,\n  ...PierceQuerySelector_exports,\n  createDeferredPromise,\n  createTextContent,\n  IntervalPoller,\n  isSuitableNodeForTextMatching,\n  MutationPoller,\n  RAFPoller\n});\nvar injected_default = PuppeteerUtil;\n\n            return module.exports.default;\n          })()'),"f"),ae(this,ne,"f")}async evaluate(e,...t){return await ae(this,re,"m",oe).call(this,!0,e,...t)}async evaluateHandle(e,...t){return ae(this,re,"m",oe).call(this,!1,e,...t)}}ne=new WeakMap,re=new WeakSet,oe=async function(e,t,...i){const s="//# sourceURL=pptr://__puppeteer_evaluation_script__";if(Kr(t)){const i=this._contextId,r=t,n=de.test(r)?r:r+"\n"+s,{exceptionDetails:o,result:a}=await this._client.send("Runtime.evaluate",{expression:n,contextId:i,returnByValue:e,awaitPromise:!0,userGesture:!0}).catch(he);if(o)throw new Error("Evaluation failed: "+Dr(o));return e?qr(a):$r(this,a)}let r;try{r=this._client.send("Runtime.callFunctionOn",{functionDeclaration:Jr(t)+"\n"+s+"\n",executionContextId:this._contextId,arguments:await Promise.all(i.map(async function(e){e instanceof se&&(e=await e.get(this));if("bigint"==typeof e)return{unserializableValue:`${e.toString()}n`};if(Object.is(e,-0))return{unserializableValue:"-0"};if(Object.is(e,1/0))return{unserializableValue:"Infinity"};if(Object.is(e,-1/0))return{unserializableValue:"-Infinity"};if(Object.is(e,NaN))return{unserializableValue:"NaN"};const t=e&&e instanceof X?e:null;if(t){if(t.executionContext()!==this)throw new Error("JSHandles can be evaluated only in the context they were created!");if(t.disposed)throw new Error("JSHandle is disposed!");return t.remoteObject().unserializableValue?{unserializableValue:t.remoteObject().unserializableValue}:t.remoteObject().objectId?{objectId:t.remoteObject().objectId}:{value:t.remoteObject().value}}return{value:e}}.bind(this))),returnByValue:e,awaitPromise:!0,userGesture:!0})}catch(e){throw e instanceof TypeError&&e.message.startsWith("Converting circular structure to JSON")&&(e.message+=" Recursive objects are not allowed."),e}const{exceptionDetails:n,result:o}=await r.catch(he);if(n)throw new Error("Evaluation failed: "+Dr(n));return e?qr(o):$r(this,o)};const he=e=>{if(e.message.includes("Object reference chain is too long"))return{result:{type:"undefined"}};if(e.message.includes("Object couldn't be returned by value"))return{result:{type:"undefined"}};if(e.message.endsWith("Cannot find context with specified id")||e.message.endsWith("Inspected target navigated or closed"))throw new Error("Execution context was destroyed, most likely because of a navigation.");throw e};var fe,ue,we,me,pe,ye=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)},ge=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i};class ve{constructor(){fe.set(this,new Map),ue.set(this,new Map),we.set(this,new Map),me.set(this,void 0),pe.set(this,new Map)}getMainFrame(){return ye(this,me,"f")}getById(e){return ye(this,fe,"f").get(e)}waitForFrame(e){const t=this.getById(e);if(t)return Promise.resolve(t);const i=Z();return(ye(this,pe,"f").get(e)||new Set).add(i),i}frames(){return Array.from(ye(this,fe,"f").values())}addFrame(e){var t;ye(this,fe,"f").set(e._id,e),e._parentId?(ye(this,ue,"f").set(e._id,e._parentId),ye(this,we,"f").has(e._parentId)||ye(this,we,"f").set(e._parentId,new Set),ye(this,we,"f").get(e._parentId).add(e._id)):ge(this,me,e,"f"),null===(t=ye(this,pe,"f").get(e._id))||void 0===t||t.forEach((t=>t.resolve(e)))}removeFrame(e){var t;ye(this,fe,"f").delete(e._id),ye(this,ue,"f").delete(e._id),e._parentId?null===(t=ye(this,we,"f").get(e._parentId))||void 0===t||t.delete(e._id):ge(this,me,void 0,"f")}childFrames(e){const t=ye(this,we,"f").get(e);return t?Array.from(t).map((e=>this.getById(e))).filter((e=>void 0!==e)):[]}parentFrame(e){const t=ye(this,ue,"f").get(e);return t?this.getById(t):void 0}}fe=new WeakMap,ue=new WeakMap,we=new WeakMap,me=new WeakMap,pe=new WeakMap;var ke,be,Ee,Ce,Me,Pe,_e,Te,xe,Ie,Ne,Se,Fe,We,Re,De,qe,je,Ae,Oe,Ke=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)},Le=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i};class $e{get client(){return Ke(this,be,"f")}constructor(e,t,i,s,r,n){ke.add(this),this._failureText=null,this._response=null,this._fromMemoryCache=!1,be.set(this,void 0),Ee.set(this,void 0),Ce.set(this,void 0),Me.set(this,!1),Pe.set(this,void 0),_e.set(this,void 0),Te.set(this,void 0),xe.set(this,void 0),Ie.set(this,{}),Ne.set(this,void 0),Se.set(this,void 0),Fe.set(this,null),We.set(this,null),Re.set(this,{action:Be.None}),De.set(this,void 0),qe.set(this,void 0),Le(this,be,e,"f"),this._requestId=r.requestId,Le(this,Ee,r.requestId===r.loaderId&&"Document"===r.type,"f"),this._interceptionId=i,Le(this,Ce,s,"f"),Le(this,Pe,r.request.url,"f"),Le(this,_e,(r.type||"other").toLowerCase(),"f"),Le(this,Te,r.request.method,"f"),Le(this,xe,r.request.postData,"f"),Le(this,Ne,t,"f"),this._redirectChain=n,Le(this,Se,{},"f"),Le(this,De,[],"f"),Le(this,qe,r.initiator,"f");for(const[e,t]of Object.entries(r.request.headers))Ke(this,Ie,"f")[e.toLowerCase()]=t}url(){return Ke(this,Pe,"f")}continueRequestOverrides(){return e(Ke(this,Ce,"f"),"Request Interception is not enabled!"),Ke(this,Se,"f")}responseForRequest(){return e(Ke(this,Ce,"f"),"Request Interception is not enabled!"),Ke(this,Fe,"f")}abortErrorReason(){return e(Ke(this,Ce,"f"),"Request Interception is not enabled!"),Ke(this,We,"f")}interceptResolutionState(){return Ke(this,Ce,"f")?Ke(this,Me,"f")?{action:Be.AlreadyHandled}:{...Ke(this,Re,"f")}:{action:Be.Disabled}}isInterceptResolutionHandled(){return Ke(this,Me,"f")}enqueueInterceptAction(e){Ke(this,De,"f").push(e)}async finalizeInterceptions(){await Ke(this,De,"f").reduce(((e,t)=>e.then(t)),Promise.resolve());const{action:e}=this.interceptResolutionState();switch(e){case"abort":return Ke(this,ke,"m",Oe).call(this,Ke(this,We,"f"));case"respond":if(null===Ke(this,Fe,"f"))throw new Error("Response is missing for the interception");return Ke(this,ke,"m",Ae).call(this,Ke(this,Fe,"f"));case"continue":return Ke(this,ke,"m",je).call(this,Ke(this,Se,"f"))}}resourceType(){return Ke(this,_e,"f")}method(){return Ke(this,Te,"f")}postData(){return Ke(this,xe,"f")}headers(){return Ke(this,Ie,"f")}response(){return this._response}frame(){return Ke(this,Ne,"f")}isNavigationRequest(){return Ke(this,Ee,"f")}initiator(){return Ke(this,qe,"f")}redirectChain(){return this._redirectChain.slice()}failure(){return this._failureText?{errorText:this._failureText}:null}async continue(t={},i){if(!Ke(this,Pe,"f").startsWith("data:")){if(e(Ke(this,Ce,"f"),"Request Interception is not enabled!"),e(!Ke(this,Me,"f"),"Request is already handled!"),void 0===i)return Ke(this,ke,"m",je).call(this,t);if(Le(this,Se,t,"f"),void 0===Ke(this,Re,"f").priority||i>Ke(this,Re,"f").priority)Le(this,Re,{action:Be.Continue,priority:i},"f");else if(i===Ke(this,Re,"f").priority){if("abort"===Ke(this,Re,"f").action||"respond"===Ke(this,Re,"f").action)return;Ke(this,Re,"f").action=Be.Continue}}}async respond(t,i){if(!Ke(this,Pe,"f").startsWith("data:")){if(e(Ke(this,Ce,"f"),"Request Interception is not enabled!"),e(!Ke(this,Me,"f"),"Request is already handled!"),void 0===i)return Ke(this,ke,"m",Ae).call(this,t);if(Le(this,Fe,t,"f"),void 0===Ke(this,Re,"f").priority||i>Ke(this,Re,"f").priority)Le(this,Re,{action:Be.Respond,priority:i},"f");else if(i===Ke(this,Re,"f").priority){if("abort"===Ke(this,Re,"f").action)return;Ke(this,Re,"f").action=Be.Respond}}}async abort(t="failed",i){if(Ke(this,Pe,"f").startsWith("data:"))return;const s=He[t];if(e(s,"Unknown error code: "+t),e(Ke(this,Ce,"f"),"Request Interception is not enabled!"),e(!Ke(this,Me,"f"),"Request is already handled!"),void 0===i)return Ke(this,ke,"m",Oe).call(this,s);Le(this,We,s,"f"),(void 0===Ke(this,Re,"f").priority||i>=Ke(this,Re,"f").priority)&&Le(this,Re,{action:Be.Abort,priority:i},"f")}}var Be;be=new WeakMap,Ee=new WeakMap,Ce=new WeakMap,Me=new WeakMap,Pe=new WeakMap,_e=new WeakMap,Te=new WeakMap,xe=new WeakMap,Ie=new WeakMap,Ne=new WeakMap,Se=new WeakMap,Fe=new WeakMap,We=new WeakMap,Re=new WeakMap,De=new WeakMap,qe=new WeakMap,ke=new WeakSet,je=async function(e={}){const{url:t,method:i,postData:s,headers:r}=e;Le(this,Me,!0,"f");const n=s?Buffer.from(s).toString("base64"):void 0;if(void 0===this._interceptionId)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.continueRequest");await Ke(this,be,"f").send("Fetch.continueRequest",{requestId:this._interceptionId,url:t,method:i,postData:n,headers:r?Ue(r):void 0}).catch((e=>(Le(this,Me,!1,"f"),Ve(e))))},Ae=async function(e){Le(this,Me,!0,"f");const t=e.body&&Kr(e.body)?Buffer.from(e.body):e.body||null,i={};if(e.headers)for(const t of Object.keys(e.headers)){const s=e.headers[t];i[t.toLowerCase()]=Array.isArray(s)?s.map((e=>String(e))):String(s)}e.contentType&&(i["content-type"]=e.contentType),t&&!("content-length"in i)&&(i["content-length"]=String(Buffer.byteLength(t)));const s=e.status||200;if(void 0===this._interceptionId)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.fulfillRequest");await Ke(this,be,"f").send("Fetch.fulfillRequest",{requestId:this._interceptionId,responseCode:s,responsePhrase:ze[s],responseHeaders:Ue(i),body:t?t.toString("base64"):void 0}).catch((e=>(Le(this,Me,!1,"f"),Ve(e))))},Oe=async function(e){if(Le(this,Me,!0,"f"),void 0===this._interceptionId)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.failRequest");await Ke(this,be,"f").send("Fetch.failRequest",{requestId:this._interceptionId,errorReason:e||"Failed"}).catch(Ve)},function(e){e.Abort="abort",e.Respond="respond",e.Continue="continue",e.Disabled="disabled",e.None="none",e.AlreadyHandled="already-handled"}(Be||(Be={}));const He={aborted:"Aborted",accessdenied:"AccessDenied",addressunreachable:"AddressUnreachable",blockedbyclient:"BlockedByClient",blockedbyresponse:"BlockedByResponse",connectionaborted:"ConnectionAborted",connectionclosed:"ConnectionClosed",connectionfailed:"ConnectionFailed",connectionrefused:"ConnectionRefused",connectionreset:"ConnectionReset",internetdisconnected:"InternetDisconnected",namenotresolved:"NameNotResolved",timedout:"TimedOut",failed:"Failed"};function Ue(e){const t=[];for(const i in e){const s=e[i];if(!Object.is(s,void 0)){const e=Array.isArray(s)?s:[s];t.push(...e.map((e=>({name:i,value:e+""}))))}}return t}async function Ve(e){if(["Invalid header"].includes(e.originalMessage))throw e;Rr(e)}const ze={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Switch Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};var Ge,Qe,Je,Xe,Ye,Ze,et=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},tt=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class it{constructor(e){Ge.set(this,void 0),Qe.set(this,void 0),Je.set(this,void 0),Xe.set(this,void 0),Ye.set(this,void 0),Ze.set(this,void 0),et(this,Ge,e.subjectName,"f"),et(this,Qe,e.issuer,"f"),et(this,Je,e.validFrom,"f"),et(this,Xe,e.validTo,"f"),et(this,Ye,e.protocol,"f"),et(this,Ze,e.sanList,"f")}issuer(){return tt(this,Qe,"f")}validFrom(){return tt(this,Je,"f")}validTo(){return tt(this,Xe,"f")}protocol(){return tt(this,Ye,"f")}subjectName(){return tt(this,Ge,"f")}subjectAlternativeNames(){return tt(this,Ze,"f")}}Ge=new WeakMap,Qe=new WeakMap,Je=new WeakMap,Xe=new WeakMap,Ye=new WeakMap,Ze=new WeakMap;var st,rt,nt,ot,at,ct,dt,lt,ht,ft,ut,wt,mt,pt,yt,gt,vt=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},kt=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class bt{constructor(e,t,i,s){st.add(this),rt.set(this,void 0),nt.set(this,void 0),ot.set(this,null),at.set(this,void 0),ct.set(this,(()=>{})),dt.set(this,void 0),lt.set(this,void 0),ht.set(this,void 0),ft.set(this,void 0),ut.set(this,void 0),wt.set(this,void 0),mt.set(this,{}),pt.set(this,void 0),yt.set(this,void 0),vt(this,rt,e,"f"),vt(this,nt,t,"f"),vt(this,at,new Promise((e=>{vt(this,ct,e,"f")})),"f"),vt(this,dt,{ip:i.remoteIPAddress,port:i.remotePort},"f"),vt(this,ht,kt(this,st,"m",gt).call(this,s)||i.statusText,"f"),vt(this,ft,t.url(),"f"),vt(this,ut,!!i.fromDiskCache,"f"),vt(this,wt,!!i.fromServiceWorker,"f"),vt(this,lt,s?s.statusCode:i.status,"f");const r=s?s.headers:i.headers;for(const[e,t]of Object.entries(r))kt(this,mt,"f")[e.toLowerCase()]=t;vt(this,pt,i.securityDetails?new it(i.securityDetails):null,"f"),vt(this,yt,i.timing||null,"f")}_resolveBody(e){return e?kt(this,ct,"f").call(this,e):kt(this,ct,"f").call(this)}remoteAddress(){return kt(this,dt,"f")}url(){return kt(this,ft,"f")}ok(){return 0===kt(this,lt,"f")||kt(this,lt,"f")>=200&&kt(this,lt,"f")<=299}status(){return kt(this,lt,"f")}statusText(){return kt(this,ht,"f")}headers(){return kt(this,mt,"f")}securityDetails(){return kt(this,pt,"f")}timing(){return kt(this,yt,"f")}buffer(){return kt(this,ot,"f")||vt(this,ot,kt(this,at,"f").then((async e=>{if(e)throw e;try{const e=await kt(this,rt,"f").send("Network.getResponseBody",{requestId:kt(this,nt,"f")._requestId});return Buffer.from(e.body,e.base64Encoded?"base64":"utf8")}catch(e){if(e instanceof w&&"No resource with given identifier found"===e.originalMessage)throw new w("Could not load body for this request. This might happen if the request is a preflight request.");throw e}})),"f"),kt(this,ot,"f")}async text(){return(await this.buffer()).toString("utf8")}async json(){const e=await this.text();return JSON.parse(e)}request(){return kt(this,nt,"f")}fromCache(){return kt(this,ut,"f")||kt(this,nt,"f")._fromMemoryCache}fromServiceWorker(){return kt(this,wt,"f")}frame(){return kt(this,nt,"f").frame()}}rt=new WeakMap,nt=new WeakMap,ot=new WeakMap,at=new WeakMap,ct=new WeakMap,dt=new WeakMap,lt=new WeakMap,ht=new WeakMap,ft=new WeakMap,ut=new WeakMap,wt=new WeakMap,mt=new WeakMap,pt=new WeakMap,yt=new WeakMap,st=new WeakSet,gt=function(e){if(!e||!e.headersText)return;const t=e.headersText.split("\r",1)[0];if(!t)return;const i=t.match(/[^ ]* [^ ]* (.*)/);if(!i)return;const s=i[1];return s||void 0};var Et,Ct,Mt,Pt,_t,Tt,xt=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class It{constructor(){Et.set(this,new Map),Ct.set(this,new Map),Mt.set(this,new Map),Pt.set(this,new Map),_t.set(this,new Map),Tt.set(this,new Map)}forget(e){xt(this,Et,"f").delete(e),xt(this,Ct,"f").delete(e),xt(this,Tt,"f").delete(e),xt(this,_t,"f").delete(e),xt(this,Pt,"f").delete(e)}responseExtraInfo(e){return xt(this,Pt,"f").has(e)||xt(this,Pt,"f").set(e,[]),xt(this,Pt,"f").get(e)}queuedRedirectInfo(e){return xt(this,_t,"f").has(e)||xt(this,_t,"f").set(e,[]),xt(this,_t,"f").get(e)}queueRedirectInfo(e,t){this.queuedRedirectInfo(e).push(t)}takeQueuedRedirectInfo(e){return this.queuedRedirectInfo(e).shift()}numRequestsInProgress(){return[...xt(this,Mt,"f")].filter((([,e])=>!e.response())).length}storeRequestWillBeSent(e,t){xt(this,Et,"f").set(e,t)}getRequestWillBeSent(e){return xt(this,Et,"f").get(e)}forgetRequestWillBeSent(e){xt(this,Et,"f").delete(e)}getRequestPaused(e){return xt(this,Ct,"f").get(e)}forgetRequestPaused(e){xt(this,Ct,"f").delete(e)}storeRequestPaused(e,t){xt(this,Ct,"f").set(e,t)}getRequest(e){return xt(this,Mt,"f").get(e)}storeRequest(e,t){xt(this,Mt,"f").set(e,t)}forgetRequest(e){xt(this,Mt,"f").delete(e)}getQueuedEventGroup(e){return xt(this,Tt,"f").get(e)}queueEventGroup(e,t){xt(this,Tt,"f").set(e,t)}forgetQueuedEventGroup(e){xt(this,Tt,"f").delete(e)}}Et=new WeakMap,Ct=new WeakMap,Mt=new WeakMap,Pt=new WeakMap,_t=new WeakMap,Tt=new WeakMap;var Nt,St,Ft,Wt,Rt,Dt,qt,jt,At,Ot,Kt,Lt,$t,Bt,Ht,Ut,Vt,zt,Gt,Qt,Jt,Xt,Yt,Zt,ei,ti,ii,si,ri,ni,oi,ai,ci=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},di=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};const li={Request:Symbol("NetworkManager.Request"),RequestServedFromCache:Symbol("NetworkManager.RequestServedFromCache"),Response:Symbol("NetworkManager.Response"),RequestFailed:Symbol("NetworkManager.RequestFailed"),RequestFinished:Symbol("NetworkManager.RequestFinished")};class hi extends a{constructor(e,t,i){super(),Nt.add(this),St.set(this,void 0),Ft.set(this,void 0),Wt.set(this,void 0),Rt.set(this,new It),Dt.set(this,{}),qt.set(this,void 0),jt.set(this,new Set),At.set(this,!1),Ot.set(this,!1),Kt.set(this,!1),Lt.set(this,{offline:!1,upload:-1,download:-1,latency:0}),$t.set(this,void 0),ci(this,St,e,"f"),ci(this,Ft,t,"f"),ci(this,Wt,i,"f"),di(this,St,"f").on("Fetch.requestPaused",di(this,Nt,"m",Qt).bind(this)),di(this,St,"f").on("Fetch.authRequired",di(this,Nt,"m",Gt).bind(this)),di(this,St,"f").on("Network.requestWillBeSent",di(this,Nt,"m",zt).bind(this)),di(this,St,"f").on("Network.requestServedFromCache",di(this,Nt,"m",Yt).bind(this)),di(this,St,"f").on("Network.responseReceived",di(this,Nt,"m",ti).bind(this)),di(this,St,"f").on("Network.loadingFinished",di(this,Nt,"m",ri).bind(this)),di(this,St,"f").on("Network.loadingFailed",di(this,Nt,"m",oi).bind(this)),di(this,St,"f").on("Network.responseReceivedExtraInfo",di(this,Nt,"m",ii).bind(this))}initialize(){if(di(this,$t,"f"))return di(this,$t,"f");var e;ci(this,$t,(e="NetworkManager initialization timed out",i>0?Z({message:e,timeout:i}):Z()),"f");const t=Promise.all([di(this,Ft,"f")?di(this,St,"f").send("Security.setIgnoreCertificateErrors",{ignore:!0}):null,di(this,St,"f").send("Network.enable")]),s=di(this,$t,"f");return t.then((()=>{s.resolve()})).catch((e=>{s.reject(e)})),di(this,$t,"f")}async authenticate(e){ci(this,qt,e,"f"),await di(this,Nt,"m",Ht).call(this)}async setExtraHTTPHeaders(t){ci(this,Dt,{},"f");for(const i of Object.keys(t)){const s=t[i];e(Kr(s),`Expected value of header "${i}" to be String, but "${typeof s}" is found.`),di(this,Dt,"f")[i.toLowerCase()]=s}await di(this,St,"f").send("Network.setExtraHTTPHeaders",{headers:di(this,Dt,"f")})}extraHTTPHeaders(){return Object.assign({},di(this,Dt,"f"))}numRequestsInProgress(){return di(this,Rt,"f").numRequestsInProgress()}async setOfflineMode(e){di(this,Lt,"f").offline=e,await di(this,Nt,"m",Bt).call(this)}async emulateNetworkConditions(e){di(this,Lt,"f").upload=e?e.upload:-1,di(this,Lt,"f").download=e?e.download:-1,di(this,Lt,"f").latency=e?e.latency:0,await di(this,Nt,"m",Bt).call(this)}async setUserAgent(e,t){await di(this,St,"f").send("Network.setUserAgentOverride",{userAgent:e,userAgentMetadata:t})}async setCacheEnabled(e){ci(this,Kt,!e,"f"),await di(this,Nt,"m",Vt).call(this)}async setRequestInterception(e){ci(this,At,e,"f"),await di(this,Nt,"m",Ht).call(this)}}St=new WeakMap,Ft=new WeakMap,Wt=new WeakMap,Rt=new WeakMap,Dt=new WeakMap,qt=new WeakMap,jt=new WeakMap,At=new WeakMap,Ot=new WeakMap,Kt=new WeakMap,Lt=new WeakMap,$t=new WeakMap,Nt=new WeakSet,Bt=async function(){await di(this,St,"f").send("Network.emulateNetworkConditions",{offline:di(this,Lt,"f").offline,latency:di(this,Lt,"f").latency,uploadThroughput:di(this,Lt,"f").upload,downloadThroughput:di(this,Lt,"f").download})},Ht=async function(){const e=di(this,At,"f")||!!di(this,qt,"f");e!==di(this,Ot,"f")&&(ci(this,Ot,e,"f"),e?await Promise.all([di(this,Nt,"m",Vt).call(this),di(this,St,"f").send("Fetch.enable",{handleAuthRequests:!0,patterns:[{urlPattern:"*"}]})]):await Promise.all([di(this,Nt,"m",Vt).call(this),di(this,St,"f").send("Fetch.disable")]))},Ut=function(){return di(this,Kt,"f")},Vt=async function(){await di(this,St,"f").send("Network.setCacheDisabled",{cacheDisabled:di(this,Nt,"m",Ut).call(this)})},zt=function(e){if(!di(this,At,"f")||e.request.url.startsWith("data:"))di(this,Nt,"m",Xt).call(this,e,void 0);else{const{requestId:t}=e;di(this,Rt,"f").storeRequestWillBeSent(t,e);const i=di(this,Rt,"f").getRequestPaused(t);if(i){const{requestId:s}=i;di(this,Nt,"m",Jt).call(this,e,i),di(this,Nt,"m",Xt).call(this,e,s),di(this,Rt,"f").forgetRequestPaused(t)}}},Gt=function(e){let t="Default";di(this,jt,"f").has(e.requestId)?t="CancelAuth":di(this,qt,"f")&&(t="ProvideCredentials",di(this,jt,"f").add(e.requestId));const{username:i,password:s}=di(this,qt,"f")||{username:void 0,password:void 0};di(this,St,"f").send("Fetch.continueWithAuth",{requestId:e.requestId,authChallengeResponse:{response:t,username:i,password:s}}).catch(Rr)},Qt=function(e){!di(this,At,"f")&&di(this,Ot,"f")&&di(this,St,"f").send("Fetch.continueRequest",{requestId:e.requestId}).catch(Rr);const{networkId:t,requestId:i}=e;if(!t)return;const s=(()=>{const i=di(this,Rt,"f").getRequestWillBeSent(t);if(!i||i.request.url===e.request.url&&i.request.method===e.request.method)return i;di(this,Rt,"f").forgetRequestWillBeSent(t)})();s?(di(this,Nt,"m",Jt).call(this,s,e),di(this,Nt,"m",Xt).call(this,s,i)):di(this,Rt,"f").storeRequestPaused(t,e)},Jt=function(e,t){e.request.headers={...e.request.headers,...t.request.headers}},Xt=function(e,t){let i=[];if(e.redirectResponse){let s=null;if(e.redirectHasExtraInfo&&(s=di(this,Rt,"f").responseExtraInfo(e.requestId).shift(),!s))return void di(this,Rt,"f").queueRedirectInfo(e.requestId,{event:e,fetchRequestId:t});const r=di(this,Rt,"f").getRequest(e.requestId);r&&(di(this,Nt,"m",Zt).call(this,r,e.redirectResponse,s),i=r._redirectChain)}const s=e.frameId?di(this,Wt,"f").frame(e.frameId):null,r=new $e(di(this,St,"f"),s,t,di(this,At,"f"),e,i);di(this,Rt,"f").storeRequest(e.requestId,r),this.emit(li.Request,r),r.finalizeInterceptions()},Yt=function(e){const t=di(this,Rt,"f").getRequest(e.requestId);t&&(t._fromMemoryCache=!0),this.emit(li.RequestServedFromCache,t)},Zt=function(e,t,i){const s=new bt(di(this,St,"f"),e,t,i);e._response=s,e._redirectChain.push(e),s._resolveBody(new Error("Response body is unavailable for redirect responses")),di(this,Nt,"m",si).call(this,e,!1),this.emit(li.Response,s),this.emit(li.RequestFinished,e)},ei=function(e,t){const i=di(this,Rt,"f").getRequest(e.requestId);if(!i)return;di(this,Rt,"f").responseExtraInfo(e.requestId).length&&Rr(new Error("Unexpected extraInfo events for request "+e.requestId));const s=new bt(di(this,St,"f"),i,e.response,t);i._response=s,this.emit(li.Response,s)},ti=function(e){const t=di(this,Rt,"f").getRequest(e.requestId);let i=null;!t||t._fromMemoryCache||!e.hasExtraInfo||(i=di(this,Rt,"f").responseExtraInfo(e.requestId).shift(),i)?di(this,Nt,"m",ei).call(this,e,i):di(this,Rt,"f").queueEventGroup(e.requestId,{responseReceivedEvent:e})},ii=function(e){const t=di(this,Rt,"f").takeQueuedRedirectInfo(e.requestId);if(t)return di(this,Rt,"f").responseExtraInfo(e.requestId).push(e),void di(this,Nt,"m",Xt).call(this,t.event,t.fetchRequestId);const i=di(this,Rt,"f").getQueuedEventGroup(e.requestId);if(i)return di(this,Rt,"f").forgetQueuedEventGroup(e.requestId),di(this,Nt,"m",ei).call(this,i.responseReceivedEvent,e),i.loadingFinishedEvent&&di(this,Nt,"m",ni).call(this,i.loadingFinishedEvent),void(i.loadingFailedEvent&&di(this,Nt,"m",ai).call(this,i.loadingFailedEvent));di(this,Rt,"f").responseExtraInfo(e.requestId).push(e)},si=function(e,t){const i=e._requestId,s=e._interceptionId;di(this,Rt,"f").forgetRequest(i),void 0!==s&&di(this,jt,"f").delete(s),t&&di(this,Rt,"f").forget(i)},ri=function(e){const t=di(this,Rt,"f").getQueuedEventGroup(e.requestId);t?t.loadingFinishedEvent=e:di(this,Nt,"m",ni).call(this,e)},ni=function(e){var t;const i=di(this,Rt,"f").getRequest(e.requestId);i&&(i.response()&&(null===(t=i.response())||void 0===t||t._resolveBody(null)),di(this,Nt,"m",si).call(this,i,!0),this.emit(li.RequestFinished,i))},oi=function(e){const t=di(this,Rt,"f").getQueuedEventGroup(e.requestId);t?t.loadingFailedEvent=e:di(this,Nt,"m",ai).call(this,e)},ai=function(e){const t=di(this,Rt,"f").getRequest(e.requestId);if(!t)return;t._failureText=e.errorText;const i=t.response();i&&i._resolveBody(null),di(this,Nt,"m",si).call(this,t,!0),this.emit(li.RequestFailed,t)};var fi,ui,wi,mi,pi,yi,gi,vi,ki,bi,Ei,Ci,Mi,Pi,_i,Ti,xi,Ii,Ni,Si,Fi,Wi=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)},Ri=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i};const Di={FrameAttached:Symbol("FrameManager.FrameAttached"),FrameNavigated:Symbol("FrameManager.FrameNavigated"),FrameDetached:Symbol("FrameManager.FrameDetached"),FrameSwapped:Symbol("FrameManager.FrameSwapped"),LifecycleEvent:Symbol("FrameManager.LifecycleEvent"),FrameNavigatedWithinDocument:Symbol("FrameManager.FrameNavigatedWithinDocument"),ExecutionContextCreated:Symbol("FrameManager.ExecutionContextCreated"),ExecutionContextDestroyed:Symbol("FrameManager.ExecutionContextDestroyed")};class qi extends a{get timeoutSettings(){return Wi(this,mi,"f")}get networkManager(){return Wi(this,wi,"f")}get client(){return Wi(this,gi,"f")}constructor(e,t,i,s){super(),fi.add(this),ui.set(this,void 0),wi.set(this,void 0),mi.set(this,void 0),pi.set(this,new Map),yi.set(this,new Set),gi.set(this,void 0),this._frameTree=new ve,vi.set(this,new Set),Ri(this,gi,e,"f"),Ri(this,ui,t,"f"),Ri(this,wi,new hi(e,i,this),"f"),Ri(this,mi,s,"f"),this.setupEventListeners(Wi(this,gi,"f"))}setupEventListeners(e){e.on("Page.frameAttached",(t=>{Wi(this,fi,"m",Mi).call(this,e,t.frameId,t.parentFrameId)})),e.on("Page.frameNavigated",(e=>{Wi(this,vi,"f").add(e.frame.id),Wi(this,fi,"m",Pi).call(this,e.frame)})),e.on("Page.navigatedWithinDocument",(e=>{Wi(this,fi,"m",Ti).call(this,e.frameId,e.url)})),e.on("Page.frameDetached",(e=>{Wi(this,fi,"m",xi).call(this,e.frameId,e.reason)})),e.on("Page.frameStartedLoading",(e=>{Wi(this,fi,"m",bi).call(this,e.frameId)})),e.on("Page.frameStoppedLoading",(e=>{Wi(this,fi,"m",Ei).call(this,e.frameId)})),e.on("Runtime.executionContextCreated",(t=>{Wi(this,fi,"m",Ii).call(this,t.context,e)})),e.on("Runtime.executionContextDestroyed",(t=>{Wi(this,fi,"m",Ni).call(this,t.executionContextId,e)})),e.on("Runtime.executionContextsCleared",(()=>{Wi(this,fi,"m",Si).call(this,e)})),e.on("Page.lifecycleEvent",(e=>{Wi(this,fi,"m",ki).call(this,e)}))}async initialize(e=Wi(this,gi,"f")){try{const t=await Promise.all([e.send("Page.enable"),e.send("Page.getFrameTree")]),{frameTree:i}=t[1];Wi(this,fi,"m",Ci).call(this,e,i),await Promise.all([e.send("Page.setLifecycleEventsEnabled",{enabled:!0}),e.send("Runtime.enable").then((()=>Wi(this,fi,"m",_i).call(this,e,"__puppeteer_utility_world__"))),e===Wi(this,gi,"f")?Wi(this,wi,"f").initialize():Promise.resolve()])}catch(e){if(L(e)&&K(e))return;throw e}}executionContextById(t,i=Wi(this,gi,"f")){const s=this.getExecutionContextById(t,i);return e(s,"INTERNAL ERROR: missing context with id = "+t),s}getExecutionContextById(e,t=Wi(this,gi,"f")){return Wi(this,pi,"f").get(`${t.id()}:${e}`)}page(){return Wi(this,ui,"f")}mainFrame(){const t=this._frameTree.getMainFrame();return e(t,"Requesting main frame too early!"),t}frames(){return Array.from(this._frameTree.frames())}frame(e){return this._frameTree.getById(e)||null}onAttachedToTarget(e){if("iframe"!==e._getTargetInfo().type)return;const t=this.frame(e._getTargetInfo().targetId);t&&t.updateClient(e._session()),this.setupEventListeners(e._session()),this.initialize(e._session())}}ui=new WeakMap,wi=new WeakMap,mi=new WeakMap,pi=new WeakMap,yi=new WeakMap,gi=new WeakMap,vi=new WeakMap,fi=new WeakSet,ki=function(e){const t=this.frame(e.frameId);t&&(t._onLifecycleEvent(e.loaderId,e.name),this.emit(Di.LifecycleEvent,t))},bi=function(e){const t=this.frame(e);t&&t._onLoadingStarted()},Ei=function(e){const t=this.frame(e);t&&(t._onLoadingStopped(),this.emit(Di.LifecycleEvent,t))},Ci=function e(t,i){if(i.frame.parentId&&Wi(this,fi,"m",Mi).call(this,t,i.frame.id,i.frame.parentId),Wi(this,vi,"f").has(i.frame.id)?Wi(this,vi,"f").delete(i.frame.id):Wi(this,fi,"m",Pi).call(this,i.frame),i.childFrames)for(const s of i.childFrames)Wi(this,fi,"m",e).call(this,t,s)},Mi=function(e,t,i){let s=this.frame(t);s?e&&s.isOOPFrame()&&s.updateClient(e):(s=new ir(this,t,i,e),this._frameTree.addFrame(s),this.emit(Di.FrameAttached,s))},Pi=async function(e){const t=e.id,i=!e.parentId;let s=this._frameTree.getById(t);if(s)for(const e of s.childFrames())Wi(this,fi,"m",Fi).call(this,e);i&&(s?(this._frameTree.removeFrame(s),s._id=t):s=new ir(this,t,void 0,Wi(this,gi,"f")),this._frameTree.addFrame(s)),s=await this._frameTree.waitForFrame(t),s._navigated(e),this.emit(Di.FrameNavigated,s)},_i=async function(e,t){const i=`${e.id()}:${t}`;Wi(this,yi,"f").has(i)||(await e.send("Page.addScriptToEvaluateOnNewDocument",{source:"//# sourceURL=pptr://__puppeteer_evaluation_script__",worldName:t}),await Promise.all(this.frames().filter((t=>t._client()===e)).map((i=>e.send("Page.createIsolatedWorld",{frameId:i._id,worldName:t,grantUniveralAccess:!0}).catch(Rr)))),Wi(this,yi,"f").add(i))},Ti=function(e,t){const i=this.frame(e);i&&(i._navigatedWithinDocument(t),this.emit(Di.FrameNavigatedWithinDocument,i),this.emit(Di.FrameNavigated,i))},xi=function(e,t){const i=this.frame(e);"remove"===t?i&&Wi(this,fi,"m",Fi).call(this,i):"swap"===t&&this.emit(Di.FrameSwapped,i)},Ii=function(e,t){const i=e.auxData,s=i&&i.frameId,r="string"==typeof s?this.frame(s):void 0;let n;if(r){if(r._client()!==t)return;e.auxData&&e.auxData.isDefault?n=r.worlds[$]:"__puppeteer_utility_world__"!==e.name||r.worlds[B].hasContext()||(n=r.worlds[B])}const o=new le((null==r?void 0:r._client())||Wi(this,gi,"f"),e,n);n&&n.setContext(o);const a=`${t.id()}:${e.id}`;Wi(this,pi,"f").set(a,o)},Ni=function(e,t){const i=`${t.id()}:${e}`,s=Wi(this,pi,"f").get(i);s&&(Wi(this,pi,"f").delete(i),s._world&&s._world.clearContext())},Si=function(e){for(const[t,i]of Wi(this,pi,"f").entries())i._client===e&&(i._world&&i._world.clearContext(),Wi(this,pi,"f").delete(t))},Fi=function e(t){for(const i of t.childFrames())Wi(this,fi,"m",e).call(this,i);t._detach(),this._frameTree.removeFrame(t),this.emit(Di.FrameDetached,t)};var ji,Ai,Oi,Ki,Li,$i,Bi,Hi,Ui,Vi,zi,Gi,Qi,Ji,Xi,Yi,Zi,es,ts,is,ss,rs,ns,os,as,cs,ds,ls,hs,fs,us,ws=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},ms=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};const ps=new Map([["load","load"],["domcontentloaded","DOMContentLoaded"],["networkidle0","networkIdle"],["networkidle2","networkAlmostIdle"]]),ys=()=>{};class gs{constructor(t,i,s,r){ji.add(this),Ai.set(this,void 0),Oi.set(this,void 0),Ki.set(this,void 0),Li.set(this,void 0),$i.set(this,null),Bi.set(this,void 0),Hi.set(this,void 0),Ui.set(this,ys),Vi.set(this,new Promise((e=>{ws(this,Ui,e,"f")}))),zi.set(this,ys),Gi.set(this,new Promise((e=>{ws(this,zi,e,"f")}))),Qi.set(this,ys),Ji.set(this,new Promise((e=>{ws(this,Qi,e,"f")}))),Xi.set(this,ys),Yi.set(this,new Promise((e=>{ws(this,Xi,e,"f")}))),Zi.set(this,void 0),es.set(this,void 0),ts.set(this,void 0),is.set(this,void 0),ss.set(this,void 0),Array.isArray(s)?s=s.slice():"string"==typeof s&&(s=[s]),ws(this,Hi,i._loaderId,"f"),ws(this,Ai,s.map((t=>{const i=ps.get(t);return e(i,"Unknown value for options.waitUntil: "+t),i})),"f"),ws(this,Oi,t,"f"),ws(this,Ki,i,"f"),ws(this,Li,r,"f"),ws(this,Bi,[Ar(t.client,D.Disconnected,ms(this,ji,"m",cs).bind(this,new Error("Navigation failed because browser has disconnected!"))),Ar(ms(this,Oi,"f"),Di.LifecycleEvent,ms(this,ji,"m",us).bind(this)),Ar(ms(this,Oi,"f"),Di.FrameNavigatedWithinDocument,ms(this,ji,"m",ls).bind(this)),Ar(ms(this,Oi,"f"),Di.FrameNavigated,ms(this,ji,"m",hs).bind(this)),Ar(ms(this,Oi,"f"),Di.FrameSwapped,ms(this,ji,"m",fs).bind(this)),Ar(ms(this,Oi,"f"),Di.FrameDetached,ms(this,ji,"m",as).bind(this)),Ar(ms(this,Oi,"f").networkManager,li.Request,ms(this,ji,"m",rs).bind(this)),Ar(ms(this,Oi,"f").networkManager,li.Response,ms(this,ji,"m",os).bind(this)),Ar(ms(this,Oi,"f").networkManager,li.RequestFailed,ms(this,ji,"m",ns).bind(this))],"f"),ws(this,Zi,ms(this,ji,"m",ds).call(this),"f"),ms(this,ji,"m",us).call(this)}async navigationResponse(){var e;return await(null===(e=ms(this,ss,"f"))||void 0===e?void 0:e.catch((()=>{}))),ms(this,$i,"f")?ms(this,$i,"f").response():null}sameDocumentNavigationPromise(){return ms(this,Vi,"f")}newDocumentNavigationPromise(){return ms(this,Ji,"f")}lifecyclePromise(){return ms(this,Gi,"f")}timeoutOrTerminationPromise(){return Promise.race([ms(this,Zi,"f"),ms(this,Yi,"f")])}dispose(){Or(ms(this,Bi,"f")),void 0!==ms(this,es,"f")&&clearTimeout(ms(this,es,"f"))}}Ai=new WeakMap,Oi=new WeakMap,Ki=new WeakMap,Li=new WeakMap,$i=new WeakMap,Bi=new WeakMap,Hi=new WeakMap,Ui=new WeakMap,Vi=new WeakMap,zi=new WeakMap,Gi=new WeakMap,Qi=new WeakMap,Ji=new WeakMap,Xi=new WeakMap,Yi=new WeakMap,Zi=new WeakMap,es=new WeakMap,ts=new WeakMap,is=new WeakMap,ss=new WeakMap,ji=new WeakSet,rs=function(e){var t,i;e.frame()===ms(this,Ki,"f")&&e.isNavigationRequest()&&(ws(this,$i,e,"f"),null===(t=ms(this,ss,"f"))||void 0===t||t.resolve(),ws(this,ss,Z(),"f"),null!==e.response()&&(null===(i=ms(this,ss,"f"))||void 0===i||i.resolve()))},ns=function(e){var t,i;(null===(t=ms(this,$i,"f"))||void 0===t?void 0:t._requestId)===e._requestId&&(null===(i=ms(this,ss,"f"))||void 0===i||i.resolve())},os=function(e){var t,i;(null===(t=ms(this,$i,"f"))||void 0===t?void 0:t._requestId)===e.request()._requestId&&(null===(i=ms(this,ss,"f"))||void 0===i||i.resolve())},as=function(e){ms(this,Ki,"f")!==e?ms(this,ji,"m",us).call(this):ms(this,Xi,"f").call(null,new Error("Navigating frame was detached"))},cs=function(e){ms(this,Xi,"f").call(null,e)},ds=async function(){if(!ms(this,Li,"f"))return new Promise(ys);const e="Navigation timeout of "+ms(this,Li,"f")+" ms exceeded";return await new Promise((e=>ws(this,es,setTimeout(e,ms(this,Li,"f")),"f"))),new u(e)},ls=function(e){e===ms(this,Ki,"f")&&(ws(this,ts,!0,"f"),ms(this,ji,"m",us).call(this))},hs=function(e){e===ms(this,Ki,"f")&&ms(this,ji,"m",us).call(this)},fs=function(e){e===ms(this,Ki,"f")&&(ws(this,is,!0,"f"),ms(this,ji,"m",us).call(this))},us=function(){(function e(t,i){for(const e of i)if(!t._lifecycleEvents.has(e))return!1;for(const s of t.childFrames())if(s._hasStartedLoading&&!e(s,i))return!1;return!0})(ms(this,Ki,"f"),ms(this,Ai,"f"))&&(ms(this,zi,"f").call(this),ms(this,ts,"f")&&ms(this,Ui,"f").call(this),(ms(this,is,"f")||ms(this,Ki,"f")._loaderId!==ms(this,Hi,"f"))&&ms(this,Qi,"f").call(this))};var vs,ks,bs,Es,Cs,Ms,Ps,_s,Ts,xs,Is=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},Ns=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Ss{constructor(e,t,i,...s){var r;if(vs.set(this,void 0),ks.set(this,void 0),bs.set(this,void 0),Es.set(this,void 0),Cs.set(this,void 0),Ms.set(this,void 0),Ps.set(this,void 0),_s.set(this,Z()),Ts.set(this,void 0),Is(this,vs,e,"f"),Is(this,ks,null!==(r=t.bindings)&&void 0!==r?r:new Map,"f"),Is(this,bs,t.polling,"f"),Is(this,Es,t.root,"f"),"string"==typeof i)Is(this,Cs,`() => {return (${i});}`,"f");else Is(this,Cs,i.toString(),"f");if(Is(this,Ms,s,"f"),Ns(this,vs,"f").taskManager.add(this),t.timeout&&Is(this,Ps,setTimeout((()=>{this.terminate(new u(`Waiting failed: ${t.timeout}ms exceeded`))}),t.timeout),"f"),0!==Ns(this,ks,"f").size)for(const[e,t]of Ns(this,ks,"f"))Ns(this,vs,"f")._boundFunctions.set(e,t);this.rerun()}get result(){return Ns(this,_s,"f")}async rerun(){try{if(0!==Ns(this,ks,"f").size){const e=await Ns(this,vs,"f").executionContext();await Promise.all([...Ns(this,ks,"f")].map((async([t])=>await Ns(this,vs,"f")._addBindingToContext(e,t))))}switch(Ns(this,bs,"f")){case"raf":Is(this,Ts,await Ns(this,vs,"f").evaluateHandle((({RAFPoller:e,createFunction:t},i,...s)=>{const r=t(i);return new e((()=>r(...s)))}),se.create((e=>e.puppeteerUtil)),Ns(this,Cs,"f"),...Ns(this,Ms,"f")),"f");break;case"mutation":Is(this,Ts,await Ns(this,vs,"f").evaluateHandle((({MutationPoller:e,createFunction:t},i,s,...r)=>{const n=t(s);return new e((()=>n(...r)),i||document)}),se.create((e=>e.puppeteerUtil)),Ns(this,Es,"f"),Ns(this,Cs,"f"),...Ns(this,Ms,"f")),"f");break;default:Is(this,Ts,await Ns(this,vs,"f").evaluateHandle((({IntervalPoller:e,createFunction:t},i,s,...r)=>{const n=t(s);return new e((()=>n(...r)),i)}),se.create((e=>e.puppeteerUtil)),Ns(this,bs,"f"),Ns(this,Cs,"f"),...Ns(this,Ms,"f")),"f")}await Ns(this,Ts,"f").evaluate((e=>{e.start()}));const e=await Ns(this,Ts,"f").evaluateHandle((e=>e.result()));Ns(this,_s,"f").resolve(e),await this.terminate()}catch(e){const t=this.getBadError(e);t&&await this.terminate(t)}}async terminate(e){if(Ns(this,vs,"f").taskManager.delete(this),Ns(this,Ps,"f")&&clearTimeout(Ns(this,Ps,"f")),e&&!Ns(this,_s,"f").finished()&&Ns(this,_s,"f").reject(e),Ns(this,Ts,"f"))try{await Ns(this,Ts,"f").evaluateHandle((async e=>{await e.stop()})),Ns(this,Ts,"f")&&(await Ns(this,Ts,"f").dispose(),Is(this,Ts,void 0,"f"))}catch{}}getBadError(e){if(e instanceof Error){if(e.message.includes("Execution context is not available in detached frame"))return new Error("Waiting failed: Frame detached");if(e.message.includes("Execution context was destroyed"))return;if(e.message.includes("Cannot find context with specified id"))return}return e}}vs=new WeakMap,ks=new WeakMap,bs=new WeakMap,Es=new WeakMap,Cs=new WeakMap,Ms=new WeakMap,Ps=new WeakMap,_s=new WeakMap,Ts=new WeakMap;class Fs{constructor(){xs.set(this,new Set)}add(e){Ns(this,xs,"f").add(e)}delete(e){Ns(this,xs,"f").delete(e)}terminateAll(e){for(const t of Ns(this,xs,"f"))t.terminate(e);Ns(this,xs,"f").clear()}async rerunAll(){await Promise.all([...Ns(this,xs,"f")].map((e=>e.rerun())))}}xs=new WeakMap;var Ws,Rs,Ds,qs,js,As,Os,Ks,Ls,$s,Bs,Hs,Us,Vs,zs,Gs=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)},Qs=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i};class Js{get taskManager(){return Gs(this,Ls,"f")}get _boundFunctions(){return Gs(this,Ks,"f")}constructor(e){Ws.add(this),Ds.set(this,void 0),qs.set(this,void 0),js.set(this,Z()),As.set(this,!1),Os.set(this,new Set),Ks.set(this,new Map),Ls.set(this,new Fs),Vs.set(this,null),zs.set(this,(async e=>{let t;if(!this.hasContext())return;const i=await this.executionContext();try{t=JSON.parse(e.payload)}catch{return}const{type:s,name:r,seq:n,args:o}=t;if("internal"===s&&Gs(this,Os,"f").has(Gs(Js,Rs,"f",$s).call(Js,r,i._contextId))&&i._contextId===e.executionContextId)try{const e=this._boundFunctions.get(r);if(!e)throw new Error("Bound function $name is not found");const t=await e(...o);await i.evaluate(((e,t,i)=>{const s=self[e].callbacks;s.get(t).resolve(i),s.delete(t)}),r,n,t)}catch(e){if(e.message.includes("Protocol error"))return;Rr(e)}})),Qs(this,Ds,e,"f"),Gs(this,Ws,"a",Bs).on("Runtime.bindingCalled",Gs(this,zs,"f"))}frame(){return Gs(this,Ds,"f")}clearContext(){Qs(this,qs,void 0,"f"),Qs(this,js,Z(),"f")}setContext(e){Gs(this,Os,"f").clear(),Gs(this,js,"f").resolve(e),Gs(this,Ls,"f").rerunAll()}hasContext(){return Gs(this,js,"f").resolved()}_detach(){Qs(this,As,!0,"f"),Gs(this,Ws,"a",Bs).off("Runtime.bindingCalled",Gs(this,zs,"f")),Gs(this,Ls,"f").terminateAll(new Error("waitForFunction failed: frame got detached."))}executionContext(){if(Gs(this,As,"f"))throw new Error(`Execution context is not available in detached frame "${Gs(this,Ds,"f").url()}" (are you trying to evaluate?)`);if(null===Gs(this,js,"f"))throw new Error("Execution content promise is missing");return Gs(this,js,"f")}async evaluateHandle(e,...t){return(await this.executionContext()).evaluateHandle(e,...t)}async evaluate(e,...t){return(await this.executionContext()).evaluate(e,...t)}async $(e){return(await this.document()).$(e)}async $$(e){return(await this.document()).$$(e)}async document(){if(Gs(this,qs,"f"))return Gs(this,qs,"f");const e=await this.executionContext();return Qs(this,qs,await e.evaluateHandle((()=>document)),"f"),Gs(this,qs,"f")}async $x(e){return(await this.document()).$x(e)}async $eval(e,t,...i){return(await this.document()).$eval(e,t,...i)}async $$eval(e,t,...i){return(await this.document()).$$eval(e,t,...i)}async content(){return await this.evaluate((()=>{let e="";return document.doctype&&(e=(new XMLSerializer).serializeToString(document.doctype)),document.documentElement&&(e+=document.documentElement.outerHTML),e}))}async setContent(e,t={}){const{waitUntil:i=["load"],timeout:s=Gs(this,Ws,"a",Us).navigationTimeout()}=t;await this.evaluate((e=>{document.open(),document.write(e),document.close()}),e);const r=new gs(Gs(this,Ws,"a",Hs),Gs(this,Ds,"f"),i,s),n=await Promise.race([r.timeoutOrTerminationPromise(),r.lifecyclePromise()]);if(r.dispose(),n)throw n}async click(t,i){const s=await this.$(t);e(s,`No element found for selector: ${t}`),await s.click(i),await s.dispose()}async focus(t){const i=await this.$(t);e(i,`No element found for selector: ${t}`),await i.focus(),await i.dispose()}async hover(t){const i=await this.$(t);e(i,`No element found for selector: ${t}`),await i.hover(),await i.dispose()}async select(t,...i){const s=await this.$(t);e(s,`No element found for selector: ${t}`);const r=await s.select(...i);return await s.dispose(),r}async tap(t){const i=await this.$(t);e(i,`No element found for selector: ${t}`),await i.tap(),await i.dispose()}async type(t,i,s){const r=await this.$(t);e(r,`No element found for selector: ${t}`),await r.type(i,s),await r.dispose()}async _addBindingToContext(e,t){if(Gs(this,Os,"f").has(Gs(Js,Rs,"f",$s).call(Js,t,e._contextId)))return;if(Gs(this,Vs,"f"))return await Gs(this,Vs,"f"),this._addBindingToContext(e,t);Qs(this,Vs,(async t=>{const i=Hr("internal",t);try{await e._client.send("Runtime.addBinding",{name:t,executionContextName:e._contextName}),await e.evaluate(i)}catch(e){if(e instanceof Error){if(e.message.includes("Execution context was destroyed"))return;if(e.message.includes("Cannot find context with specified id"))return}return void Rr(e)}Gs(this,Os,"f").add(Gs(Js,Rs,"f",$s).call(Js,t,e._contextId))})(t),"f"),await Gs(this,Vs,"f"),Qs(this,Vs,null,"f")}async _waitForSelectorInPage(e,t,i,s,r=new Map){const{visible:n=!1,hidden:o=!1,timeout:a=Gs(this,Ws,"a",Us).timeout()}=s;try{const s=await this.waitForFunction((async(e,t,i,s,r)=>{if(!e)return;const n=await e.createFunction(t)(s||document,i,e);return e.checkVisibility(n,r)}),{bindings:r,polling:n||o?"raf":"mutation",root:t,timeout:a},se.create((e=>e.puppeteerUtil)),e.toString(),i,t,!!n||!o&&void 0),c=s.asElement();return c||(await s.dispose(),null)}catch(e){if(!L(e))throw e;throw e.message=`Waiting for selector \`${i}\` failed: ${e.message}`,e}}waitForFunction(e,t={},...i){const{polling:s="raf",timeout:r=Gs(this,Ws,"a",Us).timeout(),bindings:n,root:o}=t;if("number"==typeof s&&s<0)throw new Error("Cannot poll with non-positive interval");return new Ss(this,{bindings:n,polling:s,root:o,timeout:r},e,...i).result}async title(){return this.evaluate((()=>document.title))}async adoptBackendNode(e){const t=await this.executionContext(),{object:i}=await Gs(this,Ws,"a",Bs).send("DOM.resolveNode",{backendNodeId:e,executionContextId:t._contextId});return $r(t,i)}async adoptHandle(t){const i=await this.executionContext();e(t.executionContext()!==i,"Cannot adopt handle that already belongs to this execution context");const s=await Gs(this,Ws,"a",Bs).send("DOM.describeNode",{objectId:t.remoteObject().objectId});return await this.adoptBackendNode(s.node.backendNodeId)}async transferHandle(e){const t=await this.adoptHandle(e);return await e.dispose(),t}}Rs=Js,Ds=new WeakMap,qs=new WeakMap,js=new WeakMap,As=new WeakMap,Os=new WeakMap,Ks=new WeakMap,Ls=new WeakMap,Vs=new WeakMap,zs=new WeakMap,Ws=new WeakSet,Bs=function(){return Gs(this,Ds,"f")._client()},Hs=function(){return Gs(this,Ds,"f")._frameManager},Us=function(){return Gs(this,Ws,"a",Hs).timeoutSettings},$s={value:(e,t)=>`${e}_${t}`};var Xs,Ys,Zs,er=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},tr=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class ir{constructor(e,t,i,s){Xs.set(this,""),Ys.set(this,!1),Zs.set(this,void 0),this._loaderId="",this._hasStartedLoading=!1,this._lifecycleEvents=new Set,this._frameManager=e,er(this,Xs,"","f"),this._id=t,this._parentId=i,er(this,Ys,!1,"f"),this._loaderId="",this.updateClient(s)}updateClient(e){er(this,Zs,e,"f"),this.worlds={[$]:new Js(this),[B]:new Js(this)}}page(){return this._frameManager.page()}isOOPFrame(){return tr(this,Zs,"f")!==this._frameManager.client}async goto(e,t={}){const{referer:i=this._frameManager.networkManager.extraHTTPHeaders().referer,referrerPolicy:s=this._frameManager.networkManager.extraHTTPHeaders()["referer-policy"],waitUntil:r=["load"],timeout:n=this._frameManager.timeoutSettings.navigationTimeout()}=t;let o=!1;const a=new gs(this._frameManager,this,r,n);let c=await Promise.race([async function(e,t,i,s,r){try{const n=await e.send("Page.navigate",{url:t,referrer:i,frameId:r,referrerPolicy:s});return o=!!n.loaderId,"net::ERR_HTTP_RESPONSE_CODE_FAILURE"===n.errorText?null:n.errorText?new Error(`${n.errorText} at ${t}`):null}catch(e){if(L(e))return e;throw e}}(tr(this,Zs,"f"),e,i,s,this._id),a.timeoutOrTerminationPromise()]);c||(c=await Promise.race([a.timeoutOrTerminationPromise(),o?a.newDocumentNavigationPromise():a.sameDocumentNavigationPromise()]));try{if(c)throw c;return await a.navigationResponse()}finally{a.dispose()}}async waitForNavigation(e={}){const{waitUntil:t=["load"],timeout:i=this._frameManager.timeoutSettings.navigationTimeout()}=e,s=new gs(this._frameManager,this,t,i),r=await Promise.race([s.timeoutOrTerminationPromise(),s.sameDocumentNavigationPromise(),s.newDocumentNavigationPromise()]);try{if(r)throw r;return await s.navigationResponse()}finally{s.dispose()}}_client(){return tr(this,Zs,"f")}executionContext(){return this.worlds[$].executionContext()}async evaluateHandle(e,...t){return this.worlds[$].evaluateHandle(e,...t)}async evaluate(e,...t){return this.worlds[$].evaluate(e,...t)}async $(e){return this.worlds[$].$(e)}async $$(e){return this.worlds[$].$$(e)}async $eval(e,t,...i){return this.worlds[$].$eval(e,t,...i)}async $$eval(e,t,...i){return this.worlds[$].$$eval(e,t,...i)}async $x(e){return this.worlds[$].$x(e)}async waitForSelector(t,i={}){const{updatedSelector:s,queryHandler:r}=hr(t);return e(r.waitFor,"Query handler does not support waiting"),await r.waitFor(this,s,i)}async waitForXPath(e,t={}){return e.startsWith("//")&&(e=`.${e}`),this.waitForSelector(`xpath/${e}`,t)}waitForFunction(e,t={},...i){return this.worlds[$].waitForFunction(e,t,...i)}async content(){return this.worlds[B].content()}async setContent(e,t={}){return this.worlds[B].setContent(e,t)}name(){return this._name||""}url(){return tr(this,Xs,"f")}parentFrame(){return this._frameManager._frameTree.parentFrame(this._id)||null}childFrames(){return this._frameManager._frameTree.childFrames(this._id)}isDetached(){return tr(this,Ys,"f")}async addScriptTag(e){let{content:t="",type:i}=e;const{path:s}=e;if(+!!e.url+ +!!s+ +!!t!=1)throw new Error("Exactly one of `url`, `path`, or `content` must be specified.");if(s){let e;try{e=(await import("fs")).promises}catch(e){if(e instanceof TypeError)throw new Error("Can only pass a file path in a Node-like environment.");throw e}t=await e.readFile(s,"utf8"),t+=`//# sourceURL=${s.replace(/\n/g,"")}`}return i=null!=i?i:"text/javascript",this.worlds[$].transferHandle(await this.worlds[B].evaluateHandle((async({createDeferredPromise:e},{url:t,id:i,type:s,content:r})=>{const n=e(),o=document.createElement("script");return o.type=s,o.text=r,t?(o.src=t,o.addEventListener("load",(()=>n.resolve()),{once:!0}),o.addEventListener("error",(e=>{var t;n.reject(new Error(null!==(t=e.message)&&void 0!==t?t:"Could not load script"))}),{once:!0})):n.resolve(),i&&(o.id=i),document.head.appendChild(o),await n,o}),se.create((e=>e.puppeteerUtil)),{...e,type:i,content:t}))}async addStyleTag(e){let{content:t=""}=e;const{path:i}=e;if(+!!e.url+ +!!i+ +!!t!=1)throw new Error("Exactly one of `url`, `path`, or `content` must be specified.");if(i){let s;try{s=(await zr()).promises}catch(e){if(e instanceof TypeError)throw new Error("Can only pass a file path in a Node-like environment.");throw e}t=await s.readFile(i,"utf8"),t+="/*# sourceURL="+i.replace(/\n/g,"")+"*/",e.content=t}return this.worlds[$].transferHandle(await this.worlds[B].evaluateHandle((async({createDeferredPromise:e},{url:t,content:i})=>{const s=e();let r;if(t){const e=document.createElement("link");e.rel="stylesheet",e.href=t,r=e}else r=document.createElement("style"),r.appendChild(document.createTextNode(i));return r.addEventListener("load",(()=>{s.resolve()}),{once:!0}),r.addEventListener("error",(e=>{var t;s.reject(new Error(null!==(t=e.message)&&void 0!==t?t:"Could not load style"))}),{once:!0}),document.head.appendChild(r),await s,r}),se.create((e=>e.puppeteerUtil)),e))}async click(e,t={}){return this.worlds[B].click(e,t)}async focus(e){return this.worlds[B].focus(e)}async hover(e){return this.worlds[B].hover(e)}select(e,...t){return this.worlds[B].select(e,...t)}async tap(e){return this.worlds[B].tap(e)}async type(e,t,i){return this.worlds[B].type(e,t,i)}waitForTimeout(e){return new Promise((t=>{setTimeout(t,e)}))}async title(){return this.worlds[B].title()}_navigated(e){this._name=e.name,er(this,Xs,`${e.url}${e.urlFragment||""}`,"f")}_navigatedWithinDocument(e){er(this,Xs,e,"f")}_onLifecycleEvent(e,t){"init"===t&&(this._loaderId=e,this._lifecycleEvents.clear()),this._lifecycleEvents.add(t)}_onLoadingStopped(){this._lifecycleEvents.add("DOMContentLoaded"),this._lifecycleEvents.add("load")}_onLoadingStarted(){this._hasStartedLoading=!0}_detach(){er(this,Ys,!0,"f"),this.worlds[$]._detach(),this.worlds[B]._detach()}}function sr(t){const i={};if(t.queryOne){const s=t.queryOne;i.queryOne=async(t,i)=>{const r=t.executionContext()._world;e(r);const n=await t.evaluateHandle(s,i,se.create((e=>e.puppeteerUtil))),o=n.asElement();return o||(await n.dispose(),null)},i.waitFor=async(e,t,i)=>{let r,n;e instanceof ir?r=e:(r=e.frame,n=await r.worlds[B].adoptHandle(e));const o=await r.worlds[B]._waitForSelectorInPage(s,n,t,i);return n&&await n.dispose(),o?o instanceof Y?r.worlds[$].transferHandle(o):(await o.dispose(),null):null}}if(t.queryAll){const s=t.queryAll;i.queryAll=async(t,i)=>{const r=t.executionContext()._world;e(r);const n=await t.evaluateHandle(s,i,se.create((e=>e.puppeteerUtil))),o=await n.getProperties();await n.dispose();const a=[];for(const e of o.values()){const t=e.asElement();t&&a.push(t)}return a}}return i}Xs=new WeakMap,Ys=new WeakMap,Zs=new WeakMap;const rr=sr({queryOne:(e,t)=>{if(!("querySelector"in e))throw new Error(`Could not invoke \`querySelector\` on node of type ${e.nodeName}.`);return e.querySelector(t)},queryAll:(e,t)=>{if(!("querySelectorAll"in e))throw new Error(`Could not invoke \`querySelectorAll\` on node of type ${e.nodeName}.`);return[...e.querySelectorAll(t)]}}),nr=sr({queryOne:(e,t,{pierceQuerySelector:i})=>i(e,t),queryAll:(e,t,{pierceQuerySelectorAll:i})=>i(e,t)}),or=sr({queryOne:(e,t,{xpathQuerySelector:i})=>i(e,t),queryAll:(e,t,{xpathQuerySelectorAll:i})=>i(e,t)}),ar=sr({queryOne:(e,t,{textQuerySelector:i})=>i(e,t),queryAll:(e,t,{textQuerySelectorAll:i})=>i(e,t)}),cr=new Map([["aria",{handler:J}],["pierce",{handler:nr}],["xpath",{handler:or}],["text",{handler:ar}]]),dr=new Map;const lr=["=","/"];function hr(e){for(const t of[dr,cr])for(const[i,{handler:s,transformSelector:r}]of t)for(const t of lr){const n=`${i}${t}`;if(e.startsWith(n))return e=e.slice(n.length),r&&(e=r(e)),{updatedSelector:e,queryHandler:s}}return{updatedSelector:e,queryHandler:rr}}var fr,ur,wr,mr,pr,yr,gr,vr,kr,br,Er,Cr,Mr=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},Pr=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};const _r=(e,t,i)=>e.map((e=>({x:e.x+t,y:e.y+i})));class Tr extends Y{constructor(e,t,i){super(),fr.add(this),ur.set(this,!1),wr.set(this,void 0),mr.set(this,void 0),pr.set(this,void 0),Mr(this,mr,e,"f"),Mr(this,pr,t,"f"),Mr(this,wr,i,"f")}executionContext(){return Pr(this,mr,"f")}get client(){return Pr(this,mr,"f")._client}remoteObject(){return Pr(this,pr,"f")}async evaluate(e,...t){return this.executionContext().evaluate(e,this,...t)}evaluateHandle(e,...t){return this.executionContext().evaluateHandle(e,this,...t)}get frame(){return Pr(this,wr,"f")}get disposed(){return Pr(this,ur,"f")}async getProperty(e){return this.evaluateHandle(((e,t)=>e[t]),e)}async jsonValue(){if(!Pr(this,pr,"f").objectId)return qr(Pr(this,pr,"f"));const e=await this.evaluate((e=>e));if(void 0===e)throw new Error("Could not serialize referenced object");return e}toString(){if(!Pr(this,pr,"f").objectId)return"JSHandle:"+qr(Pr(this,pr,"f"));return"JSHandle@"+(Pr(this,pr,"f").subtype||Pr(this,pr,"f").type)}async $(t){const{updatedSelector:i,queryHandler:s}=hr(t);return e(s.queryOne,"Cannot handle queries for a single element with the given selector"),await s.queryOne(this,i)}async $$(t){const{updatedSelector:i,queryHandler:s}=hr(t);return e(s.queryAll,"Cannot handle queries for a multiple element with the given selector"),await s.queryAll(this,i)}async $eval(e,t,...i){const s=await this.$(e);if(!s)throw new Error(`Error: failed to find element matching selector "${e}"`);const r=await s.evaluate(t,...i);return await s.dispose(),r}async $$eval(t,i,...s){const{updatedSelector:r,queryHandler:n}=hr(t);e(n.queryAll,"Cannot handle queries for a multiple element with the given selector");const o=await n.queryAll(this,r),a=await this.evaluateHandle(((e,...t)=>t),...o),[c]=await Promise.all([a.evaluate(i,...s),...o.map((e=>e.dispose()))]);return await a.dispose(),c}async $x(e){return e.startsWith("//")&&(e=`.${e}`),this.$$(`xpath/${e}`)}async waitForSelector(t,i={}){const{updatedSelector:s,queryHandler:r}=hr(t);return e(r.waitFor,"Query handler does not support waiting"),await r.waitFor(this,s,i)}async waitForXPath(e,t={}){return e.startsWith("//")&&(e=`.${e}`),this.waitForSelector(`xpath/${e}`,t)}async toElement(e){const t=await this.evaluate(((e,t)=>e.nodeName===t.toUpperCase()),e);if(!t)throw new Error(`Element is not a(n) \`${e}\` element`);return this}asElement(){return this}async contentFrame(){const e=await this.client.send("DOM.describeNode",{objectId:this.remoteObject().objectId});return"string"!=typeof e.node.frameId?null:Pr(this,fr,"a",yr).frame(e.node.frameId)}async clickablePoint(e){const[t,i]=await Promise.all([this.client.send("DOM.getContentQuads",{objectId:this.remoteObject().objectId}).catch(Rr),Pr(this,fr,"a",gr)._client().send("Page.getLayoutMetrics")]);if(!t||!t.quads.length)throw new Error("Node is either not clickable or not an HTMLElement");const{clientWidth:s,clientHeight:r}=i.cssLayoutViewport||i.layoutViewport,{offsetX:n,offsetY:o}=await Pr(this,fr,"m",kr).call(this,Pr(this,wr,"f")),a=t.quads.map((e=>Pr(this,fr,"m",Er).call(this,e))).map((e=>_r(e,n,o))).map((e=>Pr(this,fr,"m",Cr).call(this,e,s,r))).filter((e=>function(e){let t=0;for(let i=0;i<e.length;++i){const s=e[i],r=e[(i+1)%e.length];t+=(s.x*r.y-r.x*s.y)/2}return Math.abs(t)}(e)>1));if(!a.length)throw new Error("Node is either not clickable or not an HTMLElement");const c=a[0];if(e){let t=Number.MAX_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER;for(const e of c)e.x<t&&(t=e.x),e.y<i&&(i=e.y);if(t!==Number.MAX_SAFE_INTEGER&&i!==Number.MAX_SAFE_INTEGER)return{x:t+e.x,y:i+e.y}}let d=0,l=0;for(const e of c)d+=e.x,l+=e.y;return{x:d/4,y:l/4}}async hover(){await Pr(this,fr,"m",vr).call(this);const{x:e,y:t}=await this.clickablePoint();await Pr(this,fr,"a",gr).mouse.move(e,t)}async click(e={}){await Pr(this,fr,"m",vr).call(this);const{x:t,y:i}=await this.clickablePoint(e.offset);await Pr(this,fr,"a",gr).mouse.click(t,i,e)}async drag(t){e(Pr(this,fr,"a",gr).isDragInterceptionEnabled(),"Drag Interception is not enabled!"),await Pr(this,fr,"m",vr).call(this);const i=await this.clickablePoint();return await Pr(this,fr,"a",gr).mouse.drag(i,t)}async dragEnter(e={items:[],dragOperationsMask:1}){await Pr(this,fr,"m",vr).call(this);const t=await this.clickablePoint();await Pr(this,fr,"a",gr).mouse.dragEnter(t,e)}async dragOver(e={items:[],dragOperationsMask:1}){await Pr(this,fr,"m",vr).call(this);const t=await this.clickablePoint();await Pr(this,fr,"a",gr).mouse.dragOver(t,e)}async drop(e={items:[],dragOperationsMask:1}){await Pr(this,fr,"m",vr).call(this);const t=await this.clickablePoint();await Pr(this,fr,"a",gr).mouse.drop(t,e)}async dragAndDrop(e,t){await Pr(this,fr,"m",vr).call(this);const i=await this.clickablePoint(),s=await e.clickablePoint();await Pr(this,fr,"a",gr).mouse.dragAndDrop(i,s,t)}async select(...t){for(const i of t)e(Kr(i),'Values must be strings. Found value "'+i+'" of type "'+typeof i+'"');return this.evaluate(((e,t)=>{const i=new Set(t);if(!(e instanceof HTMLSelectElement))throw new Error("Element is not a <select> element.");const s=new Set;if(e.multiple)for(const t of e.options)t.selected=i.has(t.value),t.selected&&s.add(t.value);else{for(const t of e.options)t.selected=!1;for(const t of e.options)if(i.has(t.value)){t.selected=!0,s.add(t.value);break}}return e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})),[...s.values()]}),t)}async uploadFile(...t){const i=await this.evaluate((e=>e.multiple));let s;e(t.length<=1||i,"Multiple file uploads only work with <input type=file multiple>");try{s=await import("path")}catch(e){if(e instanceof TypeError)throw new Error("JSHandle#uploadFile can only be used in Node-like environments.");throw e}const r=t.map((e=>s.win32.isAbsolute(e)||s.posix.isAbsolute(e)?e:s.resolve(e))),{objectId:n}=this.remoteObject(),{node:o}=await this.client.send("DOM.describeNode",{objectId:n}),{backendNodeId:a}=o;0===r.length?await this.evaluate((e=>{e.files=(new DataTransfer).files,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0}))})):await this.client.send("DOM.setFileInputFiles",{objectId:n,files:r,backendNodeId:a})}async tap(){await Pr(this,fr,"m",vr).call(this);const{x:e,y:t}=await this.clickablePoint();await Pr(this,fr,"a",gr).touchscreen.touchStart(e,t),await Pr(this,fr,"a",gr).touchscreen.touchEnd()}async touchStart(){await Pr(this,fr,"m",vr).call(this);const{x:e,y:t}=await this.clickablePoint();await Pr(this,fr,"a",gr).touchscreen.touchStart(e,t)}async touchMove(){await Pr(this,fr,"m",vr).call(this);const{x:e,y:t}=await this.clickablePoint();await Pr(this,fr,"a",gr).touchscreen.touchMove(e,t)}async touchEnd(){await Pr(this,fr,"m",vr).call(this),await Pr(this,fr,"a",gr).touchscreen.touchEnd()}async focus(){await this.evaluate((e=>{if(!(e instanceof HTMLElement))throw new Error("Cannot focus non-HTMLElement");return e.focus()}))}async type(e,t){await this.focus(),await Pr(this,fr,"a",gr).keyboard.type(e,t)}async press(e,t){await this.focus(),await Pr(this,fr,"a",gr).keyboard.press(e,t)}async boundingBox(){const e=await Pr(this,fr,"m",br).call(this);if(!e)return null;const{offsetX:t,offsetY:i}=await Pr(this,fr,"m",kr).call(this,Pr(this,wr,"f")),s=e.model.border,r=Math.min(s[0],s[2],s[4],s[6]),n=Math.min(s[1],s[3],s[5],s[7]);return{x:r+t,y:n+i,width:Math.max(s[0],s[2],s[4],s[6])-r,height:Math.max(s[1],s[3],s[5],s[7])-n}}async boxModel(){const e=await Pr(this,fr,"m",br).call(this);if(!e)return null;const{offsetX:t,offsetY:i}=await Pr(this,fr,"m",kr).call(this,Pr(this,wr,"f")),{content:s,padding:r,border:n,margin:o,width:a,height:c}=e.model;return{content:_r(Pr(this,fr,"m",Er).call(this,s),t,i),padding:_r(Pr(this,fr,"m",Er).call(this,r),t,i),border:_r(Pr(this,fr,"m",Er).call(this,n),t,i),margin:_r(Pr(this,fr,"m",Er).call(this,o),t,i),width:a,height:c}}async screenshot(t={}){let i=!1,s=await this.boundingBox();e(s,"Node is either not visible or not an HTMLElement");const r=Pr(this,fr,"a",gr).viewport();if(r&&(s.width>r.width||s.height>r.height)){const e={width:Math.max(r.width,Math.ceil(s.width)),height:Math.max(r.height,Math.ceil(s.height))};await Pr(this,fr,"a",gr).setViewport(Object.assign({},r,e)),i=!0}await Pr(this,fr,"m",vr).call(this),s=await this.boundingBox(),e(s,"Node is either not visible or not an HTMLElement"),e(0!==s.width,"Node has 0 width."),e(0!==s.height,"Node has 0 height.");const n=await this.client.send("Page.getLayoutMetrics"),{pageX:o,pageY:a}=n.cssVisualViewport||n.layoutViewport,c=Object.assign({},s);c.x+=o,c.y+=a;const d=await Pr(this,fr,"a",gr).screenshot(Object.assign({},{clip:c},t));return i&&r&&await Pr(this,fr,"a",gr).setViewport(r),d}async isIntersectingViewport(e){const{threshold:t=0}=null!=e?e:{};return await this.evaluate((async(e,t)=>{const i=await new Promise((t=>{const i=new IntersectionObserver((e=>{t(e[0].intersectionRatio),i.disconnect()}));i.observe(e)}));return 1===t?1===i:i>t}),t)}async dispose(){Pr(this,ur,"f")||(Mr(this,ur,!0,"f"),await jr(this.client,Pr(this,pr,"f")))}}ur=new WeakMap,wr=new WeakMap,mr=new WeakMap,pr=new WeakMap,fr=new WeakSet,yr=function(){return Pr(this,wr,"f")._frameManager},gr=function(){return Pr(this,wr,"f").page()},vr=async function(){const e=await this.evaluate((async e=>e.isConnected?e.nodeType!==Node.ELEMENT_NODE?"Node is not of type HTMLElement":void 0:"Node is detached from document"));if(e)throw new Error(e);try{await this.client.send("DOM.scrollIntoViewIfNeeded",{objectId:this.remoteObject().objectId})}catch(e){await this.evaluate((async(e,t)=>{t&&1===await(async()=>await new Promise((t=>{const i=new IntersectionObserver((e=>{t(e[0].intersectionRatio),i.disconnect()}));i.observe(e)})))()||e.scrollIntoView({block:"center",inline:"center",behavior:"instant"})}),Pr(this,fr,"a",gr).isJavaScriptEnabled())}},kr=async function(e){let t=0,i=0,s=e;for(;s&&s.parentFrame();){const e=s.parentFrame();if(!s.isOOPFrame()||!e){s=e;continue}const{backendNodeId:r}=await e._client().send("DOM.getFrameOwner",{frameId:s._id}),n=await e._client().send("DOM.getBoxModel",{backendNodeId:r});if(!n)break;const o=n.model.content,a=Pr(this,fr,"m",Er).call(this,o)[0];t+=a.x,i+=a.y,s=e}return{offsetX:t,offsetY:i}},br=function(){const e={objectId:this.remoteObject().objectId};return this.client.send("DOM.getBoxModel",e).catch((e=>Rr(e)))},Er=function(e){return[{x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},{x:e[6],y:e[7]}]},Cr=function(e,t,i){return e.map((e=>({x:Math.min(Math.max(e.x,0),t),y:Math.min(Math.max(e.y,0),i)})))};var xr,Ir,Nr,Sr=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)},Fr=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i};class Wr extends X{get disposed(){return Sr(this,xr,"f")}constructor(e,t){super(),xr.set(this,!1),Ir.set(this,void 0),Nr.set(this,void 0),Fr(this,Ir,e,"f"),Fr(this,Nr,t,"f")}executionContext(){return Sr(this,Ir,"f")}get client(){return Sr(this,Ir,"f")._client}async evaluate(e,...t){return await this.executionContext().evaluate(e,this,...t)}async evaluateHandle(e,...t){return await this.executionContext().evaluateHandle(e,this,...t)}async getProperty(e){return this.evaluateHandle(((e,t)=>e[t]),e)}async getProperties(){e(Sr(this,Nr,"f").objectId);const t=await this.client.send("Runtime.getProperties",{objectId:Sr(this,Nr,"f").objectId,ownProperties:!0}),i=new Map;for(const e of t.result)e.enumerable&&e.value&&i.set(e.name,$r(Sr(this,Ir,"f"),e.value));return i}async jsonValue(){if(!Sr(this,Nr,"f").objectId)return qr(Sr(this,Nr,"f"));const e=await this.evaluate((e=>e));if(void 0===e)throw new Error("Could not serialize referenced object");return e}asElement(){return null}async dispose(){Sr(this,xr,"f")||(Fr(this,xr,!0,"f"),await jr(this.client,Sr(this,Nr,"f")))}toString(){if(!Sr(this,Nr,"f").objectId)return"JSHandle:"+qr(Sr(this,Nr,"f"));return"JSHandle@"+(Sr(this,Nr,"f").subtype||Sr(this,Nr,"f").type)}remoteObject(){return Sr(this,Nr,"f")}}xr=new WeakMap,Ir=new WeakMap,Nr=new WeakMap;const Rr=r("puppeteer:error");function Dr(e){if(e.exception)return e.exception.description||e.exception.value;let t=e.text;if(e.stackTrace)for(const i of e.stackTrace.callFrames){const e=i.url+":"+i.lineNumber+":"+i.columnNumber;t+=`\n    at ${i.functionName||"<anonymous>"} (${e})`}return t}function qr(t){if(e(!t.objectId,"Cannot extract value when objectId is given"),t.unserializableValue){if("bigint"===t.type&&"undefined"!=typeof BigInt)return BigInt(t.unserializableValue.replace("n",""));switch(t.unserializableValue){case"-0":return-0;case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error("Unsupported unserializable value: "+t.unserializableValue)}}return t.value}async function jr(e,t){t.objectId&&await e.send("Runtime.releaseObject",{objectId:t.objectId}).catch((e=>{Rr(e)}))}function Ar(e,t,i){return e.on(t,i),{emitter:e,eventName:t,handler:i}}function Or(e){for(const t of e)t.emitter.removeListener(t.eventName,t.handler);e.length=0}const Kr=e=>"string"==typeof e||e instanceof String;async function Lr(e,t,i,s,r){let n,o,a;const c=new Promise(((e,t)=>{o=e,a=t})),d=Ar(e,t,(async e=>{await i(e)&&o(e)}));function l(){Or([d]),clearTimeout(n)}s&&(n=setTimeout((()=>{a(new u("Timeout exceeded while waiting for event"))}),s));const h=await Promise.race([c,r]).then((e=>(l(),e)),(e=>{throw l(),e}));if(L(h))throw h;return h}function $r(e,t){return"node"===t.subtype&&e._world?new Tr(e,t,e._world.frame()):new Wr(e,t)}function Br(t,...i){if(Kr(t))return e(0===i.length,"Cannot evaluate a string with arguments"),t;return`(${t})(${i.map((function(e){return Object.is(e,void 0)?"undefined":JSON.stringify(e)})).join(",")})`}function Hr(e,t){return Br((function(e,t){const i=self[t];Object.assign(self,{[t](...s){var r,n;const o=self[t];null!==(r=o.callbacks)&&void 0!==r||(o.callbacks=new Map);const a=(null!==(n=o.lastSeq)&&void 0!==n?n:0)+1;return o.lastSeq=a,i(JSON.stringify({type:e,name:t,seq:a,args:s})),new Promise(((e,t)=>{o.callbacks.set(a,{resolve:e,reject:t})}))}})}),e,t)}async function Ur(e,t,i){let s;const r=new u(`waiting for ${t} failed: timeout ${i}ms exceeded`),n=new Promise(((e,t)=>s=t));let o=null;i&&(o=setTimeout((()=>s(r)),i));try{return await Promise.race([e,n])}finally{o&&clearTimeout(o)}}let Vr=null;async function zr(){return Vr||(Vr=await import("fs")),Vr}async function Gr(e,t){const i=[];if(t){let s;try{s=(await zr()).promises}catch(e){if(e instanceof TypeError)throw new Error("Cannot write to a path outside of a Node-like environment.");throw e}const r=await s.open(t,"w+");for await(const t of e)i.push(t),await r.writeFile(t);await r.close()}else for await(const t of e)i.push(t);try{return Buffer.concat(i)}catch(e){return null}}async function Qr(e,i){if(!t)throw new Error("Cannot create a stream outside of Node.js environment.");const{Readable:s}=await import("stream");let r=!1;return new s({async read(t){if(r)return;const s=await e.send("IO.read",{handle:i,size:t});this.push(s.data,s.base64Encoded?"base64":void 0),s.eof&&(r=!0,await e.send("IO.close",{handle:i}),this.push(null))}})}function Jr(e){let t=e.toString();try{new Function("("+t+")")}catch(e){t=t.startsWith("async ")?"async function "+t.substring("async ".length):"function "+t;try{new Function("("+t+")")}catch(e){throw new Error("Passed function is not well-serializable!")}}return t}var Xr,Yr,Zr,en=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},tn=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class sn extends a{constructor(e,t,i,s){super(),Xr.set(this,Z()),Yr.set(this,void 0),Zr.set(this,void 0),en(this,Yr,e,"f"),en(this,Zr,t,"f"),tn(this,Yr,"f").once("Runtime.executionContextCreated",(async t=>{const i=new le(e,t.context);tn(this,Xr,"f").resolve(i)})),tn(this,Yr,"f").on("Runtime.consoleAPICalled",(async e=>{const t=await tn(this,Xr,"f");return i(e.type,e.args.map((e=>new Wr(t,e))),e.stackTrace)})),tn(this,Yr,"f").on("Runtime.exceptionThrown",(e=>s(e.exceptionDetails))),tn(this,Yr,"f").send("Runtime.enable").catch(Rr)}async executionContext(){return tn(this,Xr,"f")}url(){return tn(this,Zr,"f")}async evaluate(e,...t){return(await tn(this,Xr,"f")).evaluate(e,...t)}async evaluateHandle(e,...t){return(await tn(this,Xr,"f")).evaluateHandle(e,...t)}}Xr=new WeakMap,Yr=new WeakMap,Zr=new WeakMap;var rn,nn=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class on extends a{constructor(){super(),rn.set(this,new WeakMap)}isDragInterceptionEnabled(){throw new Error("Not implemented")}isJavaScriptEnabled(){throw new Error("Not implemented")}on(e,t){if("request"===e){const i=nn(this,rn,"f").get(t)||(e=>{e.enqueueInterceptAction((()=>t(e)))});return nn(this,rn,"f").set(t,i),super.on(e,i)}return super.on(e,t)}once(e,t){return super.once(e,t)}off(e,t){return"request"===e&&(t=nn(this,rn,"f").get(t)||t),super.off(e,t)}waitForFileChooser(){throw new Error("Not implemented")}async setGeolocation(){throw new Error("Not implemented")}target(){throw new Error("Not implemented")}browser(){throw new Error("Not implemented")}browserContext(){throw new Error("Not implemented")}mainFrame(){throw new Error("Not implemented")}get keyboard(){throw new Error("Not implemented")}get touchscreen(){throw new Error("Not implemented")}get coverage(){throw new Error("Not implemented")}get tracing(){throw new Error("Not implemented")}get accessibility(){throw new Error("Not implemented")}frames(){throw new Error("Not implemented")}workers(){throw new Error("Not implemented")}async setRequestInterception(){throw new Error("Not implemented")}async setDragInterception(){throw new Error("Not implemented")}setOfflineMode(){throw new Error("Not implemented")}emulateNetworkConditions(){throw new Error("Not implemented")}setDefaultNavigationTimeout(){throw new Error("Not implemented")}setDefaultTimeout(){throw new Error("Not implemented")}getDefaultTimeout(){throw new Error("Not implemented")}async $(){throw new Error("Not implemented")}async $$(){throw new Error("Not implemented")}async evaluateHandle(){throw new Error("Not implemented")}async queryObjects(){throw new Error("Not implemented")}async $eval(){throw new Error("Not implemented")}async $$eval(){throw new Error("Not implemented")}async $x(){throw new Error("Not implemented")}async cookies(){throw new Error("Not implemented")}async deleteCookie(){throw new Error("Not implemented")}async setCookie(){throw new Error("Not implemented")}async addScriptTag(){throw new Error("Not implemented")}async addStyleTag(){throw new Error("Not implemented")}async exposeFunction(){throw new Error("Not implemented")}async authenticate(){throw new Error("Not implemented")}async setExtraHTTPHeaders(){throw new Error("Not implemented")}async setUserAgent(){throw new Error("Not implemented")}async metrics(){throw new Error("Not implemented")}url(){throw new Error("Not implemented")}async content(){throw new Error("Not implemented")}async setContent(){throw new Error("Not implemented")}async goto(){throw new Error("Not implemented")}async reload(){throw new Error("Not implemented")}async waitForNavigation(){throw new Error("Not implemented")}async waitForRequest(){throw new Error("Not implemented")}async waitForResponse(){throw new Error("Not implemented")}async waitForNetworkIdle(){throw new Error("Not implemented")}async waitForFrame(){throw new Error("Not implemented")}async goBack(){throw new Error("Not implemented")}async goForward(){throw new Error("Not implemented")}async bringToFront(){throw new Error("Not implemented")}async emulate(e){await Promise.all([this.setUserAgent(e.userAgent),this.setViewport(e.viewport)])}async setJavaScriptEnabled(){throw new Error("Not implemented")}async setBypassCSP(){throw new Error("Not implemented")}async emulateMediaType(){throw new Error("Not implemented")}async emulateCPUThrottling(){throw new Error("Not implemented")}async emulateMediaFeatures(){throw new Error("Not implemented")}async emulateTimezone(){throw new Error("Not implemented")}async emulateIdleState(){throw new Error("Not implemented")}async emulateVisionDeficiency(){throw new Error("Not implemented")}async setViewport(){throw new Error("Not implemented")}viewport(){throw new Error("Not implemented")}async evaluate(){throw new Error("Not implemented")}async evaluateOnNewDocument(){throw new Error("Not implemented")}async setCacheEnabled(){throw new Error("Not implemented")}async screenshot(){throw new Error("Not implemented")}async createPDFStream(){throw new Error("Not implemented")}async pdf(){throw new Error("Not implemented")}async title(){throw new Error("Not implemented")}async close(){throw new Error("Not implemented")}isClosed(){throw new Error("Not implemented")}get mouse(){throw new Error("Not implemented")}click(){throw new Error("Not implemented")}focus(){throw new Error("Not implemented")}hover(){throw new Error("Not implemented")}select(){throw new Error("Not implemented")}tap(){throw new Error("Not implemented")}type(){throw new Error("Not implemented")}waitForTimeout(){throw new Error("Not implemented")}async waitForSelector(){throw new Error("Not implemented")}waitForXPath(){throw new Error("Not implemented")}waitForFunction(){throw new Error("Not implemented")}}rn=new WeakMap;new Set(["Timestamp","Documents","Frames","JSEventListeners","Nodes","LayoutCount","RecalcStyleCount","LayoutDuration","RecalcStyleDuration","ScriptDuration","TaskDuration","JSHeapUsedSize","JSHeapTotalSize"]);var an,cn,dn,ln,hn,fn,un,wn,mn,pn,yn,gn,vn,kn=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},bn=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class En{constructor(e){an.set(this,void 0),kn(this,an,e,"f")}async snapshot(e={}){var t,i;const{interestingOnly:s=!0,root:r=null}=e,{nodes:n}=await bn(this,an,"f").send("Accessibility.getFullAXTree");let o;if(r){const{node:e}=await bn(this,an,"f").send("DOM.describeNode",{objectId:r.remoteObject().objectId});o=e.backendNodeId}const a=Cn.createTree(n);let c=a;if(o&&(c=a.find((e=>e.payload.backendDOMNodeId===o)),!c))return null;if(!s)return null!==(t=this.serializeTree(c)[0])&&void 0!==t?t:null;const d=new Set;return this.collectInterestingNodes(d,a,!1),d.has(c)&&null!==(i=this.serializeTree(c,d)[0])&&void 0!==i?i:null}serializeTree(e,t){const i=[];for(const s of e.children)i.push(...this.serializeTree(s,t));if(t&&!t.has(e))return i;const s=e.serialize();return i.length&&(s.children=i),[s]}collectInterestingNodes(e,t,i){if(t.isInteresting(i)&&e.add(t),!t.isLeafNode()){i=i||t.isControl();for(const s of t.children)this.collectInterestingNodes(e,s,i)}}}an=new WeakMap;class Cn{constructor(e){cn.add(this),this.children=[],dn.set(this,!1),ln.set(this,!1),hn.set(this,!1),fn.set(this,!1),un.set(this,void 0),wn.set(this,void 0),mn.set(this,void 0),pn.set(this,void 0),this.payload=e,kn(this,un,this.payload.name?this.payload.name.value:"","f"),kn(this,wn,this.payload.role?this.payload.role.value:"Unknown","f"),kn(this,mn,this.payload.ignored,"f");for(const e of this.payload.properties||[])"editable"===e.name&&(kn(this,dn,"richtext"===e.value.value,"f"),kn(this,ln,!0,"f")),"focusable"===e.name&&kn(this,hn,e.value.value,"f"),"hidden"===e.name&&kn(this,fn,e.value.value,"f")}find(e){if(e(this))return this;for(const t of this.children){const i=t.find(e);if(i)return i}return null}isLeafNode(){if(!this.children.length)return!0;if(bn(this,cn,"m",yn).call(this)||bn(this,cn,"m",gn).call(this))return!0;switch(bn(this,wn,"f")){case"doc-cover":case"graphics-symbol":case"img":case"Meter":case"scrollbar":case"slider":case"separator":case"progressbar":return!0}return!bn(this,cn,"m",vn).call(this)&&(!(!bn(this,hn,"f")||!bn(this,un,"f"))||!("heading"!==bn(this,wn,"f")||!bn(this,un,"f")))}isControl(){switch(bn(this,wn,"f")){case"button":case"checkbox":case"ColorWell":case"combobox":case"DisclosureTriangle":case"listbox":case"menu":case"menubar":case"menuitem":case"menuitemcheckbox":case"menuitemradio":case"radio":case"scrollbar":case"searchbox":case"slider":case"spinbutton":case"switch":case"tab":case"textbox":case"tree":case"treeitem":return!0;default:return!1}}isInteresting(e){return"Ignored"!==bn(this,wn,"f")&&!bn(this,fn,"f")&&!bn(this,mn,"f")&&(!(!bn(this,hn,"f")&&!bn(this,dn,"f"))||(!!this.isControl()||!e&&(this.isLeafNode()&&!!bn(this,un,"f"))))}serialize(){const e=new Map;for(const t of this.payload.properties||[])e.set(t.name.toLowerCase(),t.value.value);this.payload.name&&e.set("name",this.payload.name.value),this.payload.value&&e.set("value",this.payload.value.value),this.payload.description&&e.set("description",this.payload.description.value);const t={role:bn(this,wn,"f")},i=["name","value","description","keyshortcuts","roledescription","valuetext"];for(const r of i)e.has(r)&&(t[r]=(s=r,e.get(s)));var s;const r=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"],n=t=>e.get(t);for(const e of r){if("focused"===e&&"RootWebArea"===bn(this,wn,"f"))continue;n(e)&&(t[e]=n(e))}const o=["checked","pressed"];for(const i of o){if(!e.has(i))continue;const s=e.get(i);t[i]="mixed"===s?"mixed":"true"===s}const a=["level","valuemax","valuemin"],c=t=>e.get(t);for(const i of a)e.has(i)&&(t[i]=c(i));const d=["autocomplete","haspopup","invalid","orientation"],l=t=>e.get(t);for(const e of d){const i=l(e);i&&"false"!==i&&(t[e]=l(e))}return t}static createTree(e){const t=new Map;for(const i of e)t.set(i.nodeId,new Cn(i));for(const e of t.values())for(const i of e.payload.childIds||[]){const s=t.get(i);s&&e.children.push(s)}return t.values().next().value}}dn=new WeakMap,ln=new WeakMap,hn=new WeakMap,fn=new WeakMap,un=new WeakMap,wn=new WeakMap,mn=new WeakMap,pn=new WeakMap,cn=new WeakSet,yn=function(){return!bn(this,dn,"f")&&(!!bn(this,ln,"f")||("textbox"===bn(this,wn,"f")||"searchbox"===bn(this,wn,"f")))},gn=function(){const e=bn(this,wn,"f");return"LineBreak"===e||"text"===e||"InlineTextBox"===e},vn=function e(){if(void 0===bn(this,pn,"f")){kn(this,pn,!1,"f");for(const t of this.children)if(bn(t,hn,"f")||bn(t,cn,"m",e).call(t)){kn(this,pn,!0,"f");break}}return bn(this,pn,"f")};var Mn,Pn,_n,Tn,xn=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},In=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Nn{constructor(e,t,i,s){Mn.set(this,void 0),Pn.set(this,void 0),_n.set(this,void 0),Tn.set(this,void 0),xn(this,Mn,e,"f"),xn(this,Pn,t,"f"),xn(this,_n,i,"f"),xn(this,Tn,s,"f")}type(){return In(this,Mn,"f")}text(){return In(this,Pn,"f")}args(){return In(this,_n,"f")}location(){var e;return null!==(e=In(this,Tn,"f")[0])&&void 0!==e?e:{}}stackTrace(){return In(this,Tn,"f")}}Mn=new WeakMap,Pn=new WeakMap,_n=new WeakMap,Tn=new WeakMap;var Sn,Fn,Wn,Rn,Dn,qn,jn,An,On,Kn,Ln,$n,Bn,Hn,Un,Vn,zn,Gn,Qn,Jn,Xn,Yn,Zn=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},eo=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class to{constructor(e){Sn.set(this,void 0),Fn.set(this,void 0),Zn(this,Sn,new io(e),"f"),Zn(this,Fn,new so(e),"f")}async startJSCoverage(e={}){return await eo(this,Sn,"f").start(e)}async stopJSCoverage(){return await eo(this,Sn,"f").stop()}async startCSSCoverage(e={}){return await eo(this,Fn,"f").start(e)}async stopCSSCoverage(){return await eo(this,Fn,"f").stop()}}Sn=new WeakMap,Fn=new WeakMap;class io{constructor(e){Wn.add(this),Rn.set(this,void 0),Dn.set(this,!1),qn.set(this,new Map),jn.set(this,new Map),An.set(this,[]),On.set(this,!1),Kn.set(this,!1),Ln.set(this,!1),Zn(this,Rn,e,"f")}async start(t={}){e(!eo(this,Dn,"f"),"JSCoverage is already enabled");const{resetOnNavigation:i=!0,reportAnonymousScripts:s=!1,includeRawScriptCoverage:r=!1,useBlockCoverage:n=!0}=t;Zn(this,On,i,"f"),Zn(this,Kn,s,"f"),Zn(this,Ln,r,"f"),Zn(this,Dn,!0,"f"),eo(this,qn,"f").clear(),eo(this,jn,"f").clear(),Zn(this,An,[Ar(eo(this,Rn,"f"),"Debugger.scriptParsed",eo(this,Wn,"m",Bn).bind(this)),Ar(eo(this,Rn,"f"),"Runtime.executionContextsCleared",eo(this,Wn,"m",$n).bind(this))],"f"),await Promise.all([eo(this,Rn,"f").send("Profiler.enable"),eo(this,Rn,"f").send("Profiler.startPreciseCoverage",{callCount:eo(this,Ln,"f"),detailed:n}),eo(this,Rn,"f").send("Debugger.enable"),eo(this,Rn,"f").send("Debugger.setSkipAllPauses",{skip:!0})])}async stop(){e(eo(this,Dn,"f"),"JSCoverage is not enabled"),Zn(this,Dn,!1,"f");const t=await Promise.all([eo(this,Rn,"f").send("Profiler.takePreciseCoverage"),eo(this,Rn,"f").send("Profiler.stopPreciseCoverage"),eo(this,Rn,"f").send("Profiler.disable"),eo(this,Rn,"f").send("Debugger.disable")]);Or(eo(this,An,"f"));const i=[],s=t[0];for(const e of s.result){let t=eo(this,qn,"f").get(e.scriptId);!t&&eo(this,Kn,"f")&&(t="debugger://VM"+e.scriptId);const s=eo(this,jn,"f").get(e.scriptId);if(void 0===s||void 0===t)continue;const r=[];for(const t of e.functions)r.push(...t.ranges);const n=ro(r);eo(this,Ln,"f")?i.push({url:t,ranges:n,text:s,rawScriptCoverage:e}):i.push({url:t,ranges:n,text:s})}return i}}Rn=new WeakMap,Dn=new WeakMap,qn=new WeakMap,jn=new WeakMap,An=new WeakMap,On=new WeakMap,Kn=new WeakMap,Ln=new WeakMap,Wn=new WeakSet,$n=function(){eo(this,On,"f")&&(eo(this,qn,"f").clear(),eo(this,jn,"f").clear())},Bn=async function(e){if("pptr://__puppeteer_evaluation_script__"!==e.url&&(e.url||eo(this,Kn,"f")))try{const t=await eo(this,Rn,"f").send("Debugger.getScriptSource",{scriptId:e.scriptId});eo(this,qn,"f").set(e.scriptId,e.url),eo(this,jn,"f").set(e.scriptId,t.scriptSource)}catch(e){Rr(e)}};class so{constructor(e){Hn.add(this),Un.set(this,void 0),Vn.set(this,!1),zn.set(this,new Map),Gn.set(this,new Map),Qn.set(this,[]),Jn.set(this,!1),Zn(this,Un,e,"f")}async start(t={}){e(!eo(this,Vn,"f"),"CSSCoverage is already enabled");const{resetOnNavigation:i=!0}=t;Zn(this,Jn,i,"f"),Zn(this,Vn,!0,"f"),eo(this,zn,"f").clear(),eo(this,Gn,"f").clear(),Zn(this,Qn,[Ar(eo(this,Un,"f"),"CSS.styleSheetAdded",eo(this,Hn,"m",Yn).bind(this)),Ar(eo(this,Un,"f"),"Runtime.executionContextsCleared",eo(this,Hn,"m",Xn).bind(this))],"f"),await Promise.all([eo(this,Un,"f").send("DOM.enable"),eo(this,Un,"f").send("CSS.enable"),eo(this,Un,"f").send("CSS.startRuleUsageTracking")])}async stop(){e(eo(this,Vn,"f"),"CSSCoverage is not enabled"),Zn(this,Vn,!1,"f");const t=await eo(this,Un,"f").send("CSS.stopRuleUsageTracking");await Promise.all([eo(this,Un,"f").send("CSS.disable"),eo(this,Un,"f").send("DOM.disable")]),Or(eo(this,Qn,"f"));const i=new Map;for(const e of t.ruleUsage){let t=i.get(e.styleSheetId);t||(t=[],i.set(e.styleSheetId,t)),t.push({startOffset:e.startOffset,endOffset:e.endOffset,count:e.used?1:0})}const s=[];for(const t of eo(this,zn,"f").keys()){const r=eo(this,zn,"f").get(t);e(void 0!==r,`Stylesheet URL is undefined (styleSheetId=${t})`);const n=eo(this,Gn,"f").get(t);e(void 0!==n,`Stylesheet text is undefined (styleSheetId=${t})`);const o=ro(i.get(t)||[]);s.push({url:r,ranges:o,text:n})}return s}}function ro(e){const t=[];for(const i of e)t.push({offset:i.startOffset,type:0,range:i}),t.push({offset:i.endOffset,type:1,range:i});t.sort(((e,t)=>{if(e.offset!==t.offset)return e.offset-t.offset;if(e.type!==t.type)return t.type-e.type;const i=e.range.endOffset-e.range.startOffset,s=t.range.endOffset-t.range.startOffset;return 0===e.type?s-i:i-s}));const i=[],s=[];let r=0;for(const e of t){if(i.length&&r<e.offset&&i[i.length-1]>0){const t=s[s.length-1];t&&t.end===r?t.end=e.offset:s.push({start:r,end:e.offset})}r=e.offset,0===e.type?i.push(e.range.count):i.pop()}return s.filter((e=>e.end-e.start>0))}Un=new WeakMap,Vn=new WeakMap,zn=new WeakMap,Gn=new WeakMap,Qn=new WeakMap,Jn=new WeakMap,Hn=new WeakSet,Xn=function(){eo(this,Jn,"f")&&(eo(this,zn,"f").clear(),eo(this,Gn,"f").clear())},Yn=async function(e){const t=e.header;if(t.sourceURL)try{const e=await eo(this,Un,"f").send("CSS.getStyleSheetText",{styleSheetId:t.styleSheetId});eo(this,zn,"f").set(t.styleSheetId,t.sourceURL),eo(this,Gn,"f").set(t.styleSheetId,e.text)}catch(e){Rr(e)}};var no,oo,ao,co,lo,ho=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},fo=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class uo{constructor(e,t,i,s=""){no.set(this,void 0),oo.set(this,void 0),ao.set(this,void 0),co.set(this,void 0),lo.set(this,!1),ho(this,no,e,"f"),ho(this,oo,t,"f"),ho(this,ao,i,"f"),ho(this,co,s,"f")}type(){return fo(this,oo,"f")}message(){return fo(this,ao,"f")}defaultValue(){return fo(this,co,"f")}async accept(t){e(!fo(this,lo,"f"),"Cannot accept dialog which is already handled!"),ho(this,lo,!0,"f"),await fo(this,no,"f").send("Page.handleJavaScriptDialog",{accept:!0,promptText:t})}async dismiss(){e(!fo(this,lo,"f"),"Cannot dismiss dialog which is already handled!"),ho(this,lo,!0,"f"),await fo(this,no,"f").send("Page.handleJavaScriptDialog",{accept:!1})}}no=new WeakMap,oo=new WeakMap,ao=new WeakMap,co=new WeakMap,lo=new WeakMap;var wo,mo,po,yo=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},go=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class vo{constructor(e){wo.set(this,void 0),mo.set(this,!1),po.set(this,!1),yo(this,wo,e,"f")}async emulateViewport(e){const t=e.isMobile||!1,i=e.width,s=e.height,r=e.deviceScaleFactor||1,n=e.isLandscape?{angle:90,type:"landscapePrimary"}:{angle:0,type:"portraitPrimary"},o=e.hasTouch||!1;await Promise.all([go(this,wo,"f").send("Emulation.setDeviceMetricsOverride",{mobile:t,width:i,height:s,deviceScaleFactor:r,screenOrientation:n}),go(this,wo,"f").send("Emulation.setTouchEmulationEnabled",{enabled:o})]);const a=go(this,mo,"f")!==t||go(this,po,"f")!==o;return yo(this,mo,t,"f"),yo(this,po,o,"f"),a}}wo=new WeakMap,mo=new WeakMap,po=new WeakMap;var ko,bo,Eo,Co=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},Mo=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Po{constructor(e,t){ko.set(this,void 0),bo.set(this,void 0),Eo.set(this,!1),Co(this,ko,e,"f"),Co(this,bo,"selectSingle"!==t.mode,"f")}isMultiple(){return Mo(this,bo,"f")}async accept(t){e(!Mo(this,Eo,"f"),"Cannot accept FileChooser which is already handled!"),Co(this,Eo,!0,"f"),await Mo(this,ko,"f").uploadFile(...t)}cancel(){e(!Mo(this,Eo,"f"),"Cannot cancel FileChooser which is already handled!"),Co(this,Eo,!0,"f")}}ko=new WeakMap,bo=new WeakMap,Eo=new WeakMap;const _o={0:{keyCode:48,key:"0",code:"Digit0"},1:{keyCode:49,key:"1",code:"Digit1"},2:{keyCode:50,key:"2",code:"Digit2"},3:{keyCode:51,key:"3",code:"Digit3"},4:{keyCode:52,key:"4",code:"Digit4"},5:{keyCode:53,key:"5",code:"Digit5"},6:{keyCode:54,key:"6",code:"Digit6"},7:{keyCode:55,key:"7",code:"Digit7"},8:{keyCode:56,key:"8",code:"Digit8"},9:{keyCode:57,key:"9",code:"Digit9"},Power:{key:"Power",code:"Power"},Eject:{key:"Eject",code:"Eject"},Abort:{keyCode:3,code:"Abort",key:"Cancel"},Help:{keyCode:6,code:"Help",key:"Help"},Backspace:{keyCode:8,code:"Backspace",key:"Backspace"},Tab:{keyCode:9,code:"Tab",key:"Tab"},Numpad5:{keyCode:12,shiftKeyCode:101,key:"Clear",code:"Numpad5",shiftKey:"5",location:3},NumpadEnter:{keyCode:13,code:"NumpadEnter",key:"Enter",text:"\r",location:3},Enter:{keyCode:13,code:"Enter",key:"Enter",text:"\r"},"\r":{keyCode:13,code:"Enter",key:"Enter",text:"\r"},"\n":{keyCode:13,code:"Enter",key:"Enter",text:"\r"},ShiftLeft:{keyCode:16,code:"ShiftLeft",key:"Shift",location:1},ShiftRight:{keyCode:16,code:"ShiftRight",key:"Shift",location:2},ControlLeft:{keyCode:17,code:"ControlLeft",key:"Control",location:1},ControlRight:{keyCode:17,code:"ControlRight",key:"Control",location:2},AltLeft:{keyCode:18,code:"AltLeft",key:"Alt",location:1},AltRight:{keyCode:18,code:"AltRight",key:"Alt",location:2},Pause:{keyCode:19,code:"Pause",key:"Pause"},CapsLock:{keyCode:20,code:"CapsLock",key:"CapsLock"},Escape:{keyCode:27,code:"Escape",key:"Escape"},Convert:{keyCode:28,code:"Convert",key:"Convert"},NonConvert:{keyCode:29,code:"NonConvert",key:"NonConvert"},Space:{keyCode:32,code:"Space",key:" "},Numpad9:{keyCode:33,shiftKeyCode:105,key:"PageUp",code:"Numpad9",shiftKey:"9",location:3},PageUp:{keyCode:33,code:"PageUp",key:"PageUp"},Numpad3:{keyCode:34,shiftKeyCode:99,key:"PageDown",code:"Numpad3",shiftKey:"3",location:3},PageDown:{keyCode:34,code:"PageDown",key:"PageDown"},End:{keyCode:35,code:"End",key:"End"},Numpad1:{keyCode:35,shiftKeyCode:97,key:"End",code:"Numpad1",shiftKey:"1",location:3},Home:{keyCode:36,code:"Home",key:"Home"},Numpad7:{keyCode:36,shiftKeyCode:103,key:"Home",code:"Numpad7",shiftKey:"7",location:3},ArrowLeft:{keyCode:37,code:"ArrowLeft",key:"ArrowLeft"},Numpad4:{keyCode:37,shiftKeyCode:100,key:"ArrowLeft",code:"Numpad4",shiftKey:"4",location:3},Numpad8:{keyCode:38,shiftKeyCode:104,key:"ArrowUp",code:"Numpad8",shiftKey:"8",location:3},ArrowUp:{keyCode:38,code:"ArrowUp",key:"ArrowUp"},ArrowRight:{keyCode:39,code:"ArrowRight",key:"ArrowRight"},Numpad6:{keyCode:39,shiftKeyCode:102,key:"ArrowRight",code:"Numpad6",shiftKey:"6",location:3},Numpad2:{keyCode:40,shiftKeyCode:98,key:"ArrowDown",code:"Numpad2",shiftKey:"2",location:3},ArrowDown:{keyCode:40,code:"ArrowDown",key:"ArrowDown"},Select:{keyCode:41,code:"Select",key:"Select"},Open:{keyCode:43,code:"Open",key:"Execute"},PrintScreen:{keyCode:44,code:"PrintScreen",key:"PrintScreen"},Insert:{keyCode:45,code:"Insert",key:"Insert"},Numpad0:{keyCode:45,shiftKeyCode:96,key:"Insert",code:"Numpad0",shiftKey:"0",location:3},Delete:{keyCode:46,code:"Delete",key:"Delete"},NumpadDecimal:{keyCode:46,shiftKeyCode:110,code:"NumpadDecimal",key:"\0",shiftKey:".",location:3},Digit0:{keyCode:48,code:"Digit0",shiftKey:")",key:"0"},Digit1:{keyCode:49,code:"Digit1",shiftKey:"!",key:"1"},Digit2:{keyCode:50,code:"Digit2",shiftKey:"@",key:"2"},Digit3:{keyCode:51,code:"Digit3",shiftKey:"#",key:"3"},Digit4:{keyCode:52,code:"Digit4",shiftKey:"$",key:"4"},Digit5:{keyCode:53,code:"Digit5",shiftKey:"%",key:"5"},Digit6:{keyCode:54,code:"Digit6",shiftKey:"^",key:"6"},Digit7:{keyCode:55,code:"Digit7",shiftKey:"&",key:"7"},Digit8:{keyCode:56,code:"Digit8",shiftKey:"*",key:"8"},Digit9:{keyCode:57,code:"Digit9",shiftKey:"(",key:"9"},KeyA:{keyCode:65,code:"KeyA",shiftKey:"A",key:"a"},KeyB:{keyCode:66,code:"KeyB",shiftKey:"B",key:"b"},KeyC:{keyCode:67,code:"KeyC",shiftKey:"C",key:"c"},KeyD:{keyCode:68,code:"KeyD",shiftKey:"D",key:"d"},KeyE:{keyCode:69,code:"KeyE",shiftKey:"E",key:"e"},KeyF:{keyCode:70,code:"KeyF",shiftKey:"F",key:"f"},KeyG:{keyCode:71,code:"KeyG",shiftKey:"G",key:"g"},KeyH:{keyCode:72,code:"KeyH",shiftKey:"H",key:"h"},KeyI:{keyCode:73,code:"KeyI",shiftKey:"I",key:"i"},KeyJ:{keyCode:74,code:"KeyJ",shiftKey:"J",key:"j"},KeyK:{keyCode:75,code:"KeyK",shiftKey:"K",key:"k"},KeyL:{keyCode:76,code:"KeyL",shiftKey:"L",key:"l"},KeyM:{keyCode:77,code:"KeyM",shiftKey:"M",key:"m"},KeyN:{keyCode:78,code:"KeyN",shiftKey:"N",key:"n"},KeyO:{keyCode:79,code:"KeyO",shiftKey:"O",key:"o"},KeyP:{keyCode:80,code:"KeyP",shiftKey:"P",key:"p"},KeyQ:{keyCode:81,code:"KeyQ",shiftKey:"Q",key:"q"},KeyR:{keyCode:82,code:"KeyR",shiftKey:"R",key:"r"},KeyS:{keyCode:83,code:"KeyS",shiftKey:"S",key:"s"},KeyT:{keyCode:84,code:"KeyT",shiftKey:"T",key:"t"},KeyU:{keyCode:85,code:"KeyU",shiftKey:"U",key:"u"},KeyV:{keyCode:86,code:"KeyV",shiftKey:"V",key:"v"},KeyW:{keyCode:87,code:"KeyW",shiftKey:"W",key:"w"},KeyX:{keyCode:88,code:"KeyX",shiftKey:"X",key:"x"},KeyY:{keyCode:89,code:"KeyY",shiftKey:"Y",key:"y"},KeyZ:{keyCode:90,code:"KeyZ",shiftKey:"Z",key:"z"},MetaLeft:{keyCode:91,code:"MetaLeft",key:"Meta",location:1},MetaRight:{keyCode:92,code:"MetaRight",key:"Meta",location:2},ContextMenu:{keyCode:93,code:"ContextMenu",key:"ContextMenu"},NumpadMultiply:{keyCode:106,code:"NumpadMultiply",key:"*",location:3},NumpadAdd:{keyCode:107,code:"NumpadAdd",key:"+",location:3},NumpadSubtract:{keyCode:109,code:"NumpadSubtract",key:"-",location:3},NumpadDivide:{keyCode:111,code:"NumpadDivide",key:"/",location:3},F1:{keyCode:112,code:"F1",key:"F1"},F2:{keyCode:113,code:"F2",key:"F2"},F3:{keyCode:114,code:"F3",key:"F3"},F4:{keyCode:115,code:"F4",key:"F4"},F5:{keyCode:116,code:"F5",key:"F5"},F6:{keyCode:117,code:"F6",key:"F6"},F7:{keyCode:118,code:"F7",key:"F7"},F8:{keyCode:119,code:"F8",key:"F8"},F9:{keyCode:120,code:"F9",key:"F9"},F10:{keyCode:121,code:"F10",key:"F10"},F11:{keyCode:122,code:"F11",key:"F11"},F12:{keyCode:123,code:"F12",key:"F12"},F13:{keyCode:124,code:"F13",key:"F13"},F14:{keyCode:125,code:"F14",key:"F14"},F15:{keyCode:126,code:"F15",key:"F15"},F16:{keyCode:127,code:"F16",key:"F16"},F17:{keyCode:128,code:"F17",key:"F17"},F18:{keyCode:129,code:"F18",key:"F18"},F19:{keyCode:130,code:"F19",key:"F19"},F20:{keyCode:131,code:"F20",key:"F20"},F21:{keyCode:132,code:"F21",key:"F21"},F22:{keyCode:133,code:"F22",key:"F22"},F23:{keyCode:134,code:"F23",key:"F23"},F24:{keyCode:135,code:"F24",key:"F24"},NumLock:{keyCode:144,code:"NumLock",key:"NumLock"},ScrollLock:{keyCode:145,code:"ScrollLock",key:"ScrollLock"},AudioVolumeMute:{keyCode:173,code:"AudioVolumeMute",key:"AudioVolumeMute"},AudioVolumeDown:{keyCode:174,code:"AudioVolumeDown",key:"AudioVolumeDown"},AudioVolumeUp:{keyCode:175,code:"AudioVolumeUp",key:"AudioVolumeUp"},MediaTrackNext:{keyCode:176,code:"MediaTrackNext",key:"MediaTrackNext"},MediaTrackPrevious:{keyCode:177,code:"MediaTrackPrevious",key:"MediaTrackPrevious"},MediaStop:{keyCode:178,code:"MediaStop",key:"MediaStop"},MediaPlayPause:{keyCode:179,code:"MediaPlayPause",key:"MediaPlayPause"},Semicolon:{keyCode:186,code:"Semicolon",shiftKey:":",key:";"},Equal:{keyCode:187,code:"Equal",shiftKey:"+",key:"="},NumpadEqual:{keyCode:187,code:"NumpadEqual",key:"=",location:3},Comma:{keyCode:188,code:"Comma",shiftKey:"<",key:","},Minus:{keyCode:189,code:"Minus",shiftKey:"_",key:"-"},Period:{keyCode:190,code:"Period",shiftKey:">",key:"."},Slash:{keyCode:191,code:"Slash",shiftKey:"?",key:"/"},Backquote:{keyCode:192,code:"Backquote",shiftKey:"~",key:"`"},BracketLeft:{keyCode:219,code:"BracketLeft",shiftKey:"{",key:"["},Backslash:{keyCode:220,code:"Backslash",shiftKey:"|",key:"\\"},BracketRight:{keyCode:221,code:"BracketRight",shiftKey:"}",key:"]"},Quote:{keyCode:222,code:"Quote",shiftKey:'"',key:"'"},AltGraph:{keyCode:225,code:"AltGraph",key:"AltGraph"},Props:{keyCode:247,code:"Props",key:"CrSel"},Cancel:{keyCode:3,key:"Cancel",code:"Abort"},Clear:{keyCode:12,key:"Clear",code:"Numpad5",location:3},Shift:{keyCode:16,key:"Shift",code:"ShiftLeft",location:1},Control:{keyCode:17,key:"Control",code:"ControlLeft",location:1},Alt:{keyCode:18,key:"Alt",code:"AltLeft",location:1},Accept:{keyCode:30,key:"Accept"},ModeChange:{keyCode:31,key:"ModeChange"}," ":{keyCode:32,key:" ",code:"Space"},Print:{keyCode:42,key:"Print"},Execute:{keyCode:43,key:"Execute",code:"Open"},"\0":{keyCode:46,key:"\0",code:"NumpadDecimal",location:3},a:{keyCode:65,key:"a",code:"KeyA"},b:{keyCode:66,key:"b",code:"KeyB"},c:{keyCode:67,key:"c",code:"KeyC"},d:{keyCode:68,key:"d",code:"KeyD"},e:{keyCode:69,key:"e",code:"KeyE"},f:{keyCode:70,key:"f",code:"KeyF"},g:{keyCode:71,key:"g",code:"KeyG"},h:{keyCode:72,key:"h",code:"KeyH"},i:{keyCode:73,key:"i",code:"KeyI"},j:{keyCode:74,key:"j",code:"KeyJ"},k:{keyCode:75,key:"k",code:"KeyK"},l:{keyCode:76,key:"l",code:"KeyL"},m:{keyCode:77,key:"m",code:"KeyM"},n:{keyCode:78,key:"n",code:"KeyN"},o:{keyCode:79,key:"o",code:"KeyO"},p:{keyCode:80,key:"p",code:"KeyP"},q:{keyCode:81,key:"q",code:"KeyQ"},r:{keyCode:82,key:"r",code:"KeyR"},s:{keyCode:83,key:"s",code:"KeyS"},t:{keyCode:84,key:"t",code:"KeyT"},u:{keyCode:85,key:"u",code:"KeyU"},v:{keyCode:86,key:"v",code:"KeyV"},w:{keyCode:87,key:"w",code:"KeyW"},x:{keyCode:88,key:"x",code:"KeyX"},y:{keyCode:89,key:"y",code:"KeyY"},z:{keyCode:90,key:"z",code:"KeyZ"},Meta:{keyCode:91,key:"Meta",code:"MetaLeft",location:1},"*":{keyCode:106,key:"*",code:"NumpadMultiply",location:3},"+":{keyCode:107,key:"+",code:"NumpadAdd",location:3},"-":{keyCode:109,key:"-",code:"NumpadSubtract",location:3},"/":{keyCode:111,key:"/",code:"NumpadDivide",location:3},";":{keyCode:186,key:";",code:"Semicolon"},"=":{keyCode:187,key:"=",code:"Equal"},",":{keyCode:188,key:",",code:"Comma"},".":{keyCode:190,key:".",code:"Period"},"`":{keyCode:192,key:"`",code:"Backquote"},"[":{keyCode:219,key:"[",code:"BracketLeft"},"\\":{keyCode:220,key:"\\",code:"Backslash"},"]":{keyCode:221,key:"]",code:"BracketRight"},"'":{keyCode:222,key:"'",code:"Quote"},Attn:{keyCode:246,key:"Attn"},CrSel:{keyCode:247,key:"CrSel",code:"Props"},ExSel:{keyCode:248,key:"ExSel"},EraseEof:{keyCode:249,key:"EraseEof"},Play:{keyCode:250,key:"Play"},ZoomOut:{keyCode:251,key:"ZoomOut"},")":{keyCode:48,key:")",code:"Digit0"},"!":{keyCode:49,key:"!",code:"Digit1"},"@":{keyCode:50,key:"@",code:"Digit2"},"#":{keyCode:51,key:"#",code:"Digit3"},$:{keyCode:52,key:"$",code:"Digit4"},"%":{keyCode:53,key:"%",code:"Digit5"},"^":{keyCode:54,key:"^",code:"Digit6"},"&":{keyCode:55,key:"&",code:"Digit7"},"(":{keyCode:57,key:"(",code:"Digit9"},A:{keyCode:65,key:"A",code:"KeyA"},B:{keyCode:66,key:"B",code:"KeyB"},C:{keyCode:67,key:"C",code:"KeyC"},D:{keyCode:68,key:"D",code:"KeyD"},E:{keyCode:69,key:"E",code:"KeyE"},F:{keyCode:70,key:"F",code:"KeyF"},G:{keyCode:71,key:"G",code:"KeyG"},H:{keyCode:72,key:"H",code:"KeyH"},I:{keyCode:73,key:"I",code:"KeyI"},J:{keyCode:74,key:"J",code:"KeyJ"},K:{keyCode:75,key:"K",code:"KeyK"},L:{keyCode:76,key:"L",code:"KeyL"},M:{keyCode:77,key:"M",code:"KeyM"},N:{keyCode:78,key:"N",code:"KeyN"},O:{keyCode:79,key:"O",code:"KeyO"},P:{keyCode:80,key:"P",code:"KeyP"},Q:{keyCode:81,key:"Q",code:"KeyQ"},R:{keyCode:82,key:"R",code:"KeyR"},S:{keyCode:83,key:"S",code:"KeyS"},T:{keyCode:84,key:"T",code:"KeyT"},U:{keyCode:85,key:"U",code:"KeyU"},V:{keyCode:86,key:"V",code:"KeyV"},W:{keyCode:87,key:"W",code:"KeyW"},X:{keyCode:88,key:"X",code:"KeyX"},Y:{keyCode:89,key:"Y",code:"KeyY"},Z:{keyCode:90,key:"Z",code:"KeyZ"},":":{keyCode:186,key:":",code:"Semicolon"},"<":{keyCode:188,key:"<",code:"Comma"},_:{keyCode:189,key:"_",code:"Minus"},">":{keyCode:190,key:">",code:"Period"},"?":{keyCode:191,key:"?",code:"Slash"},"~":{keyCode:192,key:"~",code:"Backquote"},"{":{keyCode:219,key:"{",code:"BracketLeft"},"|":{keyCode:220,key:"|",code:"Backslash"},"}":{keyCode:221,key:"}",code:"BracketRight"},'"':{keyCode:222,key:'"',code:"Quote"},SoftLeft:{key:"SoftLeft",code:"SoftLeft",location:4},SoftRight:{key:"SoftRight",code:"SoftRight",location:4},Camera:{keyCode:44,key:"Camera",code:"Camera",location:4},Call:{key:"Call",code:"Call",location:4},EndCall:{keyCode:95,key:"EndCall",code:"EndCall",location:4},VolumeDown:{keyCode:182,key:"VolumeDown",code:"VolumeDown",location:4},VolumeUp:{keyCode:183,key:"VolumeUp",code:"VolumeUp",location:4}};var To,xo,Io,No,So,Fo,Wo,Ro,Do,qo,jo,Ao,Oo=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},Ko=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Lo{constructor(e){To.add(this),xo.set(this,void 0),Io.set(this,new Set),this._modifiers=0,Oo(this,xo,e,"f")}async down(e,t={text:void 0,commands:[]}){const i=Ko(this,To,"m",So).call(this,e),s=Ko(this,Io,"f").has(i.code);Ko(this,Io,"f").add(i.code),this._modifiers|=Ko(this,To,"m",No).call(this,i.key);const r=void 0===t.text?i.text:t.text;await Ko(this,xo,"f").send("Input.dispatchKeyEvent",{type:r?"keyDown":"rawKeyDown",modifiers:this._modifiers,windowsVirtualKeyCode:i.keyCode,code:i.code,key:i.key,text:r,unmodifiedText:r,autoRepeat:s,location:i.location,isKeypad:3===i.location,commands:t.commands})}async up(e){const t=Ko(this,To,"m",So).call(this,e);this._modifiers&=~Ko(this,To,"m",No).call(this,t.key),Ko(this,Io,"f").delete(t.code),await Ko(this,xo,"f").send("Input.dispatchKeyEvent",{type:"keyUp",modifiers:this._modifiers,key:t.key,windowsVirtualKeyCode:t.keyCode,code:t.code,location:t.location})}async sendCharacter(e){await Ko(this,xo,"f").send("Input.insertText",{text:e})}charIsKey(e){return!!_o[e]}async type(e,t={}){const i=t.delay||void 0;for(const t of e)this.charIsKey(t)?await this.press(t,{delay:i}):(i&&await new Promise((e=>setTimeout(e,i))),await this.sendCharacter(t))}async press(e,t={}){const{delay:i=null}=t;await this.down(e,t),i&&await new Promise((e=>setTimeout(e,t.delay))),await this.up(e)}}xo=new WeakMap,Io=new WeakMap,To=new WeakSet,No=function(e){return"Alt"===e?1:"Control"===e?2:"Meta"===e?4:"Shift"===e?8:0},So=function(t){const i=8&this._modifiers,s={key:"",keyCode:0,code:"",text:"",location:0},r=_o[t];return e(r,`Unknown key: "${t}"`),r.key&&(s.key=r.key),i&&r.shiftKey&&(s.key=r.shiftKey),r.keyCode&&(s.keyCode=r.keyCode),i&&r.shiftKeyCode&&(s.keyCode=r.shiftKeyCode),r.code&&(s.code=r.code),r.location&&(s.location=r.location),1===s.key.length&&(s.text=s.key),r.text&&(s.text=r.text),i&&r.shiftText&&(s.text=r.shiftText),-9&this._modifiers&&(s.text=""),s};class $o{constructor(e,t){Fo.set(this,void 0),Wo.set(this,void 0),Ro.set(this,0),Do.set(this,0),qo.set(this,"none"),Oo(this,Fo,e,"f"),Oo(this,Wo,t,"f")}async move(e,t,i={}){const{steps:s=1}=i,r=Ko(this,Ro,"f"),n=Ko(this,Do,"f");Oo(this,Ro,e,"f"),Oo(this,Do,t,"f");for(let e=1;e<=s;e++)await Ko(this,Fo,"f").send("Input.dispatchMouseEvent",{type:"mouseMoved",button:Ko(this,qo,"f"),x:r+(Ko(this,Ro,"f")-r)*(e/s),y:n+(Ko(this,Do,"f")-n)*(e/s),modifiers:Ko(this,Wo,"f")._modifiers})}async click(e,t,i={}){const{delay:s=null}=i;null!==s?(await this.move(e,t),await this.down(i),await new Promise((e=>setTimeout(e,s))),await this.up(i)):(await this.move(e,t),await this.down(i),await this.up(i))}async down(e={}){const{button:t="left",clickCount:i=1}=e;Oo(this,qo,t,"f"),await Ko(this,Fo,"f").send("Input.dispatchMouseEvent",{type:"mousePressed",button:t,x:Ko(this,Ro,"f"),y:Ko(this,Do,"f"),modifiers:Ko(this,Wo,"f")._modifiers,clickCount:i})}async up(e={}){const{button:t="left",clickCount:i=1}=e;Oo(this,qo,"none","f"),await Ko(this,Fo,"f").send("Input.dispatchMouseEvent",{type:"mouseReleased",button:t,x:Ko(this,Ro,"f"),y:Ko(this,Do,"f"),modifiers:Ko(this,Wo,"f")._modifiers,clickCount:i})}async wheel(e={}){const{deltaX:t=0,deltaY:i=0}=e;await Ko(this,Fo,"f").send("Input.dispatchMouseEvent",{type:"mouseWheel",x:Ko(this,Ro,"f"),y:Ko(this,Do,"f"),deltaX:t,deltaY:i,modifiers:Ko(this,Wo,"f")._modifiers,pointerType:"mouse"})}async drag(e,t){const i=new Promise((e=>{Ko(this,Fo,"f").once("Input.dragIntercepted",(t=>e(t.data)))}));return await this.move(e.x,e.y),await this.down(),await this.move(t.x,t.y),i}async dragEnter(e,t){await Ko(this,Fo,"f").send("Input.dispatchDragEvent",{type:"dragEnter",x:e.x,y:e.y,modifiers:Ko(this,Wo,"f")._modifiers,data:t})}async dragOver(e,t){await Ko(this,Fo,"f").send("Input.dispatchDragEvent",{type:"dragOver",x:e.x,y:e.y,modifiers:Ko(this,Wo,"f")._modifiers,data:t})}async drop(e,t){await Ko(this,Fo,"f").send("Input.dispatchDragEvent",{type:"drop",x:e.x,y:e.y,modifiers:Ko(this,Wo,"f")._modifiers,data:t})}async dragAndDrop(e,t,i={}){const{delay:s=null}=i,r=await this.drag(e,t);await this.dragEnter(t,r),await this.dragOver(t,r),s&&await new Promise((e=>setTimeout(e,s))),await this.drop(t,r),await this.up()}}Fo=new WeakMap,Wo=new WeakMap,Ro=new WeakMap,Do=new WeakMap,qo=new WeakMap;class Bo{constructor(e,t){jo.set(this,void 0),Ao.set(this,void 0),Oo(this,jo,e,"f"),Oo(this,Ao,t,"f")}async tap(e,t){await this.touchStart(e,t),await this.touchEnd()}async touchStart(e,t){const i=[{x:Math.round(e),y:Math.round(t)}];await Ko(this,jo,"f").send("Input.dispatchTouchEvent",{type:"touchStart",touchPoints:i,modifiers:Ko(this,Ao,"f")._modifiers})}async touchMove(e,t){const i=[{x:Math.round(e),y:Math.round(t)}];await Ko(this,jo,"f").send("Input.dispatchTouchEvent",{type:"touchMove",touchPoints:i,modifiers:Ko(this,Ao,"f")._modifiers})}async touchEnd(){await Ko(this,jo,"f").send("Input.dispatchTouchEvent",{type:"touchEnd",touchPoints:[],modifiers:Ko(this,Ao,"f")._modifiers})}}jo=new WeakMap,Ao=new WeakMap;const Ho={letter:{width:8.5,height:11},legal:{width:8.5,height:14},tabloid:{width:11,height:17},ledger:{width:17,height:11},a0:{width:33.1,height:46.8},a1:{width:23.4,height:33.1},a2:{width:16.54,height:23.4},a3:{width:11.7,height:16.54},a4:{width:8.27,height:11.7},a5:{width:5.83,height:8.27},a6:{width:4.13,height:5.83}};var Uo,Vo,zo=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},Go=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Qo{constructor(){Uo.set(this,void 0),Vo.set(this,void 0),zo(this,Uo,null,"f"),zo(this,Vo,null,"f")}setDefaultTimeout(e){zo(this,Uo,e,"f")}setDefaultNavigationTimeout(e){zo(this,Vo,e,"f")}navigationTimeout(){return null!==Go(this,Vo,"f")?Go(this,Vo,"f"):null!==Go(this,Uo,"f")?Go(this,Uo,"f"):3e4}timeout(){return null!==Go(this,Uo,"f")?Go(this,Uo,"f"):3e4}}Uo=new WeakMap,Vo=new WeakMap;var Jo,Xo,Yo,Zo=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},ea=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class ta{constructor(e){Jo.set(this,void 0),Xo.set(this,!1),Yo.set(this,void 0),Zo(this,Jo,e,"f")}async start(t={}){e(!ea(this,Xo,"f"),"Cannot start recording trace while already recording trace.");const i=["-*","devtools.timeline","v8.execute","disabled-by-default-devtools.timeline","disabled-by-default-devtools.timeline.frame","toplevel","blink.console","blink.user_timing","latencyInfo","disabled-by-default-devtools.timeline.stack","disabled-by-default-v8.cpu_profiler"],{path:s,screenshots:r=!1,categories:n=i}=t;r&&n.push("disabled-by-default-devtools.screenshot");const o=n.filter((e=>e.startsWith("-"))).map((e=>e.slice(1))),a=n.filter((e=>!e.startsWith("-")));Zo(this,Yo,s,"f"),Zo(this,Xo,!0,"f"),await ea(this,Jo,"f").send("Tracing.start",{transferMode:"ReturnAsStream",traceConfig:{excludedCategories:o,includedCategories:a}})}async stop(){let e,t;const i=new Promise(((i,s)=>{e=i,t=s}));return ea(this,Jo,"f").once("Tracing.tracingComplete",(async i=>{try{const t=await Qr(ea(this,Jo,"f"),i.stream),s=await Gr(t,ea(this,Yo,"f"));e(null!=s?s:void 0)}catch(e){L(e)?t(e):t(new Error(`Unknown error: ${e}`))}})),await ea(this,Jo,"f").send("Tracing.end"),Zo(this,Xo,!1,"f"),i}}Jo=new WeakMap,Xo=new WeakMap,Yo=new WeakMap;var ia,sa,ra,na,oa,aa,ca,da,la,ha,fa,ua,wa,ma,pa,ya,ga,va,ka,ba,Ea,Ca,Ma,Pa,_a,Ta,xa,Ia,Na,Sa,Fa,Wa,Ra,Da,qa,ja,Aa,Oa,Ka,La=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)},$a=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i};class Ba extends on{static async _create(e,t,i,s,r){const n=new Ba(e,t,i,r);if(await La(n,ia,"m",Pa).call(n),s)try{await n.setViewport(s)}catch(e){if(!L(e)||!K(e))throw e;Rr(e)}return n}constructor(t,i,s,r){super(),ia.add(this),sa.set(this,!1),ra.set(this,void 0),na.set(this,void 0),oa.set(this,void 0),aa.set(this,void 0),ca.set(this,new Qo),da.set(this,void 0),la.set(this,void 0),ha.set(this,void 0),fa.set(this,void 0),ua.set(this,void 0),wa.set(this,new Map),ma.set(this,void 0),pa.set(this,!0),ya.set(this,void 0),ga.set(this,void 0),va.set(this,new Map),ka.set(this,new Set),ba.set(this,void 0),Ea.set(this,!1),Ca.set(this,(e=>{var t;const i=null===(t=e._session())||void 0===t?void 0:t.id(),s=La(this,va,"f").get(i);s&&(La(this,va,"f").delete(i),this.emit("workerdestroyed",s))})),Ma.set(this,(t=>{if(La(this,ha,"f").onAttachedToTarget(t),"worker"===t._getTargetInfo().type){const i=t._session();e(i);const s=new sn(i,t.url(),La(this,ia,"m",Ra).bind(this),La(this,ia,"m",Sa).bind(this));La(this,va,"f").set(i.id(),s),this.emit("workercreated",s)}t._session()&&La(this,na,"f")._targetManager().addTargetInterceptor(t._session(),La(this,Ma,"f"))})),$a(this,ra,t,"f"),$a(this,na,i,"f"),$a(this,oa,new Lo(t),"f"),$a(this,aa,new $o(t,La(this,oa,"f")),"f"),$a(this,da,new Bo(t,La(this,oa,"f")),"f"),$a(this,la,new En(t),"f"),$a(this,ha,new qi(t,this,s,La(this,ca,"f")),"f"),$a(this,fa,new vo(t),"f"),$a(this,ua,new ta(t),"f"),$a(this,ma,new to(t),"f"),$a(this,ga,r,"f"),$a(this,ya,null,"f"),La(this,na,"f")._targetManager().addTargetInterceptor(La(this,ra,"f"),La(this,Ma,"f")),La(this,na,"f")._targetManager().on("targetGone",La(this,Ca,"f")),La(this,ha,"f").on(Di.FrameAttached,(e=>this.emit("frameattached",e))),La(this,ha,"f").on(Di.FrameDetached,(e=>this.emit("framedetached",e))),La(this,ha,"f").on(Di.FrameNavigated,(e=>this.emit("framenavigated",e)));const n=La(this,ha,"f").networkManager;n.on(li.Request,(e=>this.emit("request",e))),n.on(li.RequestServedFromCache,(e=>this.emit("requestservedfromcache",e))),n.on(li.Response,(e=>this.emit("response",e))),n.on(li.RequestFailed,(e=>this.emit("requestfailed",e))),n.on(li.RequestFinished,(e=>this.emit("requestfinished",e))),t.on("Page.domContentEventFired",(()=>this.emit("domcontentloaded"))),t.on("Page.loadEventFired",(()=>this.emit("load"))),t.on("Runtime.consoleAPICalled",(e=>La(this,ia,"m",Fa).call(this,e))),t.on("Runtime.bindingCalled",(e=>La(this,ia,"m",Wa).call(this,e))),t.on("Page.javascriptDialogOpening",(e=>La(this,ia,"m",Da).call(this,e))),t.on("Runtime.exceptionThrown",(e=>La(this,ia,"m",Sa).call(this,e.exceptionDetails))),t.on("Inspector.targetCrashed",(()=>La(this,ia,"m",Ta).call(this))),t.on("Performance.metrics",(e=>La(this,ia,"m",Ia).call(this,e))),t.on("Log.entryAdded",(e=>La(this,ia,"m",xa).call(this,e))),t.on("Page.fileChooserOpened",(e=>La(this,ia,"m",_a).call(this,e))),La(this,na,"f")._isClosedPromise.then((()=>{La(this,na,"f")._targetManager().removeTargetInterceptor(La(this,ra,"f"),La(this,Ma,"f")),La(this,na,"f")._targetManager().off("targetGone",La(this,Ca,"f")),this.emit("close"),$a(this,sa,!0,"f")}))}_client(){return La(this,ra,"f")}isDragInterceptionEnabled(){return La(this,Ea,"f")}isJavaScriptEnabled(){return La(this,pa,"f")}waitForFileChooser(e={}){const t=0===La(this,ka,"f").size,{timeout:i=La(this,ca,"f").timeout()}=e,s=Z({message:`Waiting for \`FileChooser\` failed: ${i}ms exceeded`,timeout:i});let r;return La(this,ka,"f").add(s),t&&(r=La(this,ra,"f").send("Page.setInterceptFileChooserDialog",{enabled:!0})),Promise.all([s,r]).then((([e])=>e)).catch((e=>{throw La(this,ka,"f").delete(s),e}))}async setGeolocation(e){const{longitude:t,latitude:i,accuracy:s=0}=e;if(t<-180||t>180)throw new Error(`Invalid longitude "${t}": precondition -180 <= LONGITUDE <= 180 failed.`);if(i<-90||i>90)throw new Error(`Invalid latitude "${i}": precondition -90 <= LATITUDE <= 90 failed.`);if(s<0)throw new Error(`Invalid accuracy "${s}": precondition 0 <= ACCURACY failed.`);await La(this,ra,"f").send("Emulation.setGeolocationOverride",{longitude:t,latitude:i,accuracy:s})}target(){return La(this,na,"f")}browser(){return La(this,na,"f").browser()}browserContext(){return La(this,na,"f").browserContext()}mainFrame(){return La(this,ha,"f").mainFrame()}get keyboard(){return La(this,oa,"f")}get touchscreen(){return La(this,da,"f")}get coverage(){return La(this,ma,"f")}get tracing(){return La(this,ua,"f")}get accessibility(){return La(this,la,"f")}frames(){return La(this,ha,"f").frames()}workers(){return Array.from(La(this,va,"f").values())}async setRequestInterception(e){return La(this,ha,"f").networkManager.setRequestInterception(e)}async setDragInterception(e){return $a(this,Ea,e,"f"),La(this,ra,"f").send("Input.setInterceptDrags",{enabled:e})}setOfflineMode(e){return La(this,ha,"f").networkManager.setOfflineMode(e)}emulateNetworkConditions(e){return La(this,ha,"f").networkManager.emulateNetworkConditions(e)}setDefaultNavigationTimeout(e){La(this,ca,"f").setDefaultNavigationTimeout(e)}setDefaultTimeout(e){La(this,ca,"f").setDefaultTimeout(e)}getDefaultTimeout(){return La(this,ca,"f").timeout()}async $(e){return this.mainFrame().$(e)}async $$(e){return this.mainFrame().$$(e)}async evaluateHandle(e,...t){return(await this.mainFrame().executionContext()).evaluateHandle(e,...t)}async queryObjects(t){const i=await this.mainFrame().executionContext();e(!t.disposed,"Prototype JSHandle is disposed!");const s=t.remoteObject();e(s.objectId,"Prototype JSHandle must not be referencing primitive value");const r=await i._client.send("Runtime.queryObjects",{prototypeObjectId:s.objectId});return $r(i,r.objects)}async $eval(e,t,...i){return this.mainFrame().$eval(e,t,...i)}async $$eval(e,t,...i){return this.mainFrame().$$eval(e,t,...i)}async $x(e){return this.mainFrame().$x(e)}async cookies(...e){const t=(await La(this,ra,"f").send("Network.getCookies",{urls:e.length?e:[this.url()]})).cookies,i=["priority"];return t.map((e=>{for(const t of i)delete e[t];return e}))}async deleteCookie(...e){const t=this.url();for(const i of e){const e=Object.assign({},i);!i.url&&t.startsWith("http")&&(e.url=t),await La(this,ra,"f").send("Network.deleteCookies",e)}}async setCookie(...t){const i=this.url(),s=i.startsWith("http"),r=t.map((t=>{const r=Object.assign({},t);return!r.url&&s&&(r.url=i),e("about:blank"!==r.url,`Blank page can not have cookie "${r.name}"`),e(!String.prototype.startsWith.call(r.url||"","data:"),`Data URL page can not have cookie "${r.name}"`),r}));await this.deleteCookie(...r),r.length&&await La(this,ra,"f").send("Network.setCookies",{cookies:r})}async addScriptTag(e){return this.mainFrame().addScriptTag(e)}async addStyleTag(e){return this.mainFrame().addStyleTag(e)}async exposeFunction(e,t){if(La(this,wa,"f").has(e))throw new Error(`Failed to add page binding with name ${e}: window['${e}'] already exists!`);let i;if("function"==typeof t)i=t;else i=t.default;La(this,wa,"f").set(e,i);const s=Hr("exposedFun",e);await La(this,ra,"f").send("Runtime.addBinding",{name:e}),await La(this,ra,"f").send("Page.addScriptToEvaluateOnNewDocument",{source:s}),await Promise.all(this.frames().map((e=>e.evaluate(s).catch(Rr))))}async authenticate(e){return La(this,ha,"f").networkManager.authenticate(e)}async setExtraHTTPHeaders(e){return La(this,ha,"f").networkManager.setExtraHTTPHeaders(e)}async setUserAgent(e,t){return La(this,ha,"f").networkManager.setUserAgent(e,t)}async metrics(){const e=await La(this,ra,"f").send("Performance.getMetrics");return La(this,ia,"m",Na).call(this,e.metrics)}url(){return this.mainFrame().url()}async content(){return await La(this,ha,"f").mainFrame().content()}async setContent(e,t={}){await La(this,ha,"f").mainFrame().setContent(e,t)}async goto(e,t={}){return await La(this,ha,"f").mainFrame().goto(e,t)}async reload(e){return(await Promise.all([this.waitForNavigation(e),La(this,ra,"f").send("Page.reload")]))[0]}async waitForNavigation(e={}){return await La(this,ha,"f").mainFrame().waitForNavigation(e)}async waitForRequest(e,t={}){const{timeout:i=La(this,ca,"f").timeout()}=t;return Lr(La(this,ha,"f").networkManager,li.Request,(async t=>Kr(e)?e===t.url():"function"==typeof e&&!!await e(t)),i,La(this,ia,"m",Aa).call(this))}async waitForResponse(e,t={}){const{timeout:i=La(this,ca,"f").timeout()}=t;return Lr(La(this,ha,"f").networkManager,li.Response,(async t=>Kr(e)?e===t.url():"function"==typeof e&&!!await e(t)),i,La(this,ia,"m",Aa).call(this))}async waitForNetworkIdle(e={}){const{idleTime:t=500,timeout:i=La(this,ca,"f").timeout()}=e,s=La(this,ha,"f").networkManager;let r;const n=new Promise((e=>{r=e}));let o;const a=new Promise(((e,t)=>{o=t}));let c;const d=()=>r(),l=()=>{c&&clearTimeout(c),o(new Error("abort"))},h=()=>{c&&clearTimeout(c),0===s.numRequestsInProgress()&&(c=setTimeout(d,t))};h();const f=()=>(h(),!1),u=e=>Lr(s,e,f,i,a),w=[u(li.Request),u(li.Response)];await Promise.race([n,...w,La(this,ia,"m",Aa).call(this)]).then((e=>(l(),e)),(e=>{throw l(),e}))}async waitForFrame(e,t={}){const{timeout:i=La(this,ca,"f").timeout()}=t;let s;s=Kr(e)?t=>Promise.resolve(e===t.url()):t=>{const i=e(t);return"boolean"==typeof i?Promise.resolve(i):i};const r=Promise.race([Lr(La(this,ha,"f"),Di.FrameAttached,s,i,La(this,ia,"m",Aa).call(this)),Lr(La(this,ha,"f"),Di.FrameNavigated,s,i,La(this,ia,"m",Aa).call(this)),...this.frames().map((async e=>await s(e)?e:await r))]);return r}async goBack(e={}){return La(this,ia,"m",Oa).call(this,-1,e)}async goForward(e={}){return La(this,ia,"m",Oa).call(this,1,e)}async bringToFront(){await La(this,ra,"f").send("Page.bringToFront")}async setJavaScriptEnabled(e){La(this,pa,"f")!==e&&($a(this,pa,e,"f"),await La(this,ra,"f").send("Emulation.setScriptExecutionDisabled",{value:!e}))}async setBypassCSP(e){await La(this,ra,"f").send("Page.setBypassCSP",{enabled:e})}async emulateMediaType(t){e("screen"===t||"print"===t||void 0===(null!=t?t:void 0),"Unsupported media type: "+t),await La(this,ra,"f").send("Emulation.setEmulatedMedia",{media:t||""})}async emulateCPUThrottling(t){e(null===t||t>=1,"Throttling rate should be greater or equal to 1"),await La(this,ra,"f").send("Emulation.setCPUThrottlingRate",{rate:null!==t?t:1})}async emulateMediaFeatures(t){if(t||await La(this,ra,"f").send("Emulation.setEmulatedMedia",{}),Array.isArray(t)){for(const i of t){const t=i.name;e(/^(?:prefers-(?:color-scheme|reduced-motion)|color-gamut)$/.test(t),"Unsupported media feature: "+t)}await La(this,ra,"f").send("Emulation.setEmulatedMedia",{features:t})}}async emulateTimezone(e){try{await La(this,ra,"f").send("Emulation.setTimezoneOverride",{timezoneId:e||""})}catch(t){if(L(t)&&t.message.includes("Invalid timezone"))throw new Error(`Invalid timezone ID: ${e}`);throw t}}async emulateIdleState(e){e?await La(this,ra,"f").send("Emulation.setIdleOverride",{isUserActive:e.isUserActive,isScreenUnlocked:e.isScreenUnlocked}):await La(this,ra,"f").send("Emulation.clearIdleOverride")}async emulateVisionDeficiency(t){const i=new Set(["none","achromatopsia","blurredVision","deuteranopia","protanopia","tritanopia"]);try{e(!t||i.has(t),`Unsupported vision deficiency: ${t}`),await La(this,ra,"f").send("Emulation.setEmulatedVisionDeficiency",{type:t||"none"})}catch(e){throw e}}async setViewport(e){const t=await La(this,fa,"f").emulateViewport(e);$a(this,ya,e,"f"),t&&await this.reload()}viewport(){return La(this,ya,"f")}async evaluate(e,...t){return La(this,ha,"f").mainFrame().evaluate(e,...t)}async evaluateOnNewDocument(e,...t){const i=Br(e,...t);await La(this,ra,"f").send("Page.addScriptToEvaluateOnNewDocument",{source:i})}async setCacheEnabled(e=!0){await La(this,ha,"f").networkManager.setCacheEnabled(e)}async screenshot(t={}){let i="png";if(t.type)i=t.type;else if(t.path){const e=t.path,s=e.slice(e.lastIndexOf(".")+1).toLowerCase();switch(s){case"png":i="png";break;case"jpeg":case"jpg":i="jpeg";break;case"webp":i="webp";break;default:throw new Error(`Unsupported screenshot type for extension \`.${s}\``)}}return t.quality&&(e("jpeg"===i||"webp"===i,"options.quality is unsupported for the "+i+" screenshots"),e("number"==typeof t.quality,"Expected options.quality to be a number but found "+typeof t.quality),e(Number.isInteger(t.quality),"Expected options.quality to be an integer"),e(t.quality>=0&&t.quality<=100,"Expected options.quality to be between 0 and 100 (inclusive), got "+t.quality)),e(!t.clip||!t.fullPage,"options.clip and options.fullPage are exclusive"),t.clip&&(e("number"==typeof t.clip.x,"Expected options.clip.x to be a number but found "+typeof t.clip.x),e("number"==typeof t.clip.y,"Expected options.clip.y to be a number but found "+typeof t.clip.y),e("number"==typeof t.clip.width,"Expected options.clip.width to be a number but found "+typeof t.clip.width),e("number"==typeof t.clip.height,"Expected options.clip.height to be a number but found "+typeof t.clip.height),e(0!==t.clip.width,"Expected options.clip.width not to be 0."),e(0!==t.clip.height,"Expected options.clip.height not to be 0.")),La(this,ga,"f").postTask((()=>La(this,ia,"m",Ka).call(this,i,t)))}async createPDFStream(t={}){const{scale:i=1,displayHeaderFooter:s=!1,headerTemplate:r="",footerTemplate:n="",printBackground:o=!1,landscape:a=!1,pageRanges:c="",preferCSSPageSize:d=!1,margin:l={},omitBackground:h=!1,timeout:f=3e4}=t;let u=8.5,w=11;if(t.format){const i=Ho[t.format.toLowerCase()];e(i,"Unknown paper format: "+t.format),u=i.width,w=i.height}else u=Va(t.width)||u,w=Va(t.height)||w;const m=Va(l.top)||0,p=Va(l.left)||0,y=Va(l.bottom)||0,g=Va(l.right)||0;h&&await La(this,ia,"m",ja).call(this);const v=La(this,ra,"f").send("Page.printToPDF",{transferMode:"ReturnAsStream",landscape:a,displayHeaderFooter:s,headerTemplate:r,footerTemplate:n,printBackground:o,scale:i,paperWidth:u,paperHeight:w,marginTop:m,marginBottom:y,marginLeft:p,marginRight:g,pageRanges:c,preferCSSPageSize:d}),k=await Ur(v,"Page.printToPDF",f);return h&&await La(this,ia,"m",qa).call(this),e(k.stream,"`stream` is missing from `Page.printToPDF"),Qr(La(this,ra,"f"),k.stream)}async pdf(t={}){const{path:i}=t,s=await this.createPDFStream(t),r=await Gr(s,i);return e(r,"Could not create buffer"),r}async title(){return this.mainFrame().title()}async close(t={runBeforeUnload:void 0}){const i=La(this,ra,"f").connection();e(i,"Protocol error: Connection closed. Most likely the page has been closed.");!!t.runBeforeUnload?await La(this,ra,"f").send("Page.close"):(await i.send("Target.closeTarget",{targetId:La(this,na,"f")._targetId}),await La(this,na,"f")._isClosedPromise)}isClosed(){return La(this,sa,"f")}get mouse(){return La(this,aa,"f")}click(e,t={}){return this.mainFrame().click(e,t)}focus(e){return this.mainFrame().focus(e)}hover(e){return this.mainFrame().hover(e)}select(e,...t){return this.mainFrame().select(e,...t)}tap(e){return this.mainFrame().tap(e)}type(e,t,i){return this.mainFrame().type(e,t,i)}waitForTimeout(e){return this.mainFrame().waitForTimeout(e)}async waitForSelector(e,t={}){return await this.mainFrame().waitForSelector(e,t)}waitForXPath(e,t={}){return this.mainFrame().waitForXPath(e,t)}waitForFunction(e,t={},...i){return this.mainFrame().waitForFunction(e,t,...i)}}sa=new WeakMap,ra=new WeakMap,na=new WeakMap,oa=new WeakMap,aa=new WeakMap,ca=new WeakMap,da=new WeakMap,la=new WeakMap,ha=new WeakMap,fa=new WeakMap,ua=new WeakMap,wa=new WeakMap,ma=new WeakMap,pa=new WeakMap,ya=new WeakMap,ga=new WeakMap,va=new WeakMap,ka=new WeakMap,ba=new WeakMap,Ea=new WeakMap,Ca=new WeakMap,Ma=new WeakMap,ia=new WeakSet,Pa=async function(){try{await Promise.all([La(this,ha,"f").initialize(),La(this,ra,"f").send("Performance.enable"),La(this,ra,"f").send("Log.enable")])}catch(e){if(!L(e)||!K(e))throw e;Rr(e)}},_a=async function(t){if(!La(this,ka,"f").size)return;const i=La(this,ha,"f").frame(t.frameId);e(i,"This should never happen.");const s=await i.worlds[$].adoptBackendNode(t.backendNodeId),r=new Po(s,t);for(const e of La(this,ka,"f"))e.resolve(r);La(this,ka,"f").clear()},Ta=function(){this.emit("error",new Error("Page crashed!"))},xa=function(e){const{level:t,text:i,args:s,source:r,url:n,lineNumber:o}=e.entry;s&&s.map((e=>jr(La(this,ra,"f"),e))),"worker"!==r&&this.emit("console",new Nn(t,i,[],[{url:n,lineNumber:o}]))},Ia=function(e){this.emit("metrics",{title:e.title,metrics:La(this,ia,"m",Na).call(this,e.metrics)})},Na=function(e){const t={};for(const i of e||[])Ha.has(i.name)&&(t[i.name]=i.value);return t},Sa=function(e){const t=Dr(e),i=new Error(t);i.stack="",this.emit("pageerror",i)},Fa=async function(e){if(0===e.executionContextId)return;const t=La(this,ha,"f").getExecutionContextById(e.executionContextId,La(this,ra,"f"));if(!t)return void Rr(new Error(`ExecutionContext not found for a console message: ${JSON.stringify(e)}`));const i=e.args.map((e=>$r(t,e)));La(this,ia,"m",Ra).call(this,e.type,i,e.stackTrace)},Wa=async function(t){let i;try{i=JSON.parse(t.payload)}catch{return}const{type:s,name:r,seq:n,args:o}=i;if("exposedFun"!==s||!La(this,wa,"f").has(r))return;let a=null;try{const t=La(this,wa,"f").get(r);e(t);a=function(e,t,i){return Br((function(e,t,i){window[e].callbacks.get(t).resolve(i),window[e].callbacks.delete(t)}),e,t,i)}(r,n,await t(...o))}catch(e){a=L(e)?function(e,t,i,s){return Br((function(e,t,i,s){const r=new Error(i);r.stack=s,window[e].callbacks.get(t).reject(r),window[e].callbacks.delete(t)}),e,t,i,s)}(r,n,e.message,e.stack):function(e,t,i){return Br((function(e,t,i){window[e].callbacks.get(t).reject(i),window[e].callbacks.delete(t)}),e,t,i)}(r,n,e)}La(this,ra,"f").send("Runtime.evaluate",{expression:a,contextId:t.executionContextId}).catch(Rr)},Ra=function(e,t,i){if(!this.listenerCount("console"))return void t.forEach((e=>e.dispose()));const s=[];for(const e of t){const t=e.remoteObject();t.objectId?s.push(e.toString()):s.push(qr(t))}const r=[];if(i)for(const e of i.callFrames)r.push({url:e.url,lineNumber:e.lineNumber,columnNumber:e.columnNumber});const n=new Nn(e,s.join(" "),t,r);this.emit("console",n)},Da=function(t){let i=null;new Set(["alert","confirm","prompt","beforeunload"]).has(t.type)&&(i=t.type),e(i,"Unknown javascript dialog type: "+t.type);const s=new uo(La(this,ra,"f"),i,t.message,t.defaultPrompt);this.emit("dialog",s)},qa=async function(){await La(this,ra,"f").send("Emulation.setDefaultBackgroundColorOverride")},ja=async function(){await La(this,ra,"f").send("Emulation.setDefaultBackgroundColorOverride",{color:{r:0,g:0,b:0,a:0}})},Aa=function(){return La(this,ba,"f")||$a(this,ba,new Promise((e=>La(this,ra,"f").once(D.Disconnected,(()=>e(new Error("Target closed")))))),"f"),La(this,ba,"f")},Oa=async function(e,t){const i=await La(this,ra,"f").send("Page.getNavigationHistory"),s=i.entries[i.currentIndex+e];if(!s)return null;return(await Promise.all([this.waitForNavigation(t),La(this,ra,"f").send("Page.navigateToHistoryEntry",{entryId:s.id})]))[0]},Ka=async function(e,t={}){var i,s;await La(this,ra,"f").send("Target.activateTarget",{targetId:La(this,na,"f")._targetId});let r=t.clip?function(e){const t=Math.round(e.x),i=Math.round(e.y),s=Math.round(e.width+e.x-t),r=Math.round(e.height+e.y-i);return{x:t,y:i,width:s,height:r,scale:e.scale}}(t.clip):void 0,n=null===(i=t.captureBeyondViewport)||void 0===i||i;const o=t.fromSurface;if(t.fullPage){if(r=void 0,!n){const e=await La(this,ra,"f").send("Page.getLayoutMetrics"),{width:t,height:i}=e.cssContentSize||e.contentSize,{isMobile:s=!1,deviceScaleFactor:r=1,isLandscape:n=!1}=La(this,ya,"f")||{},o=n?{angle:90,type:"landscapePrimary"}:{angle:0,type:"portraitPrimary"};await La(this,ra,"f").send("Emulation.setDeviceMetricsOverride",{mobile:s,width:t,height:i,deviceScaleFactor:r,screenOrientation:o})}}else r||(n=!1);const a=t.omitBackground&&("png"===e||"webp"===e);a&&await La(this,ia,"m",ja).call(this);const c=await La(this,ra,"f").send("Page.captureScreenshot",{format:e,quality:t.quality,clip:r&&{...r,scale:null!==(s=r.scale)&&void 0!==s?s:1},captureBeyondViewport:n,fromSurface:o});a&&await La(this,ia,"m",qa).call(this),t.fullPage&&La(this,ya,"f")&&await this.setViewport(La(this,ya,"f"));const d="base64"===t.encoding?c.data:Buffer.from(c.data,"base64");if(t.path)try{const e=(await zr()).promises;await e.writeFile(t.path,d)}catch(e){if(e instanceof TypeError)throw new Error("Screenshots can only be written to a file path in a Node-like environment.");throw e}return d};const Ha=new Set(["Timestamp","Documents","Frames","JSEventListeners","Nodes","LayoutCount","RecalcStyleCount","LayoutDuration","RecalcStyleDuration","ScriptDuration","TaskDuration","JSHeapUsedSize","JSHeapTotalSize"]),Ua={px:1,in:96,cm:37.8,mm:3.78};function Va(t){if(void 0===t)return;let i;if("number"==typeof(s=t)||s instanceof Number)i=t;else{if(!Kr(t))throw new Error("page.pdf() Cannot handle parameter type: "+typeof t);{const s=t;let r=s.substring(s.length-2).toLowerCase(),n="";r in Ua?n=s.substring(0,s.length-2):(r="px",n=s);const o=Number(n);e(!isNaN(o),"Failed to parse parameter value: "+s),i=o*Ua[r]}}var s;return i/96}var za,Ga,Qa,Ja,Xa,Ya,Za,ec,tc,ic,sc=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},rc=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class nc{constructor(e,t,i,s,r,n,o,a,c){za.set(this,void 0),Ga.set(this,void 0),Qa.set(this,void 0),Ja.set(this,void 0),Xa.set(this,void 0),Ya.set(this,void 0),Za.set(this,void 0),ec.set(this,void 0),tc.set(this,void 0),ic.set(this,void 0),sc(this,Ga,t,"f"),sc(this,ic,s,"f"),sc(this,Qa,e,"f"),sc(this,za,i,"f"),this._targetId=e.targetId,sc(this,Ja,r,"f"),sc(this,Xa,n,"f"),sc(this,Ya,null!=o?o:void 0,"f"),sc(this,tc,a,"f"),this._isPageTargetCallback=c,this._initializedPromise=new Promise((e=>this._initializedCallback=e)).then((async e=>{if(!e)return!1;const t=this.opener();if(!t||!rc(t,Za,"f")||"page"!==this.type())return!0;const i=await rc(t,Za,"f");if(!i.listenerCount("popup"))return!0;const s=await this.page();return i.emit("popup",s),!0})),this._isClosedPromise=new Promise((e=>this._closedCallback=e)),this._isInitialized=!this._isPageTargetCallback(rc(this,Qa,"f"))||""!==rc(this,Qa,"f").url,this._isInitialized&&this._initializedCallback(!0)}_session(){return rc(this,Ga,"f")}createCDPSession(){return rc(this,Ja,"f").call(this,!1)}_targetManager(){return rc(this,ic,"f")}_getTargetInfo(){return rc(this,Qa,"f")}async page(){var e;return this._isPageTargetCallback(rc(this,Qa,"f"))&&!rc(this,Za,"f")&&sc(this,Za,(rc(this,Ga,"f")?Promise.resolve(rc(this,Ga,"f")):rc(this,Ja,"f").call(this,!0)).then((e=>{var t;return Ba._create(e,this,rc(this,Xa,"f"),null!==(t=rc(this,Ya,"f"))&&void 0!==t?t:null,rc(this,tc,"f"))})),"f"),null!==(e=await rc(this,Za,"f"))&&void 0!==e?e:null}async worker(){return"service_worker"!==rc(this,Qa,"f").type&&"shared_worker"!==rc(this,Qa,"f").type?null:(rc(this,ec,"f")||sc(this,ec,(rc(this,Ga,"f")?Promise.resolve(rc(this,Ga,"f")):rc(this,Ja,"f").call(this,!1)).then((e=>new sn(e,rc(this,Qa,"f").url,(()=>{}),(()=>{})))),"f"),rc(this,ec,"f"))}url(){return rc(this,Qa,"f").url}type(){const e=rc(this,Qa,"f").type;return"page"===e||"background_page"===e||"service_worker"===e||"shared_worker"===e||"browser"===e||"webview"===e?e:"other"}browser(){return rc(this,za,"f").browser()}browserContext(){return rc(this,za,"f")}opener(){const{openerId:e}=rc(this,Qa,"f");if(e)return this.browser()._targets.get(e)}_targetInfoChanged(e){if(sc(this,Qa,e,"f"),!(this._isInitialized||this._isPageTargetCallback(rc(this,Qa,"f"))&&""===rc(this,Qa,"f").url))return this._isInitialized=!0,void this._initializedCallback(!0)}}za=new WeakMap,Ga=new WeakMap,Qa=new WeakMap,Ja=new WeakMap,Xa=new WeakMap,Ya=new WeakMap,Za=new WeakMap,ec=new WeakMap,tc=new WeakMap,ic=new WeakMap;var oc,ac=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},cc=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class dc{constructor(){oc.set(this,void 0),ac(this,oc,Promise.resolve(),"f")}postTask(e){const t=cc(this,oc,"f").then(e);return ac(this,oc,t.then((()=>{}),(()=>{})),"f"),t}}oc=new WeakMap;var lc,hc,fc,uc,wc,mc,pc,yc,gc,vc,kc,bc,Ec,Cc,Mc,Pc,_c,Tc,xc,Ic,Nc,Sc,Fc,Wc,Rc=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},Dc=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class qc extends a{constructor(t,i,s){super(),lc.add(this),hc.set(this,void 0),fc.set(this,new Map),uc.set(this,new Map),wc.set(this,new Map),mc.set(this,new Set),pc.set(this,void 0),yc.set(this,void 0),gc.set(this,new WeakMap),vc.set(this,new WeakMap),kc.set(this,new WeakMap),bc.set(this,(()=>{})),Ec.set(this,new Promise((e=>{Rc(this,bc,e,"f")}))),Cc.set(this,new Set),Mc.set(this,(()=>{for(const[e,t]of Dc(this,fc,"f").entries())Dc(this,pc,"f")&&!Dc(this,pc,"f").call(this,t)||"browser"===t.type||Dc(this,Cc,"f").add(e)})),Tc.set(this,(e=>{Dc(this,lc,"m",_c).call(this,e),Dc(this,gc,"f").delete(e)})),xc.set(this,(async e=>{if(Dc(this,fc,"f").set(e.targetInfo.targetId,e.targetInfo),this.emit("targetDiscovered",e.targetInfo),"browser"===e.targetInfo.type&&e.targetInfo.attached){if(Dc(this,uc,"f").has(e.targetInfo.targetId))return;const t=Dc(this,yc,"f").call(this,e.targetInfo,void 0);Dc(this,uc,"f").set(e.targetInfo.targetId,t)}})),Ic.set(this,(e=>{const t=Dc(this,fc,"f").get(e.targetId);if(Dc(this,fc,"f").delete(e.targetId),Dc(this,lc,"m",Fc).call(this,e.targetId),"service_worker"===(null==t?void 0:t.type)&&Dc(this,uc,"f").has(e.targetId)){const t=Dc(this,uc,"f").get(e.targetId);this.emit("targetGone",t),Dc(this,uc,"f").delete(e.targetId)}})),Nc.set(this,(e=>{if(Dc(this,fc,"f").set(e.targetInfo.targetId,e.targetInfo),Dc(this,mc,"f").has(e.targetInfo.targetId)||!Dc(this,uc,"f").has(e.targetInfo.targetId)||!e.targetInfo.attached)return;const t=Dc(this,uc,"f").get(e.targetInfo.targetId);this.emit("targetChanged",{target:t,targetInfo:e.targetInfo})})),Sc.set(this,(async(t,i)=>{const s=i.targetInfo,r=Dc(this,hc,"f").session(i.sessionId);if(!r)throw new Error(`Session ${i.sessionId} was not created.`);const n=async()=>{await r.send("Runtime.runIfWaitingForDebugger").catch(Rr),await t.send("Target.detachFromTarget",{sessionId:r.id()}).catch(Rr)};if(!Dc(this,hc,"f").isAutoAttached(s.targetId))return;if("service_worker"===s.type&&Dc(this,hc,"f").isAutoAttached(s.targetId)){if(Dc(this,lc,"m",Fc).call(this,s.targetId),await n(),Dc(this,uc,"f").has(s.targetId))return;const e=Dc(this,yc,"f").call(this,s);return Dc(this,uc,"f").set(s.targetId,e),void this.emit("targetAvailable",e)}if(Dc(this,pc,"f")&&!Dc(this,pc,"f").call(this,s))return Dc(this,mc,"f").add(s.targetId),Dc(this,lc,"m",Fc).call(this,s.targetId),void await n();const o=Dc(this,uc,"f").has(s.targetId),a=o?Dc(this,uc,"f").get(s.targetId):Dc(this,yc,"f").call(this,s,r);Dc(this,lc,"m",Pc).call(this,r),o?Dc(this,wc,"f").set(r.id(),Dc(this,uc,"f").get(s.targetId)):(Dc(this,uc,"f").set(s.targetId,a),Dc(this,wc,"f").set(r.id(),a));for(const i of Dc(this,gc,"f").get(t)||[])t instanceof R||e(Dc(this,wc,"f").has(t.id())),i(a,t instanceof R?null:Dc(this,wc,"f").get(t.id()));Dc(this,Cc,"f").delete(a._targetId),o||this.emit("targetAvailable",a),Dc(this,lc,"m",Fc).call(this),await Promise.all([r.send("Target.setAutoAttach",{waitForDebuggerOnStart:!0,flatten:!0,autoAttach:!0}),r.send("Runtime.runIfWaitingForDebugger")]).catch(Rr)})),Wc.set(this,((e,t)=>{const i=Dc(this,wc,"f").get(t.sessionId);Dc(this,wc,"f").delete(t.sessionId),i&&(Dc(this,uc,"f").delete(i._targetId),this.emit("targetGone",i))})),Rc(this,hc,t,"f"),Rc(this,pc,s,"f"),Rc(this,yc,i,"f"),Dc(this,hc,"f").on("Target.targetCreated",Dc(this,xc,"f")),Dc(this,hc,"f").on("Target.targetDestroyed",Dc(this,Ic,"f")),Dc(this,hc,"f").on("Target.targetInfoChanged",Dc(this,Nc,"f")),Dc(this,hc,"f").on("sessiondetached",Dc(this,Tc,"f")),Dc(this,lc,"m",Pc).call(this,Dc(this,hc,"f")),Dc(this,hc,"f").send("Target.setDiscoverTargets",{discover:!0,filter:[{type:"tab",exclude:!0},{}]}).then(Dc(this,Mc,"f")).catch(Rr)}async initialize(){await Dc(this,hc,"f").send("Target.setAutoAttach",{waitForDebuggerOnStart:!0,flatten:!0,autoAttach:!0}),Dc(this,lc,"m",Fc).call(this),await Dc(this,Ec,"f")}dispose(){Dc(this,hc,"f").off("Target.targetCreated",Dc(this,xc,"f")),Dc(this,hc,"f").off("Target.targetDestroyed",Dc(this,Ic,"f")),Dc(this,hc,"f").off("Target.targetInfoChanged",Dc(this,Nc,"f")),Dc(this,hc,"f").off("sessiondetached",Dc(this,Tc,"f")),Dc(this,lc,"m",_c).call(this,Dc(this,hc,"f"))}getAvailableTargets(){return Dc(this,uc,"f")}addTargetInterceptor(e,t){const i=Dc(this,gc,"f").get(e)||[];i.push(t),Dc(this,gc,"f").set(e,i)}removeTargetInterceptor(e,t){const i=Dc(this,gc,"f").get(e)||[];Dc(this,gc,"f").set(e,i.filter((e=>e!==t)))}}hc=new WeakMap,fc=new WeakMap,uc=new WeakMap,wc=new WeakMap,mc=new WeakMap,pc=new WeakMap,yc=new WeakMap,gc=new WeakMap,vc=new WeakMap,kc=new WeakMap,bc=new WeakMap,Ec=new WeakMap,Cc=new WeakMap,Mc=new WeakMap,Tc=new WeakMap,xc=new WeakMap,Ic=new WeakMap,Nc=new WeakMap,Sc=new WeakMap,Wc=new WeakMap,lc=new WeakSet,Pc=function(t){const i=e=>Dc(this,Sc,"f").call(this,t,e);e(!Dc(this,vc,"f").has(t)),Dc(this,vc,"f").set(t,i),t.on("Target.attachedToTarget",i);const s=e=>Dc(this,Wc,"f").call(this,t,e);e(!Dc(this,kc,"f").has(t)),Dc(this,kc,"f").set(t,s),t.on("Target.detachedFromTarget",s)},_c=function(e){Dc(this,vc,"f").has(e)&&(e.off("Target.attachedToTarget",Dc(this,vc,"f").get(e)),Dc(this,vc,"f").delete(e)),Dc(this,kc,"f").has(e)&&(e.off("Target.detachedFromTarget",Dc(this,kc,"f").get(e)),Dc(this,kc,"f").delete(e))},Fc=function(e){void 0!==e&&Dc(this,Cc,"f").delete(e),0===Dc(this,Cc,"f").size&&Dc(this,bc,"f").call(this)};var jc,Ac,Oc,Kc,Lc,$c,Bc,Hc,Uc,Vc,zc,Gc,Qc,Jc,Xc,Yc,Zc,ed,td=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},id=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class sd extends a{constructor(t,i,s){super(),jc.add(this),Ac.set(this,void 0),Oc.set(this,new Map),Kc.set(this,new Map),Lc.set(this,new Map),$c.set(this,new Set),Bc.set(this,void 0),Hc.set(this,void 0),Uc.set(this,new WeakMap),Vc.set(this,new WeakMap),zc.set(this,(()=>{})),Gc.set(this,new Promise((e=>{td(this,zc,e,"f")}))),Qc.set(this,new Set),Jc.set(this,(e=>{this.removeSessionListeners(e),id(this,Uc,"f").delete(e),id(this,Lc,"f").delete(e.id())})),Xc.set(this,(async e=>{if(id(this,Oc,"f").has(e.targetInfo.targetId))return;if(id(this,Oc,"f").set(e.targetInfo.targetId,e.targetInfo),"browser"===e.targetInfo.type&&e.targetInfo.attached){const t=id(this,Hc,"f").call(this,e.targetInfo,void 0);return id(this,Kc,"f").set(e.targetInfo.targetId,t),void id(this,jc,"m",ed).call(this,t._targetId)}if(id(this,Bc,"f")&&!id(this,Bc,"f").call(this,e.targetInfo))return id(this,$c,"f").add(e.targetInfo.targetId),void id(this,jc,"m",ed).call(this,e.targetInfo.targetId);const t=id(this,Hc,"f").call(this,e.targetInfo,void 0);id(this,Kc,"f").set(e.targetInfo.targetId,t),this.emit("targetAvailable",t),id(this,jc,"m",ed).call(this,t._targetId)})),Yc.set(this,(e=>{id(this,Oc,"f").delete(e.targetId),id(this,jc,"m",ed).call(this,e.targetId);const t=id(this,Kc,"f").get(e.targetId);t&&(this.emit("targetGone",t),id(this,Kc,"f").delete(e.targetId))})),Zc.set(this,(async(t,i)=>{const s=i.targetInfo,r=id(this,Ac,"f").session(i.sessionId);if(!r)throw new Error(`Session ${i.sessionId} was not created.`);const n=id(this,Kc,"f").get(s.targetId);e(n,`Target ${s.targetId} is missing`),this.setupAttachmentListeners(r),id(this,Lc,"f").set(r.id(),id(this,Kc,"f").get(s.targetId));for(const i of id(this,Uc,"f").get(t)||[])t instanceof R||e(id(this,Lc,"f").has(t.id())),await i(n,t instanceof R?null:id(this,Lc,"f").get(t.id()))})),td(this,Ac,t,"f"),td(this,Bc,s,"f"),td(this,Hc,i,"f"),id(this,Ac,"f").on("Target.targetCreated",id(this,Xc,"f")),id(this,Ac,"f").on("Target.targetDestroyed",id(this,Yc,"f")),id(this,Ac,"f").on("sessiondetached",id(this,Jc,"f")),this.setupAttachmentListeners(id(this,Ac,"f"))}addTargetInterceptor(e,t){const i=id(this,Uc,"f").get(e)||[];i.push(t),id(this,Uc,"f").set(e,i)}removeTargetInterceptor(e,t){const i=id(this,Uc,"f").get(e)||[];id(this,Uc,"f").set(e,i.filter((e=>e!==t)))}setupAttachmentListeners(t){const i=e=>id(this,Zc,"f").call(this,t,e);e(!id(this,Vc,"f").has(t)),id(this,Vc,"f").set(t,i),t.on("Target.attachedToTarget",i)}removeSessionListeners(e){id(this,Vc,"f").has(e)&&(e.off("Target.attachedToTarget",id(this,Vc,"f").get(e)),id(this,Vc,"f").delete(e))}getAvailableTargets(){return id(this,Kc,"f")}dispose(){id(this,Ac,"f").off("Target.targetCreated",id(this,Xc,"f")),id(this,Ac,"f").off("Target.targetDestroyed",id(this,Yc,"f"))}async initialize(){await id(this,Ac,"f").send("Target.setDiscoverTargets",{discover:!0}),td(this,Qc,new Set(id(this,Oc,"f").keys()),"f"),await id(this,Gc,"f")}}Ac=new WeakMap,Oc=new WeakMap,Kc=new WeakMap,Lc=new WeakMap,$c=new WeakMap,Bc=new WeakMap,Hc=new WeakMap,Uc=new WeakMap,Vc=new WeakMap,zc=new WeakMap,Gc=new WeakMap,Qc=new WeakMap,Jc=new WeakMap,Xc=new WeakMap,Yc=new WeakMap,Zc=new WeakMap,jc=new WeakSet,ed=function(e){id(this,Qc,"f").delete(e),0===id(this,Qc,"f").size&&id(this,zc,"f").call(this)};const rd=new Map([["geolocation","geolocation"],["midi","midi"],["notifications","notifications"],["camera","videoCapture"],["microphone","audioCapture"],["background-sync","backgroundSync"],["ambient-light-sensor","sensors"],["accelerometer","sensors"],["gyroscope","sensors"],["magnetometer","sensors"],["accessibility-events","accessibilityEvents"],["clipboard-read","clipboardReadWrite"],["clipboard-write","clipboardReadWrite"],["payment-handler","paymentHandler"],["persistent-storage","durableStorage"],["idle-detection","idleDetection"],["midi-sysex","midiSysex"]]);class nd extends a{constructor(){super()}_attach(){throw new Error("Not implemented")}_detach(){throw new Error("Not implemented")}get _targets(){throw new Error("Not implemented")}process(){throw new Error("Not implemented")}_getIsPageTargetCallback(){throw new Error("Not implemented")}createIncognitoBrowserContext(){throw new Error("Not implemented")}browserContexts(){throw new Error("Not implemented")}defaultBrowserContext(){throw new Error("Not implemented")}_disposeContext(){throw new Error("Not implemented")}wsEndpoint(){throw new Error("Not implemented")}newPage(){throw new Error("Not implemented")}_createPageInContext(){throw new Error("Not implemented")}targets(){throw new Error("Not implemented")}target(){throw new Error("Not implemented")}waitForTarget(){throw new Error("Not implemented")}pages(){throw new Error("Not implemented")}version(){throw new Error("Not implemented")}userAgent(){throw new Error("Not implemented")}close(){throw new Error("Not implemented")}disconnect(){throw new Error("Not implemented")}isConnected(){throw new Error("Not implemented")}}class od extends a{constructor(){super()}targets(){throw new Error("Not implemented")}waitForTarget(){throw new Error("Not implemented")}pages(){throw new Error("Not implemented")}isIncognito(){throw new Error("Not implemented")}overridePermissions(){throw new Error("Not implemented")}clearPermissionOverrides(){throw new Error("Not implemented")}newPage(){throw new Error("Not implemented")}browser(){throw new Error("Not implemented")}close(){throw new Error("Not implemented")}get id(){}}var ad,cd,dd,ld,hd,fd,ud,wd,md,pd,yd,gd,vd,kd,bd,Ed,Cd,Md,Pd,_d,Td,xd,Id,Nd=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)},Sd=self&&self.__classPrivateFieldSet||function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i};class Fd extends nd{static async _create(e,t,i,s,r,n,o,a,c){const d=new Fd(e,t,i,s,r,n,o,a,c);return await d._attach(),d}get _targets(){return Nd(this,gd,"f").getAvailableTargets()}constructor(e,t,i,s,r,n,o,a,c){super(),ad.add(this),cd.set(this,void 0),dd.set(this,void 0),ld.set(this,void 0),hd.set(this,void 0),fd.set(this,void 0),ud.set(this,void 0),wd.set(this,void 0),md.set(this,void 0),pd.set(this,void 0),yd.set(this,void 0),gd.set(this,void 0),vd.set(this,(()=>{this.emit("disconnected")})),bd.set(this,((e,t)=>{var i;const{browserContextId:s}=e,r=s&&Nd(this,pd,"f").has(s)?Nd(this,pd,"f").get(s):Nd(this,md,"f");if(!r)throw new Error("Missing browser context");return new nc(e,t,r,Nd(this,gd,"f"),(t=>Nd(this,hd,"f")._createSession(e,t)),Nd(this,cd,"f"),null!==(i=Nd(this,dd,"f"))&&void 0!==i?i:null,Nd(this,yd,"f"),Nd(this,wd,"f"))})),Ed.set(this,(async e=>{await e._initializedPromise&&(this.emit("targetcreated",e),e.browserContext().emit("targetcreated",e))})),Cd.set(this,(async e=>{e._initializedCallback(!1),e._closedCallback(),await e._initializedPromise&&(this.emit("targetdestroyed",e),e.browserContext().emit("targetdestroyed",e))})),Md.set(this,(({target:e,targetInfo:t})=>{const i=e.url(),s=e._isInitialized;e._targetInfoChanged(t),s&&i!==e.url()&&(this.emit("targetchanged",e),e.browserContext().emit("targetchanged",e))})),Pd.set(this,(e=>{this.emit("targetdiscovered",e)})),e=e||"chrome",Sd(this,cd,s,"f"),Sd(this,dd,r,"f"),Sd(this,ld,n,"f"),Sd(this,yd,new dc,"f"),Sd(this,hd,t,"f"),Sd(this,fd,o||function(){},"f"),Sd(this,ud,a||(()=>!0),"f"),Nd(this,ad,"m",kd).call(this,c),Sd(this,gd,"firefox"===e?new sd(t,Nd(this,bd,"f"),Nd(this,ud,"f")):new qc(t,Nd(this,bd,"f"),Nd(this,ud,"f")),"f"),Sd(this,md,new Wd(Nd(this,hd,"f"),this),"f"),Sd(this,pd,new Map,"f");for(const e of i)Nd(this,pd,"f").set(e,new Wd(Nd(this,hd,"f"),this,e))}async _attach(){Nd(this,hd,"f").on(W.Disconnected,Nd(this,vd,"f")),Nd(this,gd,"f").on("targetAvailable",Nd(this,Ed,"f")),Nd(this,gd,"f").on("targetGone",Nd(this,Cd,"f")),Nd(this,gd,"f").on("targetChanged",Nd(this,Md,"f")),Nd(this,gd,"f").on("targetDiscovered",Nd(this,Pd,"f")),await Nd(this,gd,"f").initialize()}_detach(){Nd(this,hd,"f").off(W.Disconnected,Nd(this,vd,"f")),Nd(this,gd,"f").off("targetAvailable",Nd(this,Ed,"f")),Nd(this,gd,"f").off("targetGone",Nd(this,Cd,"f")),Nd(this,gd,"f").off("targetChanged",Nd(this,Md,"f")),Nd(this,gd,"f").off("targetDiscovered",Nd(this,Pd,"f"))}process(){var e;return null!==(e=Nd(this,ld,"f"))&&void 0!==e?e:null}_targetManager(){return Nd(this,gd,"f")}_getIsPageTargetCallback(){return Nd(this,wd,"f")}async createIncognitoBrowserContext(e={}){const{proxyServer:t,proxyBypassList:i}=e,{browserContextId:s}=await Nd(this,hd,"f").send("Target.createBrowserContext",{proxyServer:t,proxyBypassList:i&&i.join(",")}),r=new Wd(Nd(this,hd,"f"),this,s);return Nd(this,pd,"f").set(s,r),r}browserContexts(){return[Nd(this,md,"f"),...Array.from(Nd(this,pd,"f").values())]}defaultBrowserContext(){return Nd(this,md,"f")}async _disposeContext(e){e&&(await Nd(this,hd,"f").send("Target.disposeBrowserContext",{browserContextId:e}),Nd(this,pd,"f").delete(e))}wsEndpoint(){return Nd(this,hd,"f").url()}async newPage(){return Nd(this,md,"f").newPage()}async _createPageInContext(e){const{targetId:t}=await Nd(this,hd,"f").send("Target.createTarget",{url:"about:blank",browserContextId:e||void 0}),i=Nd(this,gd,"f").getAvailableTargets().get(t);if(!i)throw new Error(`Missing target for page (id = ${t})`);if(!await i._initializedPromise)throw new Error(`Failed to create target for page (id = ${t})`);const s=await i.page();if(!s)throw new Error(`Failed to create a page for context (id = ${e})`);return s}targets(){return Array.from(Nd(this,gd,"f").getAvailableTargets().values()).filter((e=>e._isInitialized))}target(){const e=this.targets().find((e=>"browser"===e.type()));if(!e)throw new Error("Browser target is not found");return e}async waitForTarget(e,t={}){const{timeout:i=3e4}=t;let s,r=!1;const n=new Promise((e=>s=e));this.on("targetcreated",o),this.on("targetchanged",o);try{return this.targets().forEach(o),i?await Ur(n,"target",i):await n}finally{this.off("targetcreated",o),this.off("targetchanged",o)}async function o(t){await e(t)&&!r&&(r=!0,s(t))}}async pages(){return(await Promise.all(this.browserContexts().map((e=>e.pages())))).reduce(((e,t)=>e.concat(t)),[])}async version(){return(await Nd(this,ad,"m",_d).call(this)).product}async userAgent(){return(await Nd(this,ad,"m",_d).call(this)).userAgent}async close(){await Nd(this,fd,"f").call(null),this.disconnect()}disconnect(){Nd(this,gd,"f").dispose(),Nd(this,hd,"f").dispose()}isConnected(){return!Nd(this,hd,"f")._closed}}cd=new WeakMap,dd=new WeakMap,ld=new WeakMap,hd=new WeakMap,fd=new WeakMap,ud=new WeakMap,wd=new WeakMap,md=new WeakMap,pd=new WeakMap,yd=new WeakMap,gd=new WeakMap,vd=new WeakMap,bd=new WeakMap,Ed=new WeakMap,Cd=new WeakMap,Md=new WeakMap,Pd=new WeakMap,ad=new WeakSet,kd=function(e){Sd(this,wd,e||(e=>"page"===e.type||"background_page"===e.type||"webview"===e.type),"f")},_d=function(){return Nd(this,hd,"f").send("Browser.getVersion")};class Wd extends od{constructor(e,t,i){super(),Td.set(this,void 0),xd.set(this,void 0),Id.set(this,void 0),Sd(this,Td,e,"f"),Sd(this,xd,t,"f"),Sd(this,Id,i,"f")}get id(){return Nd(this,Id,"f")}targets(){return Nd(this,xd,"f").targets().filter((e=>e.browserContext()===this))}waitForTarget(e,t={}){return Nd(this,xd,"f").waitForTarget((t=>t.browserContext()===this&&e(t)),t)}async pages(){const e=await Promise.all(this.targets().filter((e=>{var t;return"page"===e.type()||"other"===e.type()&&(null===(t=Nd(this,xd,"f")._getIsPageTargetCallback())||void 0===t?void 0:t(e._getTargetInfo()))})).map((e=>e.page())));return e.filter((e=>!!e))}isIncognito(){return!!Nd(this,Id,"f")}async overridePermissions(e,t){const i=t.map((e=>{const t=rd.get(e);if(!t)throw new Error("Unknown permission: "+e);return t}));await Nd(this,Td,"f").send("Browser.grantPermissions",{origin:e,browserContextId:Nd(this,Id,"f")||void 0,permissions:i})}async clearPermissionOverrides(){await Nd(this,Td,"f").send("Browser.resetPermissions",{browserContextId:Nd(this,Id,"f")||void 0})}newPage(){return Nd(this,xd,"f")._createPageInContext(Nd(this,Id,"f"))}browser(){return Nd(this,xd,"f")}async close(){e(Nd(this,Id,"f"),"Non-incognito profiles cannot be closed!"),await Nd(this,xd,"f")._disposeContext(Nd(this,Id,"f"))}}Td=new WeakMap,xd=new WeakMap,Id=new WeakMap;export{Fd as Browser,R as Connection,Tr as ElementHandle,ir as Frame,Ba as Page};
>>>>>>> 0823204efb84884a0322b43e865bb36631ba8251
